var ee=Object.defineProperty,te=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var j=(p,u,d)=>u in p?ee(p,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):p[u]=d,L=(p,u)=>{for(var d in u||(u={}))oe.call(u,d)&&j(p,d,u[d]);if(T)for(var d of T(u))le.call(u,d)&&j(p,d,u[d]);return p},W=(p,u)=>te(p,se(u));import{F as re,f as S,c as h,U as ne,a as l,o as r,b as e,i as ae,w as ie,H as _,O as k,n as m,e as g,t as n,L as b,aZ as w,ag as ue,aY as R}from"./vendor-DHvq1guq.js";import{u as de}from"./onboarding-B_89MwKn.js";import{u as ce}from"./useToast-BVpZJNhB.js";import"./frappe-ui-CIvmTRjx.js";const ve={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},pe={class:"bg-white shadow-sm"},ge={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},me={class:"flex items-center justify-between"},be={class:"flex items-center gap-4"},ye={class:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},fe={class:"mb-8"},xe={class:"flex items-center justify-between"},he={class:"flex items-center"},_e={key:0},ke={key:1},we={class:"ml-3"},Ae={class:"bg-white rounded-xl shadow-lg p-8"},Ce={key:0},Se={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},Re=["onClick"],Fe={class:"flex items-center gap-3"},Me={class:"text-3xl"},Ve={class:"flex-1"},De={class:"font-semibold text-gray-900"},Ue={class:"text-sm text-gray-600"},Be={key:0,class:"text-blue-600"},Ne={key:0,class:"mt-6 p-4 bg-gray-50 rounded-lg"},Te={class:"block text-sm font-medium text-gray-700 mb-2"},je={value:""},Le=["value"],We={class:"text-xs text-gray-500 mt-2"},Oe={key:1},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},Ee=["onClick"],Pe={class:"flex items-center gap-3"},Ie={class:"text-3xl"},He={class:"flex-1"},$e={class:"font-semibold text-gray-900"},qe={class:"text-sm text-gray-600"},Qe={key:0,class:"text-green-600"},Ye={key:0,class:"mt-6 p-4 bg-gray-50 rounded-lg"},Ze={class:"block text-sm font-medium text-gray-700 mb-2"},Ge={value:""},Je=["value"],Ke={key:2},Xe={class:"text-gray-600 mb-6"},et={class:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"},tt={class:"flex items-center justify-between text-sm"},st={class:"font-medium text-blue-900"},ot={class:"font-medium text-blue-900"},lt={class:"space-y-4"},rt={class:"block text-xs font-medium text-gray-600 mb-1"},nt=["onUpdate:modelValue"],at=["value"],it={class:"block text-xs font-medium text-gray-600 mb-1"},ut=["onUpdate:modelValue"],dt=["value"],ct={key:3},vt={class:"space-y-6"},pt={class:"space-y-3"},gt={key:0,class:"p-4 bg-gray-50 rounded-lg"},mt={class:"mt-8 flex justify-between"},bt={key:1},yt=["disabled"],ft=["disabled"],At={__name:"WorkflowBuilder",setup(p){const u=re(),d=de(),O=ce(),y=S([{id:"source",title:"Source"},{id:"destination",title:"Destination"},{id:"mapping",title:"Field Mapping"},{id:"sync",title:"Sync Settings"}]),f=S("source"),c=h(()=>y.value.findIndex(a=>a.id===f.value)),s=S({name:"",sourceApp:null,sourceResource:null,destinationApp:null,destinationResource:null,fieldMappings:[{sourceField:"",destinationField:""}],trigger:"manual",schedule:"hourly"}),F=h(()=>d.connectedApps.map(a=>d.availableApps.find(t=>t.id===a)).filter(Boolean).map(a=>W(L({},a),{resourceType:z(a.id)})));function z(a){return{google_sheets:"Spreadsheet",airtable:"Base",notion:"Database",salesforce:"Object",hubspot:"Object",xero:"Organization"}[a]||"Resource"}const E=h(()=>F.value.filter(a=>{var t;return a.id!==((t=s.value.sourceApp)==null?void 0:t.id)})),P=h(()=>s.value.sourceApp?s.value.sourceApp.id==="google_sheets"?[{id:"1",name:"Customer Database 2025"},{id:"2",name:"Sales Leads Q1"},{id:"3",name:"Invoice Tracker"}]:[]:[]),I=h(()=>s.value.destinationApp?s.value.destinationApp.id==="salesforce"?[{id:"1",name:"Leads"},{id:"2",name:"Contacts"},{id:"3",name:"Opportunities"}]:[]:[]),H=h(()=>s.value.sourceResource?["Full Name","Email Address","Phone Number","Company","Status","Notes"]:[]),$=h(()=>s.value.destinationResource?["First Name","Last Name","Email","Phone","Company Name","Lead Status","Description"]:[]);function q(a){return a<c.value?"bg-blue-600 text-white":a===c.value?"bg-blue-100 text-blue-600 ring-2 ring-blue-600":"bg-gray-200 text-gray-600"}function Q(a){s.value.sourceApp=a,s.value.sourceResource=null}function Y(a){s.value.destinationApp=a,s.value.destinationResource=null}function Z(){s.value.fieldMappings.push({sourceField:"",destinationField:""})}const C=h(()=>{switch(f.value){case"source":return s.value.sourceApp&&s.value.sourceResource;case"destination":return s.value.destinationApp&&s.value.destinationResource;case"mapping":return s.value.fieldMappings.some(a=>a.sourceField&&a.destinationField);case"sync":return s.value.name&&s.value.trigger;default:return!1}});function G(){C.value&&c.value<y.value.length-1&&(f.value=y.value[c.value+1].id)}function J(){c.value>0&&(f.value=y.value[c.value-1].id)}function K(){console.log("Creating workflow:",s.value),O.success("Workflow created successfully! üéâ"),u.push({name:"Dashboard"})}return(a,t)=>{var M,V,D,U,B,N;const X=ne("router-link");return r(),l("div",ve,[e("header",pe,[e("div",ge,[e("div",me,[e("div",be,[ae(X,{to:"/dashboard",class:"text-gray-600 hover:text-gray-900"},{default:ie(()=>[...t[7]||(t[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),t[8]||(t[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Create Workflow"),e("p",{class:"text-sm text-gray-600"},"Connect your data sources and define how they sync")],-1))])])])]),e("main",ye,[e("div",fe,[e("div",xe,[(r(!0),l(_,null,k(y.value,(o,i)=>(r(),l("div",{key:o.id,class:m(["flex items-center",{"flex-1":i<y.value.length-1}])},[e("div",he,[e("div",{class:m(["w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",q(i)])},[i<c.value?(r(),l("span",_e,"‚úì")):(r(),l("span",ke,n(i+1),1))],2),e("div",we,[e("div",{class:m(["text-sm font-medium",i<=c.value?"text-gray-900":"text-gray-500"])},n(o.title),3)])]),i<y.value.length-1?(r(),l("div",{key:0,class:m(["flex-1 h-0.5 mx-4",i<c.value?"bg-blue-600":"bg-gray-300"])},null,2)):g("",!0)],2))),128))])]),e("div",Ae,[f.value==="source"?(r(),l("div",Ce,[t[10]||(t[10]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Data Source",-1)),t[11]||(t[11]=e("p",{class:"text-gray-600 mb-6"},"Choose which app and resource you want to pull data from",-1)),e("div",Se,[(r(!0),l(_,null,k(F.value,o=>{var i,x;return r(),l("div",{key:o.id,onClick:A=>Q(o),class:m(["border-2 rounded-lg p-4 cursor-pointer transition-all",((i=s.value.sourceApp)==null?void 0:i.id)===o.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",Fe,[e("div",Me,n(o.icon),1),e("div",Ve,[e("div",De,n(o.name),1),e("div",Ue,n(o.description),1)]),((x=s.value.sourceApp)==null?void 0:x.id)===o.id?(r(),l("div",Be,[...t[9]||(t[9]=[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):g("",!0)])],10,Re)}),128))]),s.value.sourceApp?(r(),l("div",Ne,[e("label",Te," Select "+n(s.value.sourceApp.resourceType||"Resource"),1),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.sourceResource=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[e("option",je,"-- Choose "+n(s.value.sourceApp.resourceType||"resource")+" --",1),(r(!0),l(_,null,k(P.value,o=>(r(),l("option",{key:o.id,value:o},n(o.name),9,Le))),128))],512),[[w,s.value.sourceResource]]),e("p",We," We'll fetch this list from your "+n(s.value.sourceApp.name)+" account ",1)])):g("",!0)])):g("",!0),f.value==="destination"?(r(),l("div",Oe,[t[13]||(t[13]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Select Destination",-1)),t[14]||(t[14]=e("p",{class:"text-gray-600 mb-6"},"Choose where you want to send the data",-1)),e("div",ze,[(r(!0),l(_,null,k(E.value,o=>{var i,x;return r(),l("div",{key:o.id,onClick:A=>Y(o),class:m(["border-2 rounded-lg p-4 cursor-pointer transition-all",((i=s.value.destinationApp)==null?void 0:i.id)===o.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"])},[e("div",Pe,[e("div",Ie,n(o.icon),1),e("div",He,[e("div",$e,n(o.name),1),e("div",qe,n(o.description),1)]),((x=s.value.destinationApp)==null?void 0:x.id)===o.id?(r(),l("div",Qe,[...t[12]||(t[12]=[e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):g("",!0)])],10,Ee)}),128))]),s.value.destinationApp?(r(),l("div",Ye,[e("label",Ze," Select "+n(s.value.destinationApp.resourceType||"Resource"),1),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.destinationResource=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"},[e("option",Ge,"-- Choose "+n(s.value.destinationApp.resourceType||"resource")+" --",1),(r(!0),l(_,null,k(I.value,o=>(r(),l("option",{key:o.id,value:o},n(o.name),9,Je))),128))],512),[[w,s.value.destinationResource]])])):g("",!0)])):g("",!0),f.value==="mapping"?(r(),l("div",Ke,[t[18]||(t[18]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Map Fields",-1)),e("p",Xe,"Connect fields from "+n((M=s.value.sourceApp)==null?void 0:M.name)+" to "+n((V=s.value.destinationApp)==null?void 0:V.name),1),e("div",et,[e("div",tt,[e("div",st,n((D=s.value.sourceResource)==null?void 0:D.name)+" ("+n((U=s.value.sourceApp)==null?void 0:U.name)+") ",1),t[15]||(t[15]=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})],-1)),e("div",ot,n((B=s.value.destinationResource)==null?void 0:B.name)+" ("+n((N=s.value.destinationApp)==null?void 0:N.name)+") ",1)])]),e("div",lt,[(r(!0),l(_,null,k(s.value.fieldMappings,(o,i)=>{var x,A;return r(),l("div",{key:i,class:"grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg"},[e("div",null,[e("label",rt," From "+n((x=s.value.sourceApp)==null?void 0:x.name),1),b(e("select",{"onUpdate:modelValue":v=>o.sourceField=v,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[t[16]||(t[16]=e("option",{value:""},"-- Select field --",-1)),(r(!0),l(_,null,k(H.value,v=>(r(),l("option",{key:v,value:v},n(v),9,at))),128))],8,nt),[[w,o.sourceField]])]),e("div",null,[e("label",it," To "+n((A=s.value.destinationApp)==null?void 0:A.name),1),b(e("select",{"onUpdate:modelValue":v=>o.destinationField=v,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"},[t[17]||(t[17]=e("option",{value:""},"-- Select field --",-1)),(r(!0),l(_,null,k($.value,v=>(r(),l("option",{key:v,value:v},n(v),9,dt))),128))],8,ut),[[w,o.destinationField]])])])}),128)),e("button",{onClick:Z,class:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600 transition-all"}," + Add Field Mapping ")])])):g("",!0),f.value==="sync"?(r(),l("div",ct,[t[27]||(t[27]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Configure Sync",-1)),t[28]||(t[28]=e("p",{class:"text-gray-600 mb-6"},"Set up when and how often data should sync",-1)),e("div",vt,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Workflow Name ",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.name=o),type:"text",placeholder:"e.g., Sync Leads from Sheets to CRM",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[ue,s.value.name]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," When should this sync run? ",-1)),e("div",pt,[e("label",{class:m(["flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all",s.value.trigger==="manual"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.value.trigger=o),type:"radio",value:"manual",class:"mr-3"},null,512),[[R,s.value.trigger]]),t[20]||(t[20]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Manual"),e("div",{class:"text-sm text-gray-600"},"Run this workflow manually whenever you want")],-1))],2),e("label",{class:m(["flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all",s.value.trigger==="schedule"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[b(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.value.trigger=o),type:"radio",value:"schedule",class:"mr-3"},null,512),[[R,s.value.trigger]]),t[21]||(t[21]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Schedule"),e("div",{class:"text-sm text-gray-600"},"Run automatically on a schedule")],-1))],2),e("label",{class:m(["flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all",s.value.trigger==="realtime"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.value.trigger=o),type:"radio",value:"realtime",class:"mr-3"},null,512),[[R,s.value.trigger]]),t[22]||(t[22]=e("div",{class:"flex-1"},[e("div",{class:"font-medium text-gray-900"},"Real-time (Webhook)"),e("div",{class:"text-sm text-gray-600"},"Sync immediately when data changes")],-1)),t[23]||(t[23]=e("span",{class:"px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full"},"Pro",-1))],2)])]),s.value.trigger==="schedule"?(r(),l("div",gt,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sync Frequency ",-1)),b(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.value.schedule=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},[...t[25]||(t[25]=[e("option",{value:"15min"},"Every 15 minutes",-1),e("option",{value:"hourly"},"Every hour",-1),e("option",{value:"daily"},"Once a day",-1),e("option",{value:"weekly"},"Once a week",-1)])],512),[[w,s.value.schedule]])])):g("",!0)])])):g("",!0),e("div",mt,[c.value>0?(r(),l("button",{key:0,onClick:J,class:"px-6 py-2 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-all"}," ‚Üê Back ")):(r(),l("div",bt)),c.value<y.value.length-1?(r(),l("button",{key:2,onClick:G,disabled:!C.value,class:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all"}," Continue ‚Üí ",8,yt)):(r(),l("button",{key:3,onClick:K,disabled:!C.value,class:"px-6 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all"}," ‚úì Create Workflow ",8,ft))])])])])}}};export{At as default};
//# sourceMappingURL=WorkflowBuilder-CuWezub1.js.map
