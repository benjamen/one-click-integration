var Me=Object.defineProperty;var Pe=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var qe=(h,g,r)=>g in h?Me(h,g,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[g]=r,K=(h,g)=>{for(var r in g||(g={}))Be.call(g,r)&&qe(h,r,g[r]);if(Pe)for(var r of Pe(g))Ue.call(g,r)&&qe(h,r,g[r]);return h};var ee=(h,g,r)=>new Promise((k,f)=>{var c=m=>{try{y(r.next(m))}catch(x){f(x)}},v=m=>{try{y(r.throw(m))}catch(x){f(x)}},y=m=>m.done?k(m.value):Promise.resolve(m.value).then(c,v);y((r=r.apply(h,g)).next())});import{A as Re,_ as ne,k as b,m as le,B as je,l as Q,C as Z,c as l,o,a as e,v as se,e as n,t as u,F as O,f as I,j as p,q as $,n as oe,b as M,x as U,y as ae,D as Ge,E as Oe,u as Ne,r as De,d as B,w as te,p as Ie,s as Le}from"./index-BcEbQX5m.js";import{c as Ee,u as Te}from"./onboarding-DatRQ1TY.js";import{_ as Fe,a as ze}from"./SecondaryButton-ChcMVtau.js";import{_ as Ve}from"./PrimaryButton-B8S802W7.js";function We(){const h=Re();return{success:(g,r={})=>{h.success(g,K({timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1},r))},error:(g,r={})=>{h.error(g,K({timeout:7e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1},r))},warning:(g,r={})=>{h.warning(g,K({timeout:6e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1},r))},info:(g,r={})=>{h.info(g,K({timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1},r))},clear:()=>{h.clear()}}}const He={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},Ye={class:"modal-content"},Xe={class:"modal-header bg-gradient-primary"},Je={class:"w-100"},Ke={"aria-label":"breadcrumb",class:"mb-2"},Qe={class:"breadcrumb bg-transparent mb-0 pb-0"},Ze={class:"breadcrumb-item"},et={class:"breadcrumb-item active text-white","aria-current":"page"},tt={class:"modal-body p-4"},st={class:"row mb-4"},at={class:"col-12"},lt={class:"d-flex justify-content-between align-items-center"},ot={key:0,class:"fas fa-check"},nt={key:1},it={class:"d-block text-muted"},rt={class:"step-content"},dt={key:0,class:"step"},ut={class:"text-center text-muted mb-4"},ct={class:"row g-4"},vt={key:0,class:"col-md-4"},mt={class:"card-body text-center p-4"},bt={class:"card-title font-weight-bold"},pt={class:"card-text text-muted small"},gt={class:"mt-3"},ft={class:"badge bg-success me-1"},ht={class:"text-start"},yt={class:"small text-muted mb-2",style:{"font-size":"0.85rem"}},xt={class:"small text-muted",style:{"font-size":"0.85rem"}},kt={key:1,class:"col-md-4"},wt={class:"card-body text-center p-4 position-relative"},Ct={key:0,class:"position-absolute top-0 end-0 p-2"},_t={class:"badge bg-warning"},$t={class:"card-title font-weight-bold"},St={class:"card-text text-muted small"},At={class:"mt-3"},Pt={key:0,class:"badge bg-success me-1"},qt={class:"badge bg-primary"},jt={key:1,class:"alert alert-warning small mb-2"},Ot={class:"text-start"},It={class:"small text-muted mb-2",style:{"font-size":"0.85rem"}},zt={key:2,class:"mt-3"},Gt={class:"card-body text-center p-4"},Mt={class:"card-title font-weight-bold"},Bt={class:"card-text text-muted small"},Ut={class:"mt-3"},Rt={class:"badge bg-info"},Nt={class:"text-start"},Dt={class:"small text-muted mb-2",style:{"font-size":"0.85rem"}},Lt={class:"text-center mt-4"},Et=["disabled"],Tt={key:1,class:"step"},Ft={key:2,class:"step"},Vt={key:3,class:"step"},Wt={key:4,class:"step"},Ht={class:"setup-steps"},Yt={class:"mb-3"},Xt={class:"input-group mt-2"},Jt=["value"],Kt={key:5,class:"step"},Qt={class:"mb-3"},Zt={class:"mb-3"},es={class:"input-group"},ts=["type"],ss=["aria-label"],as={key:0,class:"alert alert-success"},ls={key:6,class:"step text-center"},os={class:"alert alert-info"},ns={class:"modal-footer"},is=["disabled"],rs={key:0},ds={key:1},us={__name:"OAuthSetupWizard",props:{show:{type:Boolean,default:!1},provider:{type:String,required:!0}},emits:["close","success","launchAIWizard"],setup(h,{emit:g}){const r=h,k=g,f=We(),c=b(0),v=b("default"),y=b(""),m=b(""),x=b(!1),C=b(!1),z=b(!0),d=b(null),A=b(null);b(null),le(()=>ee(this,null,function*(){try{z.value=!0;const a=yield Ee("lodgeick.api.oauth_tiers.get_tier_config",{provider:r.provider});d.value=a,P()}catch(a){A.value=`Failed to load setup options: ${a.message}`,f.error(`Failed to load setup options: ${a.message||"Please try again"}`)}finally{z.value=!1}}));function S(){const a={provider:r.provider,setupMethod:v.value,currentStep:c.value,clientId:y.value,clientSecret:m.value,timestamp:Date.now()};localStorage.setItem(`oauth_progress_${r.provider}`,JSON.stringify(a))}function P(){const a=localStorage.getItem(`oauth_progress_${r.provider}`);if(a)try{const s=JSON.parse(a);(Date.now()-s.timestamp)/(1e3*60*60)<24?(v.value=s.setupMethod||"default",c.value=s.currentStep||0,y.value=s.clientId||"",m.value=s.clientSecret||"",f.info("Resumed your previous OAuth setup",{timeout:4e3})):q()}catch(s){console.error("Failed to load progress:",s)}}function q(){localStorage.removeItem(`oauth_progress_${r.provider}`)}je([v,c,y,m],()=>{c.value>0&&c.value<5&&S()},{deep:!0}),je(()=>r.show,a=>{a&&!d.value&&le()});const G=Q(()=>({google:"Google (Gmail, Sheets, Drive)",xero:"Xero",slack:"Slack",microsoft:"Microsoft 365",hubspot:"HubSpot",salesforce:"Salesforce",stripe:"Stripe"})[r.provider]||r.provider),F=Q(()=>{var s,_;if(!v.value||!d.value)return"";const a=(_=(s=d.value)==null?void 0:s.tiers)==null?void 0:_[v.value];return(a==null?void 0:a.label)||v.value}),L=Q(()=>window.location.origin+"/oauth/callback"),R=[{title:"Create Project"},{title:"Enable APIs"},{title:"Consent Screen"},{title:"Create Credentials"},{title:"Configure"},{title:"Complete"}],E=Z({url:"lodgeick.api.oauth.save_user_oauth_setup",makeParams(a){return a!=null&&a.use_default?{provider:r.provider,tier:"default",use_default:!0}:{provider:r.provider,tier:v.value||"manual",client_id:y.value,client_secret:m.value}},onSuccess(a){C.value=!1,a.ready_to_connect&&(c.value=5,f.success("OAuth credentials saved successfully! ðŸŽ‰")),k("success",{provider:r.provider,tier:v.value,ready_to_connect:a.ready_to_connect})},onError(a){C.value=!1,f.error(`Failed to save credentials: ${a.message||a}`,{timeout:7e3})}});function V(){v.value==="default"?(C.value=!0,E.submit({provider:r.provider,tier:"default",use_default:!0})):v.value==="ai"?(k("launchAIWizard"),i()):c.value=1}function W(){c.value<R.length-1&&c.value++}function H(){c.value>0&&c.value--}function T(){if(!y.value||!m.value){f.warning("Please enter both Client ID and Client Secret");return}C.value=!0,E.submit()}function N(a){navigator.clipboard.writeText(a).then(()=>{f.success("Copied to clipboard!");const _=event.target.closest("button").querySelector("i");_.className="fas fa-check",setTimeout(()=>{_.className="fas fa-copy"},2e3)}).catch(()=>{f.error("Failed to copy to clipboard")})}function i(){c.value===5&&q(),c.value=0,v.value="default",y.value="",m.value="",x.value=!1,k("close")}function t(){var s,_,j;const a=((j=(_=(s=d.value)==null?void 0:s.tiers)==null?void 0:_.ai)==null?void 0:j.upgrade_tier)||"Pro";f.info(`Upgrade to ${a} to unlock AI-powered OAuth setup! Includes: Unlimited API quota, AI-powered setup (2 min), Access to all APIs, Priority support.`,{timeout:1e4})}return(a,s)=>{var _,j,Y,X,J,ie,re,de,ue,ce,ve,me,be,pe,ge,fe,he,ye,xe,ke,we,Ce,_e,$e,Se,Ae;return o(),l("div",{class:$(["modal fade",{show:h.show,"d-block":h.show}]),tabindex:"-1",style:oe({backgroundColor:h.show?"rgba(0,0,0,0.5)":""}),onClick:se(i,["self"])},[e("div",He,[e("div",Ye,[e("div",Xe,[e("div",Je,[e("nav",Ke,[e("ol",Qe,[e("li",Ze,[e("a",{href:"#",class:"text-white text-decoration-none opacity-75 hover-opacity-100",onClick:se(i,["prevent"])},[...s[7]||(s[7]=[e("i",{class:"fas fa-home me-1"},null,-1),n(" Home ",-1)])])]),s[8]||(s[8]=e("li",{class:"breadcrumb-item"},[e("span",{class:"text-white opacity-75"},"Integrations")],-1)),e("li",et,u(G.value)+" Setup ",1)])]),s[9]||(s[9]=e("h5",{class:"modal-title text-white font-weight-bold mb-0"},[e("i",{class:"fas fa-magic me-2"}),n(" OAuth Setup Wizard ")],-1))]),e("button",{type:"button",class:"btn-close btn-close-white","aria-label":"Close OAuth setup wizard",onClick:i})]),e("div",tt,[e("div",st,[e("div",at,[e("div",lt,[(o(),l(O,null,I(R,(w,D)=>e("div",{key:D,class:"flex-fill text-center position-relative"},[e("div",{class:$(["step-circle mx-auto mb-2",{active:c.value===D,completed:c.value>D}])},[c.value>D?(o(),l("i",ot)):(o(),l("span",nt,u(D+1),1))],2),e("small",it,u(w.title),1),D<R.length-1?(o(),l("div",{key:0,class:$(["step-line",{completed:c.value>D}])},null,2)):p("",!0)])),64))])])]),e("div",rt,[c.value===0?(o(),l("div",dt,[s[26]||(s[26]=e("h5",{class:"font-weight-bold mb-3 text-center"},[e("i",{class:"fas fa-route text-primary me-2"}),n(" Choose Your Setup Method ")],-1)),e("p",ut," Select how you'd like to set up your "+u(G.value)+" integration ",1),e("div",ct,[(Y=(j=(_=d.value)==null?void 0:_.tiers)==null?void 0:j.default)!=null&&Y.enabled?(o(),l("div",vt,[e("div",{class:$(["card h-100 setup-option",{"border-primary selected":v.value==="default"}]),onClick:s[0]||(s[0]=w=>v.value="default"),style:{cursor:"pointer"}},[e("div",mt,[s[13]||(s[13]=e("div",{class:"mb-3"},[e("i",{class:"fas fa-bolt fa-3x text-warning"})],-1)),e("h5",bt,u(d.value.tiers.default.icon)+" "+u(d.value.tiers.default.label),1),e("p",pt,u(d.value.tiers.default.description),1),e("div",gt,[e("span",ft,u(d.value.tiers.default.setup_time),1),s[10]||(s[10]=e("span",{class:"badge bg-info"},"No Setup",-1))]),s[14]||(s[14]=e("hr",{class:"my-3"},null,-1)),e("div",ht,[s[11]||(s[11]=e("div",{class:"small text-success mb-2"},[e("i",{class:"fas fa-check-circle me-1"}),n(),e("strong",null,"Pros:")],-1)),e("ul",yt,[(o(!0),l(O,null,I(d.value.tiers.default.advantages.slice(0,3),w=>(o(),l("li",{key:w},u(w),1))),128))]),s[12]||(s[12]=e("div",{class:"small text-warning mb-2"},[e("i",{class:"fas fa-exclamation-circle me-1"}),n(),e("strong",null,"Limits:")],-1)),e("ul",xt,[(o(!0),l(O,null,I(d.value.tiers.default.limitations.slice(0,2),w=>(o(),l("li",{key:w},u(w),1))),128))])])])],2)])):p("",!0),(J=(X=d.value)==null?void 0:X.tiers)!=null&&J.ai?(o(),l("div",kt,[e("div",{class:$(["card h-100 setup-option",{"border-primary selected":v.value==="ai","locked-tier":d.value.tiers.ai.upgrade_required}]),onClick:s[1]||(s[1]=w=>d.value.tiers.ai.enabled?v.value="ai":null),style:oe({cursor:d.value.tiers.ai.enabled?"pointer":"not-allowed",opacity:d.value.tiers.ai.enabled?1:.7})},[e("div",wt,[d.value.tiers.ai.upgrade_required?(o(),l("div",Ct,[e("span",_t,[s[15]||(s[15]=e("i",{class:"fas fa-lock me-1"},null,-1)),n(" "+u(d.value.tiers.ai.upgrade_tier)+" Only ",1)])])):p("",!0),s[19]||(s[19]=e("div",{class:"mb-3"},[e("i",{class:"fas fa-robot fa-3x text-primary"})],-1)),e("h5",$t,u(d.value.tiers.ai.icon)+" "+u(d.value.tiers.ai.label),1),e("p",St,u(d.value.tiers.ai.description),1),e("div",At,[d.value.tiers.ai.enabled?(o(),l("span",Pt,"Recommended")):p("",!0),e("span",qt,u(d.value.tiers.ai.setup_time),1)]),s[20]||(s[20]=e("hr",{class:"my-3"},null,-1)),d.value.tiers.ai.upgrade_required?(o(),l("div",jt,[s[16]||(s[16]=e("i",{class:"fas fa-star me-1"},null,-1)),n(" "+u(d.value.tiers.ai.upgrade_message),1)])):p("",!0),e("div",Ot,[s[17]||(s[17]=e("div",{class:"small text-success mb-2"},[e("i",{class:"fas fa-check-circle me-1"}),n(),e("strong",null,"Pros:")],-1)),e("ul",It,[(o(!0),l(O,null,I(d.value.tiers.ai.advantages.slice(0,3),w=>(o(),l("li",{key:w},u(w),1))),128))])]),d.value.tiers.ai.upgrade_required?(o(),l("div",zt,[e("button",{class:"btn btn-warning btn-sm w-100",onClick:se(t,["stop"])},[s[18]||(s[18]=e("i",{class:"fas fa-arrow-up me-1"},null,-1)),n(" Upgrade to "+u(d.value.tiers.ai.upgrade_tier),1)])])):p("",!0)])],6)])):p("",!0),(de=(re=(ie=d.value)==null?void 0:ie.tiers)==null?void 0:re.manual)!=null&&de.enabled?(o(),l("div",{key:2,class:$((ve=(ce=(ue=d.value)==null?void 0:ue.tiers)==null?void 0:ce.ai)!=null&&ve.enabled?"col-md-4":"col-md-6")},[e("div",{class:$(["card h-100 setup-option",{"border-primary selected":v.value==="manual"}]),onClick:s[2]||(s[2]=w=>v.value="manual"),style:{cursor:"pointer"}},[e("div",Gt,[s[23]||(s[23]=e("div",{class:"mb-3"},[e("i",{class:"fas fa-tools fa-3x text-secondary"})],-1)),e("h5",Mt,u(((pe=(be=(me=d.value)==null?void 0:me.tiers)==null?void 0:be.manual)==null?void 0:pe.icon)||"ðŸ”§")+" "+u(((he=(fe=(ge=d.value)==null?void 0:ge.tiers)==null?void 0:fe.manual)==null?void 0:he.label)||"Manual Setup"),1),e("p",Bt,u(((ke=(xe=(ye=d.value)==null?void 0:ye.tiers)==null?void 0:xe.manual)==null?void 0:ke.description)||"Step-by-step setup"),1),e("div",Ut,[s[21]||(s[21]=e("span",{class:"badge bg-secondary"},"Advanced",-1)),e("span",Rt,u(((_e=(Ce=(we=d.value)==null?void 0:we.tiers)==null?void 0:Ce.manual)==null?void 0:_e.setup_time)||"~10 min"),1)]),s[24]||(s[24]=e("hr",{class:"my-3"},null,-1)),e("div",Nt,[s[22]||(s[22]=e("div",{class:"small text-success mb-2"},[e("i",{class:"fas fa-check-circle me-1"}),n(),e("strong",null,"Pros:")],-1)),e("ul",Dt,[(o(!0),l(O,null,I((((Ae=(Se=($e=d.value)==null?void 0:$e.tiers)==null?void 0:Se.manual)==null?void 0:Ae.advantages)||[]).slice(0,3),w=>(o(),l("li",{key:w},u(w),1))),128))])])])],2)],2)):p("",!0)]),e("div",Lt,[e("button",{class:"btn btn-primary btn-lg",onClick:V,disabled:!v.value},[s[25]||(s[25]=e("i",{class:"fas fa-arrow-right me-2"},null,-1)),n(" Continue with "+u(F.value),1)],8,Et)])])):p("",!0),c.value===0&&h.provider!=="google"?(o(),l("div",Tt,[...s[27]||(s[27]=[M('<h5 class="font-weight-bold mb-3" data-v-2431b805><i class="fab fa-google text-primary me-2" data-v-2431b805></i> Create Google Cloud Project </h5><div class="alert alert-info" data-v-2431b805><i class="fas fa-info-circle me-2" data-v-2431b805></i> You&#39;ll need a Google account to create a Cloud project. </div><ol class="setup-steps" data-v-2431b805><li class="mb-3" data-v-2431b805> Go to <a href="https://console.cloud.google.com" target="_blank" class="text-primary" data-v-2431b805><strong data-v-2431b805>Google Cloud Console</strong><i class="fas fa-external-link-alt ms-1 small" data-v-2431b805></i></a></li><li class="mb-3" data-v-2431b805> Click the project dropdown at the top <br data-v-2431b805><small class="text-muted" data-v-2431b805>It usually says &quot;Select a project&quot; or shows your current project</small></li><li class="mb-3" data-v-2431b805> Click <strong data-v-2431b805>&quot;New Project&quot;</strong> in the top right </li><li class="mb-3" data-v-2431b805> Name your project (e.g., &quot;Lodgeick Integration&quot;) </li><li class="mb-3" data-v-2431b805> Click <strong data-v-2431b805>&quot;Create&quot;</strong> and wait for the project to be created </li></ol><div class="text-center mt-4" data-v-2431b805><img src="https://cloud.google.com/static/images/social-icon-google-cloud-1200-630.png" alt="Google Cloud" class="img-fluid rounded shadow" style="max-height:200px;" data-v-2431b805></div>',4)])])):p("",!0),c.value===1?(o(),l("div",Ft,[...s[28]||(s[28]=[M('<h5 class="font-weight-bold mb-3" data-v-2431b805><i class="fas fa-toggle-on text-success me-2" data-v-2431b805></i> Enable Required APIs </h5><div class="alert alert-warning" data-v-2431b805><i class="fas fa-exclamation-triangle me-2" data-v-2431b805></i> Make sure your new project is selected in the project dropdown! </div><ol class="setup-steps" data-v-2431b805><li class="mb-3" data-v-2431b805> Go to <a href="https://console.cloud.google.com/apis/library" target="_blank" class="text-primary" data-v-2431b805><strong data-v-2431b805>APIs &amp; Services &gt; Library</strong><i class="fas fa-external-link-alt ms-1 small" data-v-2431b805></i></a></li><li class="mb-3" data-v-2431b805> Search for and enable these APIs: <div class="mt-2" data-v-2431b805><span class="badge bg-gradient-primary me-2 mb-2" data-v-2431b805>Gmail API</span><span class="badge bg-gradient-info me-2 mb-2" data-v-2431b805>Google Sheets API</span><span class="badge bg-gradient-success me-2 mb-2" data-v-2431b805>Google Drive API</span></div></li><li class="mb-3" data-v-2431b805> For each API: <ul class="mt-2" data-v-2431b805><li data-v-2431b805>Click on the API name</li><li data-v-2431b805>Click the blue <strong data-v-2431b805>&quot;Enable&quot;</strong> button</li><li data-v-2431b805>Wait for it to activate (takes a few seconds)</li></ul></li></ol>',3)])])):p("",!0),c.value===2?(o(),l("div",Vt,[...s[29]||(s[29]=[M('<h5 class="font-weight-bold mb-3" data-v-2431b805><i class="fas fa-shield-alt text-warning me-2" data-v-2431b805></i> Configure OAuth Consent Screen </h5><ol class="setup-steps" data-v-2431b805><li class="mb-3" data-v-2431b805> Go to <a href="https://console.cloud.google.com/apis/credentials/consent" target="_blank" class="text-primary" data-v-2431b805><strong data-v-2431b805>APIs &amp; Services &gt; OAuth consent screen</strong><i class="fas fa-external-link-alt ms-1 small" data-v-2431b805></i></a></li><li class="mb-3" data-v-2431b805> Select <strong data-v-2431b805>&quot;External&quot;</strong> user type <br data-v-2431b805><small class="text-muted" data-v-2431b805>This allows you to use any Google account for testing</small></li><li class="mb-3" data-v-2431b805> Click <strong data-v-2431b805>&quot;Create&quot;</strong></li><li class="mb-3" data-v-2431b805> Fill in the required fields: <div class="card mt-2 bg-light" data-v-2431b805><div class="card-body" data-v-2431b805><div class="mb-2" data-v-2431b805><strong data-v-2431b805>App name:</strong> Lodgeick</div><div class="mb-2" data-v-2431b805><strong data-v-2431b805>User support email:</strong> Your email</div><div class="mb-2" data-v-2431b805><strong data-v-2431b805>Developer contact:</strong> Your email</div></div></div></li><li class="mb-3" data-v-2431b805> Click <strong data-v-2431b805>&quot;Save and Continue&quot;</strong></li><li class="mb-3" data-v-2431b805> On the &quot;Scopes&quot; page, click <strong data-v-2431b805>&quot;Add or Remove Scopes&quot;</strong></li><li class="mb-3" data-v-2431b805> Search for and select these scopes: <div class="card mt-2 bg-light" data-v-2431b805><div class="card-body small" data-v-2431b805><div class="mb-1" data-v-2431b805><code data-v-2431b805>https://www.googleapis.com/auth/gmail.readonly</code></div><div class="mb-1" data-v-2431b805><code data-v-2431b805>https://www.googleapis.com/auth/gmail.send</code></div><div class="mb-1" data-v-2431b805><code data-v-2431b805>https://www.googleapis.com/auth/spreadsheets</code></div><div class="mb-1" data-v-2431b805><code data-v-2431b805>https://www.googleapis.com/auth/drive.file</code></div></div></div></li><li class="mb-3" data-v-2431b805> Click <strong data-v-2431b805>&quot;Update&quot;</strong> then <strong data-v-2431b805>&quot;Save and Continue&quot;</strong></li><li class="mb-3" data-v-2431b805> On the &quot;Test users&quot; page, click <strong data-v-2431b805>&quot;Add Users&quot;</strong></li><li class="mb-3" data-v-2431b805> Add your Gmail address (the one you&#39;ll test with) </li><li class="mb-3" data-v-2431b805> Click <strong data-v-2431b805>&quot;Save and Continue&quot;</strong> through the remaining steps </li></ol>',2)])])):p("",!0),c.value===3?(o(),l("div",Wt,[s[36]||(s[36]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-key text-danger me-2"}),n(" Create OAuth 2.0 Credentials ")],-1)),e("ol",Ht,[s[33]||(s[33]=M('<li class="mb-3" data-v-2431b805> Go to <a href="https://console.cloud.google.com/apis/credentials" target="_blank" class="text-primary" data-v-2431b805><strong data-v-2431b805>APIs &amp; Services &gt; Credentials</strong><i class="fas fa-external-link-alt ms-1 small" data-v-2431b805></i></a></li><li class="mb-3" data-v-2431b805> Click <strong data-v-2431b805>&quot;Create Credentials&quot;</strong> at the top </li><li class="mb-3" data-v-2431b805> Select <strong data-v-2431b805>&quot;OAuth 2.0 Client ID&quot;</strong></li><li class="mb-3" data-v-2431b805> Application type: <strong data-v-2431b805>&quot;Web application&quot;</strong></li><li class="mb-3" data-v-2431b805> Name: <strong data-v-2431b805>&quot;Lodgeick Local&quot;</strong> (or any name you prefer) </li><li class="mb-3" data-v-2431b805> Under <strong data-v-2431b805>&quot;Authorized redirect URIs&quot;</strong>, click <strong data-v-2431b805>&quot;Add URI&quot;</strong></li>',6)),e("li",Yt,[s[31]||(s[31]=n(" Add this exact URI: ",-1)),e("div",Xt,[e("input",{type:"text",class:"form-control",value:L.value,readonly:""},null,8,Jt),e("button",{class:"btn btn-outline-secondary","aria-label":"Copy redirect URI to clipboard",onClick:s[3]||(s[3]=w=>N(L.value))},[...s[30]||(s[30]=[e("i",{class:"fas fa-copy"},null,-1)])])]),s[32]||(s[32]=e("small",{class:"text-muted"},"Click the copy button to copy the URI",-1))]),s[34]||(s[34]=e("li",{class:"mb-3"},[n(" Click "),e("strong",null,'"Create"')],-1)),s[35]||(s[35]=e("li",{class:"mb-3"},[n(" A dialog will appear showing your credentials "),e("div",{class:"alert alert-warning mt-2"},[e("i",{class:"fas fa-exclamation-triangle me-2"}),e("strong",null,"Important:"),n(" Copy both the Client ID and Client Secret - you'll need them in the next step! ")])],-1))])])):p("",!0),c.value===4?(o(),l("div",Kt,[s[42]||(s[42]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-cog text-info me-2"}),n(" Configure Lodgeick ")],-1)),s[43]||(s[43]=e("p",null,"Enter your OAuth credentials from Google Cloud Console:",-1)),e("div",Qt,[s[37]||(s[37]=e("label",{class:"form-label font-weight-bold"},[n(" Client ID "),e("span",{class:"text-danger"},"*")],-1)),U(e("input",{"onUpdate:modelValue":s[4]||(s[4]=w=>y.value=w),type:"text",class:"form-control",placeholder:"1234567890-abc123def456.apps.googleusercontent.com"},null,512),[[ae,y.value]]),s[38]||(s[38]=e("small",{class:"text-muted"}," Ends with .apps.googleusercontent.com ",-1))]),e("div",Zt,[s[39]||(s[39]=e("label",{class:"form-label font-weight-bold"},[n(" Client Secret "),e("span",{class:"text-danger"},"*")],-1)),e("div",es,[U(e("input",{"onUpdate:modelValue":s[5]||(s[5]=w=>m.value=w),type:x.value?"text":"password",class:"form-control",placeholder:"GOCSPX-xxxxxxxxxxxxx"},null,8,ts),[[Ge,m.value]]),e("button",{class:"btn btn-outline-secondary","aria-label":x.value?"Hide client secret":"Show client secret",onClick:s[6]||(s[6]=w=>x.value=!x.value)},[e("i",{class:$(x.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,ss)]),s[40]||(s[40]=e("small",{class:"text-muted"}," Usually starts with GOCSPX- ",-1))]),y.value&&m.value?(o(),l("div",as,[...s[41]||(s[41]=[e("i",{class:"fas fa-check-circle me-2"},null,-1),n(' Credentials look good! Click "Save & Test Connection" to finish. ',-1)])])):p("",!0)])):p("",!0),c.value===5?(o(),l("div",ls,[s[45]||(s[45]=e("div",{class:"icon icon-shape bg-gradient-success shadow-success mx-auto mb-4",style:{width:"80px",height:"80px"}},[e("i",{class:"fas fa-check text-white",style:{"font-size":"2.5rem"}})],-1)),s[46]||(s[46]=e("h4",{class:"font-weight-bold mb-3"},"Setup Complete!",-1)),s[47]||(s[47]=e("p",{class:"text-muted mb-4"}," Your OAuth credentials have been configured successfully. ",-1)),e("div",os,[s[44]||(s[44]=e("i",{class:"fas fa-lightbulb me-2"},null,-1)),n(' You can now close this wizard and click "Connect App" to authenticate with '+u(G.value)+". ",1)])])):p("",!0)])]),e("div",ns,[c.value>0&&c.value<5?(o(),l("button",{key:0,type:"button",class:"btn btn-secondary",onClick:H},[...s[48]||(s[48]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),n(" Previous ",-1)])])):p("",!0),c.value<4?(o(),l("button",{key:1,type:"button",class:"btn btn-primary",onClick:W},[...s[49]||(s[49]=[n(" Next ",-1),e("i",{class:"fas fa-arrow-right ms-2"},null,-1)])])):p("",!0),c.value===4?(o(),l("button",{key:2,type:"button",class:"btn btn-success",onClick:T,disabled:!y.value||!m.value||C.value},[C.value?(o(),l("span",rs,[...s[50]||(s[50]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),n(" Saving... ",-1)])])):(o(),l("span",ds,[...s[51]||(s[51]=[e("i",{class:"fas fa-save me-2"},null,-1),n(" Save & Test Connection ",-1)])]))],8,is)):p("",!0),c.value===5?(o(),l("button",{key:3,type:"button",class:"btn btn-primary",onClick:i},[...s[52]||(s[52]=[e("i",{class:"fas fa-check me-2"},null,-1),n(" Done ",-1)])])):p("",!0)])])])],6)}}},cs=ne(us,[["__scopeId","data-v-2431b805"]]),vs={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},ms={class:"modal-content"},bs={class:"modal-body p-4"},ps={key:0,class:"step"},gs={class:"mb-3"},fs=["disabled"],hs={key:0,class:"alert alert-danger"},ys=["disabled"],xs={key:0},ks={key:1},ws={key:1,class:"step"},Cs={class:"alert alert-info"},_s={class:"list-group mb-4"},$s={class:"d-flex justify-content-between align-items-start"},Ss={class:"mb-1"},As={class:"mb-1 text-muted small"},Ps={class:"mt-2"},qs={class:"small"},js={key:0,class:"badge bg-warning text-dark"},Os={key:0,class:"alert alert-warning"},Is={class:"mb-0 mt-2"},zs={class:"card mt-4"},Gs={class:"card-body"},Ms={class:"row g-3"},Bs={class:"col-md-6"},Us={class:"form-check"},Rs={class:"col-md-6"},Ns={class:"form-check"},Ds={class:"d-flex gap-2 mt-4"},Ls=["disabled"],Es={key:1,class:"mt-3 p-3 border rounded bg-light"},Ts=["disabled"],Fs={key:0},Vs={key:1},Ws={key:2,class:"step"},Hs={class:"card mb-3"},Ys={class:"card-body"},Xs={class:"mt-2"},Js={class:"badge bg-primary me-2"},Ks={class:"small text-muted"},Qs={class:"card mb-3"},Zs={class:"card-body"},ea={class:"mt-2 p-2 bg-light rounded"},ta={class:"card mb-3"},sa={class:"card-body"},aa={class:"input-group mt-2"},la=["value"],oa={class:"d-flex gap-2 mt-4"},na={key:3,class:"step"},ia={class:"text-center mb-4"},ra={class:"text-muted"},da={class:"alert alert-success"},ua={key:0,class:"alert alert-warning"},ca={class:"mb-0 mt-2"},va={class:"card bg-light mt-4"},ma={class:"card-body"},ba={class:"small"},pa={class:"mb-2"},ga=["href"],fa={class:"mb-2"},ha={class:"bg-white px-2 py-1 rounded"},ya={key:4,class:"step"},xa={class:"mb-3"},ka={class:"mb-3"},wa={class:"input-group"},Ca=["type"],_a=["disabled"],$a={key:0},Sa={key:1},Aa={key:5,class:"step text-center"},Pa={__name:"GoogleAISetupWizard",props:{show:{type:Boolean,default:!1}},emits:["close","success"],setup(h,{emit:g}){const r=g,k=b("intent"),f=b("auto"),c=b(""),v=b(null),y=b(""),m=b(null),x=b(""),C=b(""),z=b(!1),d=b(!1),A=b(!1),S=b(!1),P=b(!1),q=b(null),G=Q(()=>window.location.origin+"/api/method/lodgeick.api.oauth.oauth_callback"),F=Z({url:"lodgeick.api.google_ai_setup.parse_intent",makeParams(){return{intent:c.value}},onSuccess(i){A.value=!1,i.success?(v.value=i,k.value="preview",q.value=null):q.value=i.error||"Failed to parse intent"},onError(i){A.value=!1,q.value=i.message||i}}),L=Z({url:"lodgeick.api.google_ai_setup.create_project",makeParams(){return{project_name:y.value,intent_data:JSON.stringify(v.value)}},onSuccess(i){S.value=!1,i.success?(m.value=i,k.value="project_created"):alert("Failed to create project: "+(i.error||"Unknown error"))},onError(i){S.value=!1,alert("Error creating project: "+(i.message||i))}}),R=Z({url:"lodgeick.api.google_ai_setup.setup_oauth_credentials",makeParams(){return{project_id:m.value.project_id,client_id:x.value,client_secret:C.value}},onSuccess(i){P.value=!1,i.success?(k.value="complete",r("success",{project:m.value,credentials:{client_id:x.value,n8n_credential_id:i.n8n_credential_id}})):alert("Failed to save credentials: "+(i.error||"Unknown error"))},onError(i){P.value=!1,alert("Error saving credentials: "+(i.message||i))}});function E(){A.value=!0,q.value=null,F.submit()}function V(){f.value==="auto"?d.value=!0:k.value="manual_instructions"}function W(){S.value=!0,L.submit()}function H(){P.value=!0,R.submit()}function T(i){navigator.clipboard.writeText(i).then(()=>{const a=event.target.closest("button").querySelector("i"),s=a.className;a.className="fas fa-check",setTimeout(()=>{a.className=s},2e3)})}function N(){k.value="intent",f.value="auto",c.value="",v.value=null,y.value="",m.value=null,x.value="",C.value="",z.value=!1,d.value=!1,q.value=null,r("close")}return(i,t)=>(o(),l("div",{class:$(["modal fade",{show:h.show,"d-block":h.show}]),tabindex:"-1",style:oe({backgroundColor:h.show?"rgba(0,0,0,0.5)":""}),onClick:se(N,["self"])},[e("div",vs,[e("div",ms,[e("div",{class:"modal-header bg-gradient-ai"},[t[13]||(t[13]=e("h5",{class:"modal-title text-white font-weight-bold"},[e("i",{class:"fas fa-robot me-2"}),n(" AI-Powered Google Integration Setup ")],-1)),e("button",{type:"button",class:"btn-close btn-close-white",onClick:N})]),e("div",bs,[k.value==="intent"?(o(),l("div",ps,[t[19]||(t[19]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-comment-dots text-primary me-2"}),n(" What do you want to integrate? ")],-1)),t[20]||(t[20]=e("p",{class:"text-muted"}," Describe in plain English what Google services you want to connect. Our AI will figure out which APIs and permissions you need. ",-1)),e("div",gs,[t[14]||(t[14]=e("label",{class:"form-label font-weight-bold"},"Your Integration Request",-1)),U(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),class:"form-control",rows:"4",placeholder:"Example: I want to read and send emails from Gmail, and create spreadsheets in Google Sheets",disabled:A.value},null,8,fs),[[ae,c.value]]),t[15]||(t[15]=e("small",{class:"text-muted"},' Try: "Connect to Google Drive and Gmail" or "Access Google Calendar and Sheets" ',-1))]),q.value?(o(),l("div",hs,[t[16]||(t[16]=e("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),n(" "+u(q.value),1)])):p("",!0),e("button",{class:"btn btn-primary btn-lg w-100",onClick:E,disabled:!c.value||A.value},[A.value?(o(),l("span",xs,[...t[17]||(t[17]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),n(" AI is analyzing your request... ",-1)])])):(o(),l("span",ks,[...t[18]||(t[18]=[e("i",{class:"fas fa-magic me-2"},null,-1),n(" Analyze with AI ",-1)])]))],8,ys)])):p("",!0),k.value==="preview"?(o(),l("div",ws,[t[42]||(t[42]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-list-check text-success me-2"}),n(" AI Analysis Results ")],-1)),e("div",Cs,[t[21]||(t[21]=e("i",{class:"fas fa-robot me-2"},null,-1)),t[22]||(t[22]=e("strong",null,"AI Reasoning:",-1)),n(" "+u(v.value.reasoning),1)]),t[43]||(t[43]=e("h6",{class:"font-weight-bold mt-4 mb-3"},"Required Google APIs:",-1)),e("div",_s,[(o(!0),l(O,null,I(v.value.apis,a=>(o(),l("div",{key:a.name,class:"list-group-item"},[e("div",$s,[e("div",null,[e("h6",Ss,[t[23]||(t[23]=e("i",{class:"fab fa-google text-primary me-2"},null,-1)),n(" "+u(a.display_name),1)]),e("p",As,u(a.description),1),e("div",Ps,[(o(!0),l(O,null,I(a.scopes,s=>(o(),l("span",{key:s,class:"badge bg-light text-dark me-1 mb-1"},[e("code",qs,u(s),1)]))),128))])]),v.value.billing_apis&&v.value.billing_apis.includes(a.name)?(o(),l("span",js,[...t[24]||(t[24]=[e("i",{class:"fas fa-credit-card me-1"},null,-1),n(" Billing Required ",-1)])])):p("",!0)])]))),128))]),v.value.billing_required?(o(),l("div",Os,[t[26]||(t[26]=e("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[27]||(t[27]=e("strong",null,"Billing Account Required",-1)),e("p",Is,[t[25]||(t[25]=n(" The following APIs require a billing account to be linked to your Google Cloud project: ",-1)),e("strong",null,u(v.value.billing_apis.join(", ")),1)]),t[28]||(t[28]=e("p",{class:"mb-0 mt-2 small"}," Make sure your Google Cloud project has billing enabled before proceeding. ",-1))])):p("",!0),e("div",zs,[e("div",Gs,[t[35]||(t[35]=e("h6",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-route text-primary me-2"}),n(" Choose Your Setup Method ")],-1)),e("div",Ms,[e("div",Bs,[e("div",{class:$(["border rounded p-3 h-100",{"border-primary bg-light":f.value==="auto"}])},[e("div",Us,[U(e("input",{class:"form-check-input",type:"radio",name:"setupMethod",id:"autoSetup",value:"auto","onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a)},null,512),[[Oe,f.value]]),t[29]||(t[29]=e("label",{class:"form-check-label font-weight-bold",for:"autoSetup"},[e("i",{class:"fas fa-magic text-primary me-2"}),n(" Automated Setup (New Project) ")],-1))]),t[30]||(t[30]=e("p",{class:"small text-muted mt-2 mb-0"}," Let Lodgeick create a new Google Cloud project and enable APIs for you automatically. ",-1)),t[31]||(t[31]=e("div",{class:"mt-2"},[e("span",{class:"badge bg-success me-1"},"Recommended"),e("span",{class:"badge bg-info"},"Fastest")],-1))],2)]),e("div",Rs,[e("div",{class:$(["border rounded p-3 h-100",{"border-primary bg-light":f.value==="manual"}])},[e("div",Ns,[U(e("input",{class:"form-check-input",type:"radio",name:"setupMethod",id:"manualSetup",value:"manual","onUpdate:modelValue":t[2]||(t[2]=a=>f.value=a)},null,512),[[Oe,f.value]]),t[32]||(t[32]=e("label",{class:"form-check-label font-weight-bold",for:"manualSetup"},[e("i",{class:"fas fa-hand-pointer text-warning me-2"}),n(" Manual Setup (Existing Project) ")],-1))]),t[33]||(t[33]=e("p",{class:"small text-muted mt-2 mb-0"}," I already have a Google Cloud project and want to use my existing setup. ",-1)),t[34]||(t[34]=e("div",{class:"mt-2"},[e("span",{class:"badge bg-secondary"},"Advanced")],-1))],2)])])])]),e("div",Ds,[e("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=a=>k.value="intent")},[...t[36]||(t[36]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),n(" Back ",-1)])]),e("button",{class:"btn btn-primary flex-fill",onClick:V,disabled:!f.value},[t[37]||(t[37]=e("i",{class:"fas fa-arrow-right me-2"},null,-1)),n(" Continue with "+u(f.value==="auto"?"Automated":"Manual")+" Setup ",1)],8,Ls)]),d.value&&f.value==="auto"?(o(),l("div",Es,[t[40]||(t[40]=e("h6",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-folder-plus me-2"}),n(" Name Your New Project ")],-1)),U(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>y.value=a),type:"text",class:"form-control mb-3",placeholder:"e.g., My Lodgeick Integration"},null,512),[[ae,y.value]]),t[41]||(t[41]=e("small",{class:"text-muted d-block mb-3"}," A unique project ID will be generated automatically ",-1)),e("button",{class:"btn btn-success w-100",onClick:W,disabled:!y.value||S.value},[S.value?(o(),l("span",Fs,[...t[38]||(t[38]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),n(" Creating project and enabling APIs... ",-1)])])):(o(),l("span",Vs,[...t[39]||(t[39]=[e("i",{class:"fas fa-rocket me-2"},null,-1),n(" Create Google Cloud Project ",-1)])]))],8,Ts)])):p("",!0)])):p("",!0),k.value==="manual_instructions"?(o(),l("div",Ws,[t[53]||(t[53]=M('<h5 class="font-weight-bold mb-3" data-v-5aa547f7><i class="fas fa-list-ol text-primary me-2" data-v-5aa547f7></i> Manual Setup Instructions </h5><div class="alert alert-info" data-v-5aa547f7><i class="fas fa-info-circle me-2" data-v-5aa547f7></i> Follow these steps in your Google Cloud Console to set up the required APIs and OAuth credentials. </div><div class="card mb-3" data-v-5aa547f7><div class="card-header bg-light" data-v-5aa547f7><h6 class="mb-0 font-weight-bold" data-v-5aa547f7><i class="fas fa-project-diagram me-2" data-v-5aa547f7></i> Step 1: Use Existing or Create New Project </h6></div><div class="card-body" data-v-5aa547f7><ol class="mb-0" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com" target="_blank" class="text-primary" data-v-5aa547f7> Google Cloud Console <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Select an existing project or create a new one</li><li data-v-5aa547f7>Copy your project ID (you&#39;ll need it later)</li></ol></div></div>',3)),e("div",Hs,[t[45]||(t[45]=e("div",{class:"card-header bg-light"},[e("h6",{class:"mb-0 font-weight-bold"},[e("i",{class:"fas fa-toggle-on me-2"}),n(" Step 2: Enable Required APIs ")])],-1)),e("div",Ys,[t[44]||(t[44]=M('<ol class="mb-2" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com/apis/library" target="_blank" class="text-primary" data-v-5aa547f7> APIs &amp; Services &gt; Library <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Enable these APIs in your project:</li></ol>',1)),e("div",Xs,[(o(!0),l(O,null,I(v.value.apis,a=>(o(),l("div",{key:a.name,class:"mb-2"},[e("span",Js,u(a.display_name),1),e("code",Ks,u(a.name),1)]))),128))])])]),e("div",Qs,[t[47]||(t[47]=e("div",{class:"card-header bg-light"},[e("h6",{class:"mb-0 font-weight-bold"},[e("i",{class:"fas fa-shield-alt me-2"}),n(" Step 3: Configure OAuth Consent Screen ")])],-1)),e("div",Zs,[t[46]||(t[46]=M('<ol class="mb-0" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com/apis/credentials/consent" target="_blank" class="text-primary" data-v-5aa547f7> OAuth consent screen <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Choose &quot;External&quot; user type</li><li class="mb-2" data-v-5aa547f7>Fill in app name: <strong data-v-5aa547f7>Lodgeick</strong></li><li class="mb-2" data-v-5aa547f7>Add required scopes:</li></ol>',1)),e("div",ea,[(o(!0),l(O,null,I(v.value.apis,a=>(o(),l("div",{key:a.name},[(o(!0),l(O,null,I(a.scopes,s=>(o(),l("code",{class:"small d-block",key:s},u(s),1))),128))]))),128))])])]),e("div",ta,[t[50]||(t[50]=e("div",{class:"card-header bg-light"},[e("h6",{class:"mb-0 font-weight-bold"},[e("i",{class:"fas fa-key me-2"}),n(" Step 4: Create OAuth Credentials ")])],-1)),e("div",sa,[t[49]||(t[49]=M('<ol class="mb-2" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com/apis/credentials" target="_blank" class="text-primary" data-v-5aa547f7> Credentials <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Click &quot;Create Credentials&quot; â†’ &quot;OAuth 2.0 Client ID&quot;</li><li class="mb-2" data-v-5aa547f7>Application type: <strong data-v-5aa547f7>Web application</strong></li><li class="mb-2" data-v-5aa547f7>Add authorized redirect URI:</li></ol>',1)),e("div",aa,[e("input",{type:"text",class:"form-control font-monospace",value:G.value,readonly:""},null,8,la),e("button",{class:"btn btn-outline-secondary",onClick:t[5]||(t[5]=a=>T(G.value))},[...t[48]||(t[48]=[e("i",{class:"fas fa-copy"},null,-1)])])])])]),e("div",oa,[e("button",{class:"btn btn-secondary",onClick:t[6]||(t[6]=a=>k.value="preview")},[...t[51]||(t[51]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),n(" Back ",-1)])]),e("button",{class:"btn btn-primary flex-fill",onClick:t[7]||(t[7]=a=>k.value="oauth_input")},[...t[52]||(t[52]=[e("i",{class:"fas fa-arrow-right me-2"},null,-1),n(" I've Completed the Setup ",-1)])])])])):p("",!0),k.value==="project_created"?(o(),l("div",na,[e("div",ia,[t[56]||(t[56]=e("div",{class:"icon-shape bg-gradient-success shadow-success mx-auto mb-3",style:{width:"80px",height:"80px"}},[e("i",{class:"fas fa-check text-white",style:{"font-size":"2.5rem"}})],-1)),t[57]||(t[57]=e("h4",{class:"font-weight-bold"},"Project Created Successfully!",-1)),e("p",ra,[t[54]||(t[54]=n(" Google Cloud project ",-1)),e("strong",null,u(m.value.project_id),1),t[55]||(t[55]=n(" is ready ",-1))])]),e("div",da,[t[58]||(t[58]=e("i",{class:"fas fa-check-circle me-2"},null,-1)),e("strong",null,u(m.value.apis_enabled.length)+" APIs Enabled:",1),n(" "+u(m.value.apis_enabled.join(", ")),1)]),m.value.apis_failed&&m.value.apis_failed.length>0?(o(),l("div",ua,[t[59]||(t[59]=e("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[60]||(t[60]=e("strong",null,"Some APIs failed to enable:",-1)),e("ul",ca,[(o(!0),l(O,null,I(m.value.apis_failed,a=>(o(),l("li",{key:a.api},u(a.api)+": "+u(a.error),1))),128))])])):p("",!0),e("div",va,[e("div",ma,[t[68]||(t[68]=e("h6",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-key text-warning me-2"}),n(" Next: Create OAuth Credentials ")],-1)),t[69]||(t[69]=e("p",{class:"small text-muted mb-3"}," You need to manually create OAuth credentials in Google Cloud Console. Follow these steps: ",-1)),e("ol",ba,[e("li",pa,[t[62]||(t[62]=n(" Go to ",-1)),e("a",{href:`https://console.cloud.google.com/apis/credentials?project=${m.value.project_id}`,target:"_blank",class:"text-primary"},[...t[61]||(t[61]=[n(" Google Cloud Console - Credentials ",-1),e("i",{class:"fas fa-external-link-alt ms-1"},null,-1)])],8,ga)]),t[65]||(t[65]=e("li",{class:"mb-2"},"Configure OAuth consent screen (if not done already)",-1)),t[66]||(t[66]=e("li",{class:"mb-2"},"Create OAuth 2.0 Client ID (Web application)",-1)),e("li",fa,[t[64]||(t[64]=n(" Add redirect URI: ",-1)),e("code",ha,u(G.value),1),e("button",{class:"btn btn-sm btn-outline-secondary ms-2",onClick:t[8]||(t[8]=a=>T(G.value))},[...t[63]||(t[63]=[e("i",{class:"fas fa-copy"},null,-1)])])]),t[67]||(t[67]=e("li",null,"Copy the Client ID and Client Secret",-1))])])]),e("button",{class:"btn btn-primary w-100 mt-3",onClick:t[9]||(t[9]=a=>k.value="oauth_input")},[...t[70]||(t[70]=[e("i",{class:"fas fa-arrow-right me-2"},null,-1),n(" I've Created OAuth Credentials ",-1)])])])):p("",!0),k.value==="oauth_input"?(o(),l("div",ya,[t[75]||(t[75]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-key text-primary me-2"}),n(" Enter OAuth Credentials ")],-1)),e("div",xa,[t[71]||(t[71]=e("label",{class:"form-label font-weight-bold"},[n(" Client ID "),e("span",{class:"text-danger"},"*")],-1)),U(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>x.value=a),type:"text",class:"form-control",placeholder:"123456789-abc123def456.apps.googleusercontent.com"},null,512),[[ae,x.value]])]),e("div",ka,[t[72]||(t[72]=e("label",{class:"form-label font-weight-bold"},[n(" Client Secret "),e("span",{class:"text-danger"},"*")],-1)),e("div",wa,[U(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>C.value=a),type:z.value?"text":"password",class:"form-control",placeholder:"GOCSPX-xxxxxxxxxxxxx"},null,8,Ca),[[Ge,C.value]]),e("button",{class:"btn btn-outline-secondary",onClick:t[12]||(t[12]=a=>z.value=!z.value)},[e("i",{class:$(z.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),e("button",{class:"btn btn-success w-100",onClick:H,disabled:!x.value||!C.value||P.value},[P.value?(o(),l("span",$a,[...t[73]||(t[73]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),n(" Saving & Syncing to n8n... ",-1)])])):(o(),l("span",Sa,[...t[74]||(t[74]=[e("i",{class:"fas fa-save me-2"},null,-1),n(" Save & Sync to n8n ",-1)])]))],8,_a)])):p("",!0),k.value==="complete"?(o(),l("div",Aa,[t[77]||(t[77]=M('<div class="icon-shape bg-gradient-success shadow-success mx-auto mb-4" style="width:100px;height:100px;" data-v-5aa547f7><i class="fas fa-check-double text-white" style="font-size:3rem;" data-v-5aa547f7></i></div><h4 class="font-weight-bold mb-3" data-v-5aa547f7>Setup Complete!</h4><p class="text-muted mb-4" data-v-5aa547f7> Your Google Cloud integration is ready to use. Credentials have been synced to n8n. </p><div class="alert alert-success" data-v-5aa547f7><i class="fas fa-info-circle me-2" data-v-5aa547f7></i> You can now use these credentials in your n8n workflows and Lodgeick integrations. </div>',4)),e("button",{class:"btn btn-primary btn-lg",onClick:N},[...t[76]||(t[76]=[e("i",{class:"fas fa-check me-2"},null,-1),n(" Done ",-1)])])])):p("",!0)])])])],6))}},qa=ne(Pa,[["__scopeId","data-v-5aa547f7"]]),ja={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},Oa={class:"p-6"},Ia={class:"flex items-center justify-between"},za={class:"flex items-center gap-4"},Ga={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-12"},Ma={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},Ba={class:"flex items-start justify-between mb-4"},Ua={class:"flex items-center gap-4"},Ra={class:"text-xl font-bold text-gray-900"},Na={class:"text-sm text-gray-500"},Da={key:0,class:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},La={key:1,class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ea={key:2,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ta={class:"space-y-3"},Fa={class:"flex items-center gap-3"},Va={class:"flex-1"},Wa=["onClick"],Ha={key:1,class:"text-xs text-green-600"},Ya={class:"flex items-center gap-3"},Xa={class:"flex-1"},Ja=["onClick","disabled"],Ka={key:1,class:"text-xs text-green-600"},Qa={key:2,class:"text-xs text-gray-500"},Za={class:"flex items-center gap-3"},el={class:"flex-1"},tl=["onClick","disabled"],sl={key:1,class:"text-xs text-green-600"},al={key:2,class:"text-xs text-gray-500"},ll={class:"flex justify-between items-center"},ol={class:"flex gap-3"},nl={__name:"IntegrateView",setup(h){const g=Ne(),r=Te(),k=()=>{Le.logout.submit()},f=b(!1),c=b(!1),v=b(""),y=b(null),m=b(null),x=b({}),C=b({}),z=b({}),d=i=>r.availableApps.find(t=>t.id===i),A=i=>C.value[i]===!0,S=i=>z.value[i]===!0,P=i=>S(i)&&x.value[i]?"connected":A(i)?"credentials":"not-connected",q=Q(()=>r.connectedApps.every(i=>S(i)&&x.value[i])),G=i=>{const t=d(i);t&&(v.value=t.oauth_provider||i,f.value=!0)},F=i=>{f.value=!1;const t=r.connectedApps.find(a=>{const s=d(a);return s&&(s.oauth_provider===i.provider||s.id===i.provider)});t&&(C.value[t]=!0)},L=()=>{f.value=!1,c.value=!0},R=i=>{c.value=!1;const t=r.connectedApps.find(a=>{const s=d(a);return s&&(s.oauth_provider==="google"||s.id==="google")});t&&(C.value[t]=!0),alert("Google Cloud integration setup complete! You can now authorize access.")},E=i=>ee(this,null,function*(){const t=d(i);if(!t)return;y.value=i;const a=t.oauth_provider||i;try{const s=yield W.submit({provider:a});s.success&&s.authorization_url&&(window.location.href=s.authorization_url)}catch(s){console.error("Failed to initiate OAuth:",s),alert("Failed to start authorization. Please check your credentials.")}finally{y.value=null}}),V=i=>ee(this,null,function*(){const t=d(i);if(t){m.value=i,t.oauth_provider;try{yield new Promise(a=>setTimeout(a,1500)),x.value[i]=!0}catch(a){console.error("Connection test failed:",a),alert("Connection test failed. Please try authorizing again.")}finally{m.value=null}}}),W=Z({url:"lodgeick.api.oauth.initiate_oauth",makeParams(i){return{provider:i.provider,redirect_uri:window.location.origin+"/oauth/callback"}}}),H=()=>{r.nextStep(),g.push({name:"Configure"})},T=()=>{r.completeOnboarding(),g.push({name:"Dashboard"})},N=()=>{r.previousStep(),g.push({name:"ConnectApps"})};return le(()=>{if(r.connectedApps.length===0){g.push({name:"ConnectApps"});return}const i=new URLSearchParams(window.location.search),t=i.get("oauth_success"),a=i.get("provider");if(t==="true"&&a){const s=r.connectedApps.find(_=>{const j=d(_);return j&&(j.oauth_provider===a||j.id===a)});s&&(z.value[s]=!0,C.value[s]=!0),window.history.replaceState({},document.title,window.location.pathname)}}),(i,t)=>{const a=De("router-link");return o(),l("div",ja,[e("div",Oa,[e("div",Ia,[B(a,{to:"/",class:"inline-flex items-center gap-3 group no-underline"},{default:te(()=>[...t[2]||(t[2]=[e("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-xl"},"L")],-1),e("span",{class:"text-2xl font-bold text-gray-900"},"Lodgeick",-1)])]),_:1}),e("div",za,[B(a,{to:"/account/profile",class:"text-gray-700 hover:text-blue-600 font-medium transition-colors no-underline flex items-center gap-2"},{default:te(()=>[...t[3]||(t[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),n(" My Account ",-1)])]),_:1}),e("button",{onClick:k,class:"text-gray-700 hover:text-red-600 font-medium transition-colors flex items-center gap-2"},[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),n(" Log Out ",-1)])])])])]),e("div",Ga,[B(Fe,{"current-step":Ie(r).currentStep,"total-steps":4},null,8,["current-step"]),t[13]||(t[13]=e("div",{class:"text-center mb-12"},[e("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Connect Your Apps "),e("p",{class:"text-xl text-gray-600 max-w-2xl mx-auto"}," Set up OAuth credentials and authorize each app to enable seamless integrations ")],-1)),e("div",Ma,[(o(!0),l(O,null,I(Ie(r).connectedApps,s=>{var _,j,Y,X;return o(),l("div",{key:s,class:"bg-white rounded-2xl shadow-lg p-6 transition-all duration-200 hover:shadow-xl"},[e("div",Ba,[e("div",Ua,[e("div",{class:$(["w-16 h-16 rounded-lg flex items-center justify-center text-3xl",(_=d(s))==null?void 0:_.color])},u((j=d(s))==null?void 0:j.icon),3),e("div",null,[e("h3",Ra,u((Y=d(s))==null?void 0:Y.name),1),e("p",Na,u((X=d(s))==null?void 0:X.description),1)])]),e("div",{class:$(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",P(s)==="connected"?"bg-green-100":P(s)==="credentials"?"bg-yellow-100":"bg-gray-100"])},[P(s)==="connected"?(o(),l("svg",Da,[...t[5]||(t[5]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):P(s)==="credentials"?(o(),l("svg",La,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"},null,-1)])])):(o(),l("svg",Ea,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])]))],2)]),e("div",Ta,[e("div",Fa,[e("div",{class:$(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",A(s)?"bg-green-500 text-white":"bg-gray-300 text-gray-700"])},u(A(s)?"âœ“":"1"),3),e("div",Va,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-900"}," OAuth Credentials ",-1)),A(s)?(o(),l("p",Ha," Configured ")):(o(),l("button",{key:0,onClick:J=>G(s),class:"text-xs text-blue-600 hover:text-blue-700 font-medium"}," Set up credentials â†’ ",8,Wa))])]),e("div",Ya,[e("div",{class:$(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",S(s)?"bg-green-500 text-white":A(s)?"bg-blue-500 text-white":"bg-gray-300 text-gray-700"])},u(S(s)?"âœ“":"2"),3),e("div",Xa,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-900"}," Authorize Access ",-1)),A(s)&&!S(s)?(o(),l("button",{key:0,onClick:J=>E(s),disabled:y.value===s,class:"text-xs text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50"},u(y.value===s?"Authorizing...":"Authorize now â†’"),9,Ja)):S(s)?(o(),l("p",Ka," Authorized ")):(o(),l("p",Qa," Complete step 1 first "))])]),e("div",Za,[e("div",{class:$(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",x.value[s]?"bg-green-500 text-white":S(s)?"bg-blue-500 text-white":"bg-gray-300 text-gray-700"])},u(x.value[s]?"âœ“":"3"),3),e("div",el,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-900"}," Test Connection ",-1)),S(s)&&!x.value[s]?(o(),l("button",{key:0,onClick:J=>V(s),disabled:m.value===s,class:"text-xs text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50"},u(m.value===s?"Testing...":"Test now â†’"),9,tl)):x.value[s]?(o(),l("p",sl," Connection verified ")):(o(),l("p",al," Complete step 2 first "))])])])])}),128))]),e("div",ll,[B(ze,{label:"Back",onClick:N},{icon:te(()=>[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),e("div",ol,[B(ze,{label:"Skip for Now",onClick:T}),B(Ve,{label:"Continue",disabled:!q.value,onClick:H},{iconRight:te(()=>[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["disabled"])])])]),B(cs,{show:f.value,provider:v.value,onClose:t[0]||(t[0]=s=>f.value=!1),onSuccess:F,onLaunchAIWizard:L},null,8,["show","provider"]),B(qa,{show:c.value,onClose:t[1]||(t[1]=s=>c.value=!1),onSuccess:R},null,8,["show"])])}}},vl=ne(nl,[["__scopeId","data-v-5ee591ec"]]);export{vl as default};
//# sourceMappingURL=IntegrateView-CDdY1VdZ.js.map
