{"version":3,"file":"EmailVerification-DBO_Qdhi.js","sources":["../../../../frontend/src/pages/EmailVerification.vue"],"sourcesContent":["<template>\n  <div class=\"auth-page\">\n    <div class=\"container\">\n      <div class=\"flex justify-center\">\n        <div class=\"col-lg-5 col-md-7\">\n          <div class=\"card shadow-lg border-0 mt-5\">\n            <div class=\"card-header bg-gradient-primary p-4 text-center\">\n              <div class=\"mb-3\">\n                <svg class=\"verification-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                </svg>\n              </div>\n              <h3 class=\"text-white font-bold mb-0\">Check Your Email</h3>\n            </div>\n            <div class=\"card-body p-4 text-center\">\n              <div class=\"mb-4\">\n                <p class=\"text-gray-600 mb-3\">\n                  We've sent a verification link to:\n                </p>\n                <p class=\"font-bold text-dark mb-3\">\n                  {{ email }}\n                </p>\n                <p class=\"text-gray-600 text-sm\">\n                  Click the link in the email to verify your account and complete your registration.\n                </p>\n              </div>\n\n              <BaseAlert variant=\"info\" hide-icon class=\"mb-4\">\n                <svg class=\"info-icon\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\" />\n                </svg>\n                <small>Didn't receive the email? Check your spam folder or wait a few minutes.</small>\n              </BaseAlert>\n\n              <div class=\"d-grid gap-2\">\n                <button\n                  @click=\"resendEmail\"\n                  class=\"btn btn-outline-primary\"\n                  :disabled=\"resending || countdown > 0\"\n                >\n                  <span v-if=\"resending\" class=\"spinner-border spinner-border-sm mr-2\"></span>\n                  {{ resending ? 'Sending...' : countdown > 0 ? `Resend in ${countdown}s` : 'Resend Email' }}\n                </button>\n\n                <router-link\n                  to=\"/account/login\"\n                  class=\"btn btn-primary no-underline\"\n                >\n                  Continue to Login\n                </router-link>\n\n                <router-link\n                  to=\"/\"\n                  class=\"btn btn-link text-gray-600 no-underline\"\n                >\n                  <svg class=\"back-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                  </svg>\n                  Back to Home\n                </router-link>\n              </div>\n\n              <BaseAlert v-if=\"resendSuccess\" variant=\"success\" class=\"mt-3\">\n                âœ“ Verification email sent successfully!\n              </BaseAlert>\n\n              <BaseAlert v-if=\"resendError\" variant=\"danger\" class=\"mt-3\">\n                {{ resendError }}\n              </BaseAlert>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { createResource } from 'frappe-ui'\n\nconst route = useRoute()\nconst email = ref(route.query.email || 'your email')\nconst resending = ref(false)\nconst resendSuccess = ref(false)\nconst resendError = ref('')\nconst countdown = ref(0)\nlet countdownInterval = null\n\nconst resendResource = createResource({\n  url: 'frappe.core.doctype.user.user.sign_up',\n  makeParams() {\n    return {\n      email: email.value,\n      resend: 1\n    }\n  },\n  onSuccess() {\n    resending.value = false\n    resendSuccess.value = true\n    resendError.value = ''\n    countdown.value = 60\n    startCountdown()\n    setTimeout(() => {\n      resendSuccess.value = false\n    }, 5000)\n  },\n  onError(err) {\n    resending.value = false\n    resendError.value = err.messages ? err.messages.join(', ') : 'Failed to resend email'\n    setTimeout(() => {\n      resendError.value = ''\n    }, 5000)\n  }\n})\n\nfunction resendEmail() {\n  if (countdown.value > 0) return\n  resending.value = true\n  resendSuccess.value = false\n  resendError.value = ''\n  resendResource.submit()\n}\n\nfunction startCountdown() {\n  if (countdownInterval) {\n    clearInterval(countdownInterval)\n  }\n  countdownInterval = setInterval(() => {\n    countdown.value--\n    if (countdown.value <= 0) {\n      clearInterval(countdownInterval)\n    }\n  }, 1000)\n}\n\nonUnmounted(() => {\n  if (countdownInterval) {\n    clearInterval(countdownInterval)\n  }\n})\n</script>\n\n<style scoped>\n.auth-page {\n  min-height: 100vh;\n  background: linear-gradient(310deg, #141727 0%, #3A416F 100%);\n  display: flex;\n  align-items: center;\n  padding: 2rem 0;\n}\n\n.bg-gradient-primary {\n  background: linear-gradient(310deg, #7928CA 0%, #FF0080 100%);\n}\n\n.card {\n  border-radius: 1rem;\n}\n\n.card-header {\n  border-radius: 1rem 1rem 0 0 !important;\n}\n\n.verification-icon {\n  width: 64px;\n  height: 64px;\n  color: white;\n  margin: 0 auto;\n}\n\n.info-icon {\n  width: 18px;\n  height: 18px;\n  display: inline-block;\n  margin-right: 0.5rem;\n  vertical-align: middle;\n}\n\n.back-icon {\n  width: 18px;\n  height: 18px;\n  display: inline-block;\n  margin-right: 0.5rem;\n  vertical-align: middle;\n}\n\n.btn-primary {\n  background: linear-gradient(310deg, #7928CA 0%, #FF0080 100%);\n  border: none;\n  border-radius: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  font-weight: 600;\n  color: white;\n}\n\n.btn-primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 20px rgba(121, 40, 202, 0.4);\n  color: white;\n}\n\n.btn-outline-primary {\n  border: 2px solid #7928CA;\n  color: #7928CA;\n  border-radius: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  font-weight: 600;\n  background: transparent;\n}\n\n.btn-outline-primary:hover {\n  background: #7928CA;\n  color: white;\n}\n\n.btn-outline-primary:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.btn-link {\n  text-decoration: none;\n}\n\n.no-underline {\n  text-decoration: none !important;\n}\n\n</style>\n"],"names":["route","useRoute","email","ref","resending","resendSuccess","resendError","countdown","countdownInterval","resendResource","createResource","startCountdown","err","resendEmail","onUnmounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_cache","_hoisted_8","_toDisplayString","_createVNode","_component_BaseAlert","_hoisted_9","_hoisted_11","_createTextVNode","_component_router_link","_createBlock"],"mappings":"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"}