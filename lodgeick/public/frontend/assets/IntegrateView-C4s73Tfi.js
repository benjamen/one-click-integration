var Oe=Object.defineProperty;var $e=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Ae=(y,b,u)=>b in y?Oe(y,b,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[b]=u,K=(y,b)=>{for(var u in b||(b={}))ze.call(b,u)&&Ae(y,u,b[u]);if($e)for(var u of $e(b))Ge.call(b,u)&&Ae(y,u,b[u]);return y};var ee=(y,b,u)=>new Promise((k,h)=>{var c=m=>{try{w(u.next(m))}catch(x){h(x)}},v=m=>{try{w(u.throw(m))}catch(x){h(x)}},w=m=>m.done?k(m.value):Promise.resolve(m.value).then(c,v);w((u=u.apply(y,b)).next())});import{A as Ie,_ as ne,k as g,m as ae,B as Be,l as Q,C as Z,c as a,o as l,a as e,e as o,t as d,F as j,f as O,j as f,q as A,n as le,v as oe,b as B,x as R,y as se,D as je,E as Se,u as Me,r as Ue,d as U,w as te,p as qe,s as Re}from"./index-Btlg0mXV.js";import{c as Le,u as Ne}from"./onboarding-DGmD1NDx.js";import{_ as De,a as Pe}from"./SecondaryButton-Dj7wfzNB.js";import{_ as Ee}from"./PrimaryButton-nxH8Qx10.js";function Te(){const y=Ie();return{success:(b,u={})=>{y.success(b,K({timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1},u))},error:(b,u={})=>{y.error(b,K({timeout:7e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1},u))},warning:(b,u={})=>{y.warning(b,K({timeout:6e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1},u))},info:(b,u={})=>{y.info(b,K({timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1},u))},clear:()=>{y.clear()}}}const Fe={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},Ve={class:"modal-content"},We={class:"modal-header bg-gradient-primary"},He={class:"modal-title text-white font-weight-bold"},Ye={class:"modal-body p-4"},Xe={class:"row mb-4"},Je={class:"col-12"},Ke={class:"d-flex justify-content-between align-items-center"},Qe={key:0,class:"fas fa-check"},Ze={key:1},et={class:"d-block text-muted"},tt={class:"step-content"},st={key:0,class:"step"},at={class:"text-center text-muted mb-4"},lt={class:"row g-4"},ot={key:0,class:"col-md-4"},nt={class:"card-body text-center p-4"},it={class:"card-title font-weight-bold"},rt={class:"card-text text-muted small"},dt={class:"mt-3"},ut={class:"badge bg-success me-1"},ct={class:"text-start"},vt={class:"small text-muted mb-2",style:{"font-size":"0.85rem"}},mt={class:"small text-muted",style:{"font-size":"0.85rem"}},pt={key:1,class:"col-md-4"},gt={class:"card-body text-center p-4 position-relative"},ft={key:0,class:"position-absolute top-0 end-0 p-2"},bt={class:"badge bg-warning"},ht={class:"card-title font-weight-bold"},yt={class:"card-text text-muted small"},xt={class:"mt-3"},kt={key:0,class:"badge bg-success me-1"},wt={class:"badge bg-primary"},Ct={key:1,class:"alert alert-warning small mb-2"},_t={class:"text-start"},$t={class:"small text-muted mb-2",style:{"font-size":"0.85rem"}},At={key:2,class:"mt-3"},St={class:"card-body text-center p-4"},qt={class:"card-title font-weight-bold"},Pt={class:"card-text text-muted small"},jt={class:"mt-3"},Ot={class:"badge bg-info"},zt={class:"text-start"},Gt={class:"small text-muted mb-2",style:{"font-size":"0.85rem"}},It={class:"text-center mt-4"},Bt=["disabled"],Mt={key:1,class:"step"},Ut={key:2,class:"step"},Rt={key:3,class:"step"},Lt={key:4,class:"step"},Nt={class:"setup-steps"},Dt={class:"mb-3"},Et={class:"input-group mt-2"},Tt=["value"],Ft={key:5,class:"step"},Vt={class:"mb-3"},Wt={class:"mb-3"},Ht={class:"input-group"},Yt=["type"],Xt=["aria-label"],Jt={key:0,class:"alert alert-success"},Kt={key:6,class:"step text-center"},Qt={class:"alert alert-info"},Zt={class:"modal-footer"},es=["disabled"],ts={key:0},ss={key:1},as={__name:"OAuthSetupWizard",props:{show:{type:Boolean,default:!1},provider:{type:String,required:!0}},emits:["close","success","launchAIWizard"],setup(y,{emit:b}){const u=y,k=b,h=Te(),c=g(0),v=g("default"),w=g(""),m=g(""),x=g(!1),$=g(!1),z=g(!0),r=g(null),S=g(null);g(null),ae(()=>ee(this,null,function*(){try{z.value=!0;const p=yield Le("lodgeick.api.oauth_tiers.get_tier_config",{provider:u.provider});r.value=p}catch(p){S.value=`Failed to load setup options: ${p.message}`,h.error(`Failed to load setup options: ${p.message||"Please try again"}`)}finally{z.value=!1}})),Be(()=>u.show,p=>{p&&!r.value&&ae()});const _=Q(()=>({google:"Google (Gmail, Sheets, Drive)",xero:"Xero",slack:"Slack",microsoft:"Microsoft 365",hubspot:"HubSpot",salesforce:"Salesforce",stripe:"Stripe"})[u.provider]||u.provider),q=Q(()=>{var s,t;if(!v.value||!r.value)return"";const p=(t=(s=r.value)==null?void 0:s.tiers)==null?void 0:t[v.value];return(p==null?void 0:p.label)||v.value}),P=Q(()=>window.location.origin+"/oauth/callback"),G=[{title:"Create Project"},{title:"Enable APIs"},{title:"Consent Screen"},{title:"Create Credentials"},{title:"Configure"},{title:"Complete"}],D=Z({url:"lodgeick.api.oauth.save_user_oauth_setup",makeParams(p){return p!=null&&p.use_default?{provider:u.provider,tier:"default",use_default:!0}:{provider:u.provider,tier:v.value||"manual",client_id:w.value,client_secret:m.value}},onSuccess(p){$.value=!1,p.ready_to_connect&&(c.value=5,h.success("OAuth credentials saved successfully! ðŸŽ‰")),k("success",{provider:u.provider,tier:v.value,ready_to_connect:p.ready_to_connect})},onError(p){$.value=!1,h.error(`Failed to save credentials: ${p.message||p}`,{timeout:7e3})}});function T(){v.value==="default"?($.value=!0,D.submit({provider:u.provider,tier:"default",use_default:!0})):v.value==="ai"?(k("launchAIWizard"),M()):c.value=1}function F(){c.value<G.length-1&&c.value++}function V(){c.value>0&&c.value--}function W(){if(!w.value||!m.value){h.warning("Please enter both Client ID and Client Secret");return}$.value=!0,D.submit()}function H(p){navigator.clipboard.writeText(p).then(()=>{h.success("Copied to clipboard!");const t=event.target.closest("button").querySelector("i");t.className="fas fa-check",setTimeout(()=>{t.className="fas fa-copy"},2e3)}).catch(()=>{h.error("Failed to copy to clipboard")})}function M(){c.value=0,v.value=null,w.value="",m.value="",x.value=!1,k("close")}function E(){var s,t,n;const p=((n=(t=(s=r.value)==null?void 0:s.tiers)==null?void 0:t.ai)==null?void 0:n.upgrade_tier)||"Pro";h.info(`Upgrade to ${p} to unlock AI-powered OAuth setup! Includes: Unlimited API quota, AI-powered setup (2 min), Access to all APIs, Priority support.`,{timeout:1e4})}return(p,s)=>{var t,n,i,L,I,Y,X,J,ie,re,de,ue,ce,ve,me,pe,ge,fe,be,he,ye,xe,ke,we,Ce,_e;return l(),a("div",{class:A(["modal fade",{show:y.show,"d-block":y.show}]),tabindex:"-1",style:le({backgroundColor:y.show?"rgba(0,0,0,0.5)":""}),onClick:oe(M,["self"])},[e("div",Fe,[e("div",Ve,[e("div",We,[e("h5",He,[s[7]||(s[7]=e("i",{class:"fas fa-magic me-2"},null,-1)),o(" OAuth Setup Wizard - "+d(_.value),1)]),e("button",{type:"button",class:"btn-close btn-close-white","aria-label":"Close OAuth setup wizard",onClick:M})]),e("div",Ye,[e("div",Xe,[e("div",Je,[e("div",Ke,[(l(),a(j,null,O(G,(C,N)=>e("div",{key:N,class:"flex-fill text-center position-relative"},[e("div",{class:A(["step-circle mx-auto mb-2",{active:c.value===N,completed:c.value>N}])},[c.value>N?(l(),a("i",Qe)):(l(),a("span",Ze,d(N+1),1))],2),e("small",et,d(C.title),1),N<G.length-1?(l(),a("div",{key:0,class:A(["step-line",{completed:c.value>N}])},null,2)):f("",!0)])),64))])])]),e("div",tt,[c.value===0?(l(),a("div",st,[s[24]||(s[24]=e("h5",{class:"font-weight-bold mb-3 text-center"},[e("i",{class:"fas fa-route text-primary me-2"}),o(" Choose Your Setup Method ")],-1)),e("p",at," Select how you'd like to set up your "+d(_.value)+" integration ",1),e("div",lt,[(i=(n=(t=r.value)==null?void 0:t.tiers)==null?void 0:n.default)!=null&&i.enabled?(l(),a("div",ot,[e("div",{class:A(["card h-100 setup-option",{"border-primary selected":v.value==="default"}]),onClick:s[0]||(s[0]=C=>v.value="default"),style:{cursor:"pointer"}},[e("div",nt,[s[11]||(s[11]=e("div",{class:"mb-3"},[e("i",{class:"fas fa-bolt fa-3x text-warning"})],-1)),e("h5",it,d(r.value.tiers.default.icon)+" "+d(r.value.tiers.default.label),1),e("p",rt,d(r.value.tiers.default.description),1),e("div",dt,[e("span",ut,d(r.value.tiers.default.setup_time),1),s[8]||(s[8]=e("span",{class:"badge bg-info"},"No Setup",-1))]),s[12]||(s[12]=e("hr",{class:"my-3"},null,-1)),e("div",ct,[s[9]||(s[9]=e("div",{class:"small text-success mb-2"},[e("i",{class:"fas fa-check-circle me-1"}),o(),e("strong",null,"Pros:")],-1)),e("ul",vt,[(l(!0),a(j,null,O(r.value.tiers.default.advantages.slice(0,3),C=>(l(),a("li",{key:C},d(C),1))),128))]),s[10]||(s[10]=e("div",{class:"small text-warning mb-2"},[e("i",{class:"fas fa-exclamation-circle me-1"}),o(),e("strong",null,"Limits:")],-1)),e("ul",mt,[(l(!0),a(j,null,O(r.value.tiers.default.limitations.slice(0,2),C=>(l(),a("li",{key:C},d(C),1))),128))])])])],2)])):f("",!0),(I=(L=r.value)==null?void 0:L.tiers)!=null&&I.ai?(l(),a("div",pt,[e("div",{class:A(["card h-100 setup-option",{"border-primary selected":v.value==="ai","locked-tier":r.value.tiers.ai.upgrade_required}]),onClick:s[1]||(s[1]=C=>r.value.tiers.ai.enabled?v.value="ai":null),style:le({cursor:r.value.tiers.ai.enabled?"pointer":"not-allowed",opacity:r.value.tiers.ai.enabled?1:.7})},[e("div",gt,[r.value.tiers.ai.upgrade_required?(l(),a("div",ft,[e("span",bt,[s[13]||(s[13]=e("i",{class:"fas fa-lock me-1"},null,-1)),o(" "+d(r.value.tiers.ai.upgrade_tier)+" Only ",1)])])):f("",!0),s[17]||(s[17]=e("div",{class:"mb-3"},[e("i",{class:"fas fa-robot fa-3x text-primary"})],-1)),e("h5",ht,d(r.value.tiers.ai.icon)+" "+d(r.value.tiers.ai.label),1),e("p",yt,d(r.value.tiers.ai.description),1),e("div",xt,[r.value.tiers.ai.enabled?(l(),a("span",kt,"Recommended")):f("",!0),e("span",wt,d(r.value.tiers.ai.setup_time),1)]),s[18]||(s[18]=e("hr",{class:"my-3"},null,-1)),r.value.tiers.ai.upgrade_required?(l(),a("div",Ct,[s[14]||(s[14]=e("i",{class:"fas fa-star me-1"},null,-1)),o(" "+d(r.value.tiers.ai.upgrade_message),1)])):f("",!0),e("div",_t,[s[15]||(s[15]=e("div",{class:"small text-success mb-2"},[e("i",{class:"fas fa-check-circle me-1"}),o(),e("strong",null,"Pros:")],-1)),e("ul",$t,[(l(!0),a(j,null,O(r.value.tiers.ai.advantages.slice(0,3),C=>(l(),a("li",{key:C},d(C),1))),128))])]),r.value.tiers.ai.upgrade_required?(l(),a("div",At,[e("button",{class:"btn btn-warning btn-sm w-100",onClick:oe(E,["stop"])},[s[16]||(s[16]=e("i",{class:"fas fa-arrow-up me-1"},null,-1)),o(" Upgrade to "+d(r.value.tiers.ai.upgrade_tier),1)])])):f("",!0)])],6)])):f("",!0),(J=(X=(Y=r.value)==null?void 0:Y.tiers)==null?void 0:X.manual)!=null&&J.enabled?(l(),a("div",{key:2,class:A((de=(re=(ie=r.value)==null?void 0:ie.tiers)==null?void 0:re.ai)!=null&&de.enabled?"col-md-4":"col-md-6")},[e("div",{class:A(["card h-100 setup-option",{"border-primary selected":v.value==="manual"}]),onClick:s[2]||(s[2]=C=>v.value="manual"),style:{cursor:"pointer"}},[e("div",St,[s[21]||(s[21]=e("div",{class:"mb-3"},[e("i",{class:"fas fa-tools fa-3x text-secondary"})],-1)),e("h5",qt,d(((ve=(ce=(ue=r.value)==null?void 0:ue.tiers)==null?void 0:ce.manual)==null?void 0:ve.icon)||"ðŸ”§")+" "+d(((ge=(pe=(me=r.value)==null?void 0:me.tiers)==null?void 0:pe.manual)==null?void 0:ge.label)||"Manual Setup"),1),e("p",Pt,d(((he=(be=(fe=r.value)==null?void 0:fe.tiers)==null?void 0:be.manual)==null?void 0:he.description)||"Step-by-step setup"),1),e("div",jt,[s[19]||(s[19]=e("span",{class:"badge bg-secondary"},"Advanced",-1)),e("span",Ot,d(((ke=(xe=(ye=r.value)==null?void 0:ye.tiers)==null?void 0:xe.manual)==null?void 0:ke.setup_time)||"~10 min"),1)]),s[22]||(s[22]=e("hr",{class:"my-3"},null,-1)),e("div",zt,[s[20]||(s[20]=e("div",{class:"small text-success mb-2"},[e("i",{class:"fas fa-check-circle me-1"}),o(),e("strong",null,"Pros:")],-1)),e("ul",Gt,[(l(!0),a(j,null,O((((_e=(Ce=(we=r.value)==null?void 0:we.tiers)==null?void 0:Ce.manual)==null?void 0:_e.advantages)||[]).slice(0,3),C=>(l(),a("li",{key:C},d(C),1))),128))])])])],2)],2)):f("",!0)]),e("div",It,[e("button",{class:"btn btn-primary btn-lg",onClick:T,disabled:!v.value},[s[23]||(s[23]=e("i",{class:"fas fa-arrow-right me-2"},null,-1)),o(" Continue with "+d(q.value),1)],8,Bt)])])):f("",!0),c.value===0&&y.provider!=="google"?(l(),a("div",Mt,[...s[25]||(s[25]=[B('<h5 class="font-weight-bold mb-3" data-v-41d44c82><i class="fab fa-google text-primary me-2" data-v-41d44c82></i> Create Google Cloud Project </h5><div class="alert alert-info" data-v-41d44c82><i class="fas fa-info-circle me-2" data-v-41d44c82></i> You&#39;ll need a Google account to create a Cloud project. </div><ol class="setup-steps" data-v-41d44c82><li class="mb-3" data-v-41d44c82> Go to <a href="https://console.cloud.google.com" target="_blank" class="text-primary" data-v-41d44c82><strong data-v-41d44c82>Google Cloud Console</strong><i class="fas fa-external-link-alt ms-1 small" data-v-41d44c82></i></a></li><li class="mb-3" data-v-41d44c82> Click the project dropdown at the top <br data-v-41d44c82><small class="text-muted" data-v-41d44c82>It usually says &quot;Select a project&quot; or shows your current project</small></li><li class="mb-3" data-v-41d44c82> Click <strong data-v-41d44c82>&quot;New Project&quot;</strong> in the top right </li><li class="mb-3" data-v-41d44c82> Name your project (e.g., &quot;Lodgeick Integration&quot;) </li><li class="mb-3" data-v-41d44c82> Click <strong data-v-41d44c82>&quot;Create&quot;</strong> and wait for the project to be created </li></ol><div class="text-center mt-4" data-v-41d44c82><img src="https://cloud.google.com/static/images/social-icon-google-cloud-1200-630.png" alt="Google Cloud" class="img-fluid rounded shadow" style="max-height:200px;" data-v-41d44c82></div>',4)])])):f("",!0),c.value===1?(l(),a("div",Ut,[...s[26]||(s[26]=[B('<h5 class="font-weight-bold mb-3" data-v-41d44c82><i class="fas fa-toggle-on text-success me-2" data-v-41d44c82></i> Enable Required APIs </h5><div class="alert alert-warning" data-v-41d44c82><i class="fas fa-exclamation-triangle me-2" data-v-41d44c82></i> Make sure your new project is selected in the project dropdown! </div><ol class="setup-steps" data-v-41d44c82><li class="mb-3" data-v-41d44c82> Go to <a href="https://console.cloud.google.com/apis/library" target="_blank" class="text-primary" data-v-41d44c82><strong data-v-41d44c82>APIs &amp; Services &gt; Library</strong><i class="fas fa-external-link-alt ms-1 small" data-v-41d44c82></i></a></li><li class="mb-3" data-v-41d44c82> Search for and enable these APIs: <div class="mt-2" data-v-41d44c82><span class="badge bg-gradient-primary me-2 mb-2" data-v-41d44c82>Gmail API</span><span class="badge bg-gradient-info me-2 mb-2" data-v-41d44c82>Google Sheets API</span><span class="badge bg-gradient-success me-2 mb-2" data-v-41d44c82>Google Drive API</span></div></li><li class="mb-3" data-v-41d44c82> For each API: <ul class="mt-2" data-v-41d44c82><li data-v-41d44c82>Click on the API name</li><li data-v-41d44c82>Click the blue <strong data-v-41d44c82>&quot;Enable&quot;</strong> button</li><li data-v-41d44c82>Wait for it to activate (takes a few seconds)</li></ul></li></ol>',3)])])):f("",!0),c.value===2?(l(),a("div",Rt,[...s[27]||(s[27]=[B('<h5 class="font-weight-bold mb-3" data-v-41d44c82><i class="fas fa-shield-alt text-warning me-2" data-v-41d44c82></i> Configure OAuth Consent Screen </h5><ol class="setup-steps" data-v-41d44c82><li class="mb-3" data-v-41d44c82> Go to <a href="https://console.cloud.google.com/apis/credentials/consent" target="_blank" class="text-primary" data-v-41d44c82><strong data-v-41d44c82>APIs &amp; Services &gt; OAuth consent screen</strong><i class="fas fa-external-link-alt ms-1 small" data-v-41d44c82></i></a></li><li class="mb-3" data-v-41d44c82> Select <strong data-v-41d44c82>&quot;External&quot;</strong> user type <br data-v-41d44c82><small class="text-muted" data-v-41d44c82>This allows you to use any Google account for testing</small></li><li class="mb-3" data-v-41d44c82> Click <strong data-v-41d44c82>&quot;Create&quot;</strong></li><li class="mb-3" data-v-41d44c82> Fill in the required fields: <div class="card mt-2 bg-light" data-v-41d44c82><div class="card-body" data-v-41d44c82><div class="mb-2" data-v-41d44c82><strong data-v-41d44c82>App name:</strong> Lodgeick</div><div class="mb-2" data-v-41d44c82><strong data-v-41d44c82>User support email:</strong> Your email</div><div class="mb-2" data-v-41d44c82><strong data-v-41d44c82>Developer contact:</strong> Your email</div></div></div></li><li class="mb-3" data-v-41d44c82> Click <strong data-v-41d44c82>&quot;Save and Continue&quot;</strong></li><li class="mb-3" data-v-41d44c82> On the &quot;Scopes&quot; page, click <strong data-v-41d44c82>&quot;Add or Remove Scopes&quot;</strong></li><li class="mb-3" data-v-41d44c82> Search for and select these scopes: <div class="card mt-2 bg-light" data-v-41d44c82><div class="card-body small" data-v-41d44c82><div class="mb-1" data-v-41d44c82><code data-v-41d44c82>https://www.googleapis.com/auth/gmail.readonly</code></div><div class="mb-1" data-v-41d44c82><code data-v-41d44c82>https://www.googleapis.com/auth/gmail.send</code></div><div class="mb-1" data-v-41d44c82><code data-v-41d44c82>https://www.googleapis.com/auth/spreadsheets</code></div><div class="mb-1" data-v-41d44c82><code data-v-41d44c82>https://www.googleapis.com/auth/drive.file</code></div></div></div></li><li class="mb-3" data-v-41d44c82> Click <strong data-v-41d44c82>&quot;Update&quot;</strong> then <strong data-v-41d44c82>&quot;Save and Continue&quot;</strong></li><li class="mb-3" data-v-41d44c82> On the &quot;Test users&quot; page, click <strong data-v-41d44c82>&quot;Add Users&quot;</strong></li><li class="mb-3" data-v-41d44c82> Add your Gmail address (the one you&#39;ll test with) </li><li class="mb-3" data-v-41d44c82> Click <strong data-v-41d44c82>&quot;Save and Continue&quot;</strong> through the remaining steps </li></ol>',2)])])):f("",!0),c.value===3?(l(),a("div",Lt,[s[34]||(s[34]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-key text-danger me-2"}),o(" Create OAuth 2.0 Credentials ")],-1)),e("ol",Nt,[s[31]||(s[31]=B('<li class="mb-3" data-v-41d44c82> Go to <a href="https://console.cloud.google.com/apis/credentials" target="_blank" class="text-primary" data-v-41d44c82><strong data-v-41d44c82>APIs &amp; Services &gt; Credentials</strong><i class="fas fa-external-link-alt ms-1 small" data-v-41d44c82></i></a></li><li class="mb-3" data-v-41d44c82> Click <strong data-v-41d44c82>&quot;Create Credentials&quot;</strong> at the top </li><li class="mb-3" data-v-41d44c82> Select <strong data-v-41d44c82>&quot;OAuth 2.0 Client ID&quot;</strong></li><li class="mb-3" data-v-41d44c82> Application type: <strong data-v-41d44c82>&quot;Web application&quot;</strong></li><li class="mb-3" data-v-41d44c82> Name: <strong data-v-41d44c82>&quot;Lodgeick Local&quot;</strong> (or any name you prefer) </li><li class="mb-3" data-v-41d44c82> Under <strong data-v-41d44c82>&quot;Authorized redirect URIs&quot;</strong>, click <strong data-v-41d44c82>&quot;Add URI&quot;</strong></li>',6)),e("li",Dt,[s[29]||(s[29]=o(" Add this exact URI: ",-1)),e("div",Et,[e("input",{type:"text",class:"form-control",value:P.value,readonly:""},null,8,Tt),e("button",{class:"btn btn-outline-secondary","aria-label":"Copy redirect URI to clipboard",onClick:s[3]||(s[3]=C=>H(P.value))},[...s[28]||(s[28]=[e("i",{class:"fas fa-copy"},null,-1)])])]),s[30]||(s[30]=e("small",{class:"text-muted"},"Click the copy button to copy the URI",-1))]),s[32]||(s[32]=e("li",{class:"mb-3"},[o(" Click "),e("strong",null,'"Create"')],-1)),s[33]||(s[33]=e("li",{class:"mb-3"},[o(" A dialog will appear showing your credentials "),e("div",{class:"alert alert-warning mt-2"},[e("i",{class:"fas fa-exclamation-triangle me-2"}),e("strong",null,"Important:"),o(" Copy both the Client ID and Client Secret - you'll need them in the next step! ")])],-1))])])):f("",!0),c.value===4?(l(),a("div",Ft,[s[40]||(s[40]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-cog text-info me-2"}),o(" Configure Lodgeick ")],-1)),s[41]||(s[41]=e("p",null,"Enter your OAuth credentials from Google Cloud Console:",-1)),e("div",Vt,[s[35]||(s[35]=e("label",{class:"form-label font-weight-bold"},[o(" Client ID "),e("span",{class:"text-danger"},"*")],-1)),R(e("input",{"onUpdate:modelValue":s[4]||(s[4]=C=>w.value=C),type:"text",class:"form-control",placeholder:"1234567890-abc123def456.apps.googleusercontent.com"},null,512),[[se,w.value]]),s[36]||(s[36]=e("small",{class:"text-muted"}," Ends with .apps.googleusercontent.com ",-1))]),e("div",Wt,[s[37]||(s[37]=e("label",{class:"form-label font-weight-bold"},[o(" Client Secret "),e("span",{class:"text-danger"},"*")],-1)),e("div",Ht,[R(e("input",{"onUpdate:modelValue":s[5]||(s[5]=C=>m.value=C),type:x.value?"text":"password",class:"form-control",placeholder:"GOCSPX-xxxxxxxxxxxxx"},null,8,Yt),[[je,m.value]]),e("button",{class:"btn btn-outline-secondary","aria-label":x.value?"Hide client secret":"Show client secret",onClick:s[6]||(s[6]=C=>x.value=!x.value)},[e("i",{class:A(x.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,Xt)]),s[38]||(s[38]=e("small",{class:"text-muted"}," Usually starts with GOCSPX- ",-1))]),w.value&&m.value?(l(),a("div",Jt,[...s[39]||(s[39]=[e("i",{class:"fas fa-check-circle me-2"},null,-1),o(' Credentials look good! Click "Save & Test Connection" to finish. ',-1)])])):f("",!0)])):f("",!0),c.value===5?(l(),a("div",Kt,[s[43]||(s[43]=e("div",{class:"icon icon-shape bg-gradient-success shadow-success mx-auto mb-4",style:{width:"80px",height:"80px"}},[e("i",{class:"fas fa-check text-white",style:{"font-size":"2.5rem"}})],-1)),s[44]||(s[44]=e("h4",{class:"font-weight-bold mb-3"},"Setup Complete!",-1)),s[45]||(s[45]=e("p",{class:"text-muted mb-4"}," Your OAuth credentials have been configured successfully. ",-1)),e("div",Qt,[s[42]||(s[42]=e("i",{class:"fas fa-lightbulb me-2"},null,-1)),o(' You can now close this wizard and click "Connect App" to authenticate with '+d(_.value)+". ",1)])])):f("",!0)])]),e("div",Zt,[c.value>0&&c.value<5?(l(),a("button",{key:0,type:"button",class:"btn btn-secondary",onClick:V},[...s[46]||(s[46]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),o(" Previous ",-1)])])):f("",!0),c.value<4?(l(),a("button",{key:1,type:"button",class:"btn btn-primary",onClick:F},[...s[47]||(s[47]=[o(" Next ",-1),e("i",{class:"fas fa-arrow-right ms-2"},null,-1)])])):f("",!0),c.value===4?(l(),a("button",{key:2,type:"button",class:"btn btn-success",onClick:W,disabled:!w.value||!m.value||$.value},[$.value?(l(),a("span",ts,[...s[48]||(s[48]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),o(" Saving... ",-1)])])):(l(),a("span",ss,[...s[49]||(s[49]=[e("i",{class:"fas fa-save me-2"},null,-1),o(" Save & Test Connection ",-1)])]))],8,es)):f("",!0),c.value===5?(l(),a("button",{key:3,type:"button",class:"btn btn-primary",onClick:M},[...s[50]||(s[50]=[e("i",{class:"fas fa-check me-2"},null,-1),o(" Done ",-1)])])):f("",!0)])])])],6)}}},ls=ne(as,[["__scopeId","data-v-41d44c82"]]),os={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},ns={class:"modal-content"},is={class:"modal-body p-4"},rs={key:0,class:"step"},ds={class:"mb-3"},us=["disabled"],cs={key:0,class:"alert alert-danger"},vs=["disabled"],ms={key:0},ps={key:1},gs={key:1,class:"step"},fs={class:"alert alert-info"},bs={class:"list-group mb-4"},hs={class:"d-flex justify-content-between align-items-start"},ys={class:"mb-1"},xs={class:"mb-1 text-muted small"},ks={class:"mt-2"},ws={class:"small"},Cs={key:0,class:"badge bg-warning text-dark"},_s={key:0,class:"alert alert-warning"},$s={class:"mb-0 mt-2"},As={class:"card mt-4"},Ss={class:"card-body"},qs={class:"row g-3"},Ps={class:"col-md-6"},js={class:"form-check"},Os={class:"col-md-6"},zs={class:"form-check"},Gs={class:"d-flex gap-2 mt-4"},Is=["disabled"],Bs={key:1,class:"mt-3 p-3 border rounded bg-light"},Ms=["disabled"],Us={key:0},Rs={key:1},Ls={key:2,class:"step"},Ns={class:"card mb-3"},Ds={class:"card-body"},Es={class:"mt-2"},Ts={class:"badge bg-primary me-2"},Fs={class:"small text-muted"},Vs={class:"card mb-3"},Ws={class:"card-body"},Hs={class:"mt-2 p-2 bg-light rounded"},Ys={class:"card mb-3"},Xs={class:"card-body"},Js={class:"input-group mt-2"},Ks=["value"],Qs={class:"d-flex gap-2 mt-4"},Zs={key:3,class:"step"},ea={class:"text-center mb-4"},ta={class:"text-muted"},sa={class:"alert alert-success"},aa={key:0,class:"alert alert-warning"},la={class:"mb-0 mt-2"},oa={class:"card bg-light mt-4"},na={class:"card-body"},ia={class:"small"},ra={class:"mb-2"},da=["href"],ua={class:"mb-2"},ca={class:"bg-white px-2 py-1 rounded"},va={key:4,class:"step"},ma={class:"mb-3"},pa={class:"mb-3"},ga={class:"input-group"},fa=["type"],ba=["disabled"],ha={key:0},ya={key:1},xa={key:5,class:"step text-center"},ka={__name:"GoogleAISetupWizard",props:{show:{type:Boolean,default:!1}},emits:["close","success"],setup(y,{emit:b}){const u=b,k=g("intent"),h=g("auto"),c=g(""),v=g(null),w=g(""),m=g(null),x=g(""),$=g(""),z=g(!1),r=g(!1),S=g(!1),_=g(!1),q=g(!1),P=g(null),G=Q(()=>window.location.origin+"/api/method/lodgeick.api.oauth.oauth_callback"),D=Z({url:"lodgeick.api.google_ai_setup.parse_intent",makeParams(){return{intent:c.value}},onSuccess(s){S.value=!1,s.success?(v.value=s,k.value="preview",P.value=null):P.value=s.error||"Failed to parse intent"},onError(s){S.value=!1,P.value=s.message||s}}),T=Z({url:"lodgeick.api.google_ai_setup.create_project",makeParams(){return{project_name:w.value,intent_data:JSON.stringify(v.value)}},onSuccess(s){_.value=!1,s.success?(m.value=s,k.value="project_created"):alert("Failed to create project: "+(s.error||"Unknown error"))},onError(s){_.value=!1,alert("Error creating project: "+(s.message||s))}}),F=Z({url:"lodgeick.api.google_ai_setup.setup_oauth_credentials",makeParams(){return{project_id:m.value.project_id,client_id:x.value,client_secret:$.value}},onSuccess(s){q.value=!1,s.success?(k.value="complete",u("success",{project:m.value,credentials:{client_id:x.value,n8n_credential_id:s.n8n_credential_id}})):alert("Failed to save credentials: "+(s.error||"Unknown error"))},onError(s){q.value=!1,alert("Error saving credentials: "+(s.message||s))}});function V(){S.value=!0,P.value=null,D.submit()}function W(){h.value==="auto"?r.value=!0:k.value="manual_instructions"}function H(){_.value=!0,T.submit()}function M(){q.value=!0,F.submit()}function E(s){navigator.clipboard.writeText(s).then(()=>{const n=event.target.closest("button").querySelector("i"),i=n.className;n.className="fas fa-check",setTimeout(()=>{n.className=i},2e3)})}function p(){k.value="intent",h.value="auto",c.value="",v.value=null,w.value="",m.value=null,x.value="",$.value="",z.value=!1,r.value=!1,P.value=null,u("close")}return(s,t)=>(l(),a("div",{class:A(["modal fade",{show:y.show,"d-block":y.show}]),tabindex:"-1",style:le({backgroundColor:y.show?"rgba(0,0,0,0.5)":""}),onClick:oe(p,["self"])},[e("div",os,[e("div",ns,[e("div",{class:"modal-header bg-gradient-ai"},[t[13]||(t[13]=e("h5",{class:"modal-title text-white font-weight-bold"},[e("i",{class:"fas fa-robot me-2"}),o(" AI-Powered Google Integration Setup ")],-1)),e("button",{type:"button",class:"btn-close btn-close-white",onClick:p})]),e("div",is,[k.value==="intent"?(l(),a("div",rs,[t[19]||(t[19]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-comment-dots text-primary me-2"}),o(" What do you want to integrate? ")],-1)),t[20]||(t[20]=e("p",{class:"text-muted"}," Describe in plain English what Google services you want to connect. Our AI will figure out which APIs and permissions you need. ",-1)),e("div",ds,[t[14]||(t[14]=e("label",{class:"form-label font-weight-bold"},"Your Integration Request",-1)),R(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=n=>c.value=n),class:"form-control",rows:"4",placeholder:"Example: I want to read and send emails from Gmail, and create spreadsheets in Google Sheets",disabled:S.value},null,8,us),[[se,c.value]]),t[15]||(t[15]=e("small",{class:"text-muted"},' Try: "Connect to Google Drive and Gmail" or "Access Google Calendar and Sheets" ',-1))]),P.value?(l(),a("div",cs,[t[16]||(t[16]=e("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),o(" "+d(P.value),1)])):f("",!0),e("button",{class:"btn btn-primary btn-lg w-100",onClick:V,disabled:!c.value||S.value},[S.value?(l(),a("span",ms,[...t[17]||(t[17]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),o(" AI is analyzing your request... ",-1)])])):(l(),a("span",ps,[...t[18]||(t[18]=[e("i",{class:"fas fa-magic me-2"},null,-1),o(" Analyze with AI ",-1)])]))],8,vs)])):f("",!0),k.value==="preview"?(l(),a("div",gs,[t[42]||(t[42]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-list-check text-success me-2"}),o(" AI Analysis Results ")],-1)),e("div",fs,[t[21]||(t[21]=e("i",{class:"fas fa-robot me-2"},null,-1)),t[22]||(t[22]=e("strong",null,"AI Reasoning:",-1)),o(" "+d(v.value.reasoning),1)]),t[43]||(t[43]=e("h6",{class:"font-weight-bold mt-4 mb-3"},"Required Google APIs:",-1)),e("div",bs,[(l(!0),a(j,null,O(v.value.apis,n=>(l(),a("div",{key:n.name,class:"list-group-item"},[e("div",hs,[e("div",null,[e("h6",ys,[t[23]||(t[23]=e("i",{class:"fab fa-google text-primary me-2"},null,-1)),o(" "+d(n.display_name),1)]),e("p",xs,d(n.description),1),e("div",ks,[(l(!0),a(j,null,O(n.scopes,i=>(l(),a("span",{key:i,class:"badge bg-light text-dark me-1 mb-1"},[e("code",ws,d(i),1)]))),128))])]),v.value.billing_apis&&v.value.billing_apis.includes(n.name)?(l(),a("span",Cs,[...t[24]||(t[24]=[e("i",{class:"fas fa-credit-card me-1"},null,-1),o(" Billing Required ",-1)])])):f("",!0)])]))),128))]),v.value.billing_required?(l(),a("div",_s,[t[26]||(t[26]=e("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[27]||(t[27]=e("strong",null,"Billing Account Required",-1)),e("p",$s,[t[25]||(t[25]=o(" The following APIs require a billing account to be linked to your Google Cloud project: ",-1)),e("strong",null,d(v.value.billing_apis.join(", ")),1)]),t[28]||(t[28]=e("p",{class:"mb-0 mt-2 small"}," Make sure your Google Cloud project has billing enabled before proceeding. ",-1))])):f("",!0),e("div",As,[e("div",Ss,[t[35]||(t[35]=e("h6",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-route text-primary me-2"}),o(" Choose Your Setup Method ")],-1)),e("div",qs,[e("div",Ps,[e("div",{class:A(["border rounded p-3 h-100",{"border-primary bg-light":h.value==="auto"}])},[e("div",js,[R(e("input",{class:"form-check-input",type:"radio",name:"setupMethod",id:"autoSetup",value:"auto","onUpdate:modelValue":t[1]||(t[1]=n=>h.value=n)},null,512),[[Se,h.value]]),t[29]||(t[29]=e("label",{class:"form-check-label font-weight-bold",for:"autoSetup"},[e("i",{class:"fas fa-magic text-primary me-2"}),o(" Automated Setup (New Project) ")],-1))]),t[30]||(t[30]=e("p",{class:"small text-muted mt-2 mb-0"}," Let Lodgeick create a new Google Cloud project and enable APIs for you automatically. ",-1)),t[31]||(t[31]=e("div",{class:"mt-2"},[e("span",{class:"badge bg-success me-1"},"Recommended"),e("span",{class:"badge bg-info"},"Fastest")],-1))],2)]),e("div",Os,[e("div",{class:A(["border rounded p-3 h-100",{"border-primary bg-light":h.value==="manual"}])},[e("div",zs,[R(e("input",{class:"form-check-input",type:"radio",name:"setupMethod",id:"manualSetup",value:"manual","onUpdate:modelValue":t[2]||(t[2]=n=>h.value=n)},null,512),[[Se,h.value]]),t[32]||(t[32]=e("label",{class:"form-check-label font-weight-bold",for:"manualSetup"},[e("i",{class:"fas fa-hand-pointer text-warning me-2"}),o(" Manual Setup (Existing Project) ")],-1))]),t[33]||(t[33]=e("p",{class:"small text-muted mt-2 mb-0"}," I already have a Google Cloud project and want to use my existing setup. ",-1)),t[34]||(t[34]=e("div",{class:"mt-2"},[e("span",{class:"badge bg-secondary"},"Advanced")],-1))],2)])])])]),e("div",Gs,[e("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=n=>k.value="intent")},[...t[36]||(t[36]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),o(" Back ",-1)])]),e("button",{class:"btn btn-primary flex-fill",onClick:W,disabled:!h.value},[t[37]||(t[37]=e("i",{class:"fas fa-arrow-right me-2"},null,-1)),o(" Continue with "+d(h.value==="auto"?"Automated":"Manual")+" Setup ",1)],8,Is)]),r.value&&h.value==="auto"?(l(),a("div",Bs,[t[40]||(t[40]=e("h6",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-folder-plus me-2"}),o(" Name Your New Project ")],-1)),R(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>w.value=n),type:"text",class:"form-control mb-3",placeholder:"e.g., My Lodgeick Integration"},null,512),[[se,w.value]]),t[41]||(t[41]=e("small",{class:"text-muted d-block mb-3"}," A unique project ID will be generated automatically ",-1)),e("button",{class:"btn btn-success w-100",onClick:H,disabled:!w.value||_.value},[_.value?(l(),a("span",Us,[...t[38]||(t[38]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),o(" Creating project and enabling APIs... ",-1)])])):(l(),a("span",Rs,[...t[39]||(t[39]=[e("i",{class:"fas fa-rocket me-2"},null,-1),o(" Create Google Cloud Project ",-1)])]))],8,Ms)])):f("",!0)])):f("",!0),k.value==="manual_instructions"?(l(),a("div",Ls,[t[53]||(t[53]=B('<h5 class="font-weight-bold mb-3" data-v-5aa547f7><i class="fas fa-list-ol text-primary me-2" data-v-5aa547f7></i> Manual Setup Instructions </h5><div class="alert alert-info" data-v-5aa547f7><i class="fas fa-info-circle me-2" data-v-5aa547f7></i> Follow these steps in your Google Cloud Console to set up the required APIs and OAuth credentials. </div><div class="card mb-3" data-v-5aa547f7><div class="card-header bg-light" data-v-5aa547f7><h6 class="mb-0 font-weight-bold" data-v-5aa547f7><i class="fas fa-project-diagram me-2" data-v-5aa547f7></i> Step 1: Use Existing or Create New Project </h6></div><div class="card-body" data-v-5aa547f7><ol class="mb-0" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com" target="_blank" class="text-primary" data-v-5aa547f7> Google Cloud Console <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Select an existing project or create a new one</li><li data-v-5aa547f7>Copy your project ID (you&#39;ll need it later)</li></ol></div></div>',3)),e("div",Ns,[t[45]||(t[45]=e("div",{class:"card-header bg-light"},[e("h6",{class:"mb-0 font-weight-bold"},[e("i",{class:"fas fa-toggle-on me-2"}),o(" Step 2: Enable Required APIs ")])],-1)),e("div",Ds,[t[44]||(t[44]=B('<ol class="mb-2" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com/apis/library" target="_blank" class="text-primary" data-v-5aa547f7> APIs &amp; Services &gt; Library <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Enable these APIs in your project:</li></ol>',1)),e("div",Es,[(l(!0),a(j,null,O(v.value.apis,n=>(l(),a("div",{key:n.name,class:"mb-2"},[e("span",Ts,d(n.display_name),1),e("code",Fs,d(n.name),1)]))),128))])])]),e("div",Vs,[t[47]||(t[47]=e("div",{class:"card-header bg-light"},[e("h6",{class:"mb-0 font-weight-bold"},[e("i",{class:"fas fa-shield-alt me-2"}),o(" Step 3: Configure OAuth Consent Screen ")])],-1)),e("div",Ws,[t[46]||(t[46]=B('<ol class="mb-0" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com/apis/credentials/consent" target="_blank" class="text-primary" data-v-5aa547f7> OAuth consent screen <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Choose &quot;External&quot; user type</li><li class="mb-2" data-v-5aa547f7>Fill in app name: <strong data-v-5aa547f7>Lodgeick</strong></li><li class="mb-2" data-v-5aa547f7>Add required scopes:</li></ol>',1)),e("div",Hs,[(l(!0),a(j,null,O(v.value.apis,n=>(l(),a("div",{key:n.name},[(l(!0),a(j,null,O(n.scopes,i=>(l(),a("code",{class:"small d-block",key:i},d(i),1))),128))]))),128))])])]),e("div",Ys,[t[50]||(t[50]=e("div",{class:"card-header bg-light"},[e("h6",{class:"mb-0 font-weight-bold"},[e("i",{class:"fas fa-key me-2"}),o(" Step 4: Create OAuth Credentials ")])],-1)),e("div",Xs,[t[49]||(t[49]=B('<ol class="mb-2" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com/apis/credentials" target="_blank" class="text-primary" data-v-5aa547f7> Credentials <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Click &quot;Create Credentials&quot; â†’ &quot;OAuth 2.0 Client ID&quot;</li><li class="mb-2" data-v-5aa547f7>Application type: <strong data-v-5aa547f7>Web application</strong></li><li class="mb-2" data-v-5aa547f7>Add authorized redirect URI:</li></ol>',1)),e("div",Js,[e("input",{type:"text",class:"form-control font-monospace",value:G.value,readonly:""},null,8,Ks),e("button",{class:"btn btn-outline-secondary",onClick:t[5]||(t[5]=n=>E(G.value))},[...t[48]||(t[48]=[e("i",{class:"fas fa-copy"},null,-1)])])])])]),e("div",Qs,[e("button",{class:"btn btn-secondary",onClick:t[6]||(t[6]=n=>k.value="preview")},[...t[51]||(t[51]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),o(" Back ",-1)])]),e("button",{class:"btn btn-primary flex-fill",onClick:t[7]||(t[7]=n=>k.value="oauth_input")},[...t[52]||(t[52]=[e("i",{class:"fas fa-arrow-right me-2"},null,-1),o(" I've Completed the Setup ",-1)])])])])):f("",!0),k.value==="project_created"?(l(),a("div",Zs,[e("div",ea,[t[56]||(t[56]=e("div",{class:"icon-shape bg-gradient-success shadow-success mx-auto mb-3",style:{width:"80px",height:"80px"}},[e("i",{class:"fas fa-check text-white",style:{"font-size":"2.5rem"}})],-1)),t[57]||(t[57]=e("h4",{class:"font-weight-bold"},"Project Created Successfully!",-1)),e("p",ta,[t[54]||(t[54]=o(" Google Cloud project ",-1)),e("strong",null,d(m.value.project_id),1),t[55]||(t[55]=o(" is ready ",-1))])]),e("div",sa,[t[58]||(t[58]=e("i",{class:"fas fa-check-circle me-2"},null,-1)),e("strong",null,d(m.value.apis_enabled.length)+" APIs Enabled:",1),o(" "+d(m.value.apis_enabled.join(", ")),1)]),m.value.apis_failed&&m.value.apis_failed.length>0?(l(),a("div",aa,[t[59]||(t[59]=e("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[60]||(t[60]=e("strong",null,"Some APIs failed to enable:",-1)),e("ul",la,[(l(!0),a(j,null,O(m.value.apis_failed,n=>(l(),a("li",{key:n.api},d(n.api)+": "+d(n.error),1))),128))])])):f("",!0),e("div",oa,[e("div",na,[t[68]||(t[68]=e("h6",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-key text-warning me-2"}),o(" Next: Create OAuth Credentials ")],-1)),t[69]||(t[69]=e("p",{class:"small text-muted mb-3"}," You need to manually create OAuth credentials in Google Cloud Console. Follow these steps: ",-1)),e("ol",ia,[e("li",ra,[t[62]||(t[62]=o(" Go to ",-1)),e("a",{href:`https://console.cloud.google.com/apis/credentials?project=${m.value.project_id}`,target:"_blank",class:"text-primary"},[...t[61]||(t[61]=[o(" Google Cloud Console - Credentials ",-1),e("i",{class:"fas fa-external-link-alt ms-1"},null,-1)])],8,da)]),t[65]||(t[65]=e("li",{class:"mb-2"},"Configure OAuth consent screen (if not done already)",-1)),t[66]||(t[66]=e("li",{class:"mb-2"},"Create OAuth 2.0 Client ID (Web application)",-1)),e("li",ua,[t[64]||(t[64]=o(" Add redirect URI: ",-1)),e("code",ca,d(G.value),1),e("button",{class:"btn btn-sm btn-outline-secondary ms-2",onClick:t[8]||(t[8]=n=>E(G.value))},[...t[63]||(t[63]=[e("i",{class:"fas fa-copy"},null,-1)])])]),t[67]||(t[67]=e("li",null,"Copy the Client ID and Client Secret",-1))])])]),e("button",{class:"btn btn-primary w-100 mt-3",onClick:t[9]||(t[9]=n=>k.value="oauth_input")},[...t[70]||(t[70]=[e("i",{class:"fas fa-arrow-right me-2"},null,-1),o(" I've Created OAuth Credentials ",-1)])])])):f("",!0),k.value==="oauth_input"?(l(),a("div",va,[t[75]||(t[75]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-key text-primary me-2"}),o(" Enter OAuth Credentials ")],-1)),e("div",ma,[t[71]||(t[71]=e("label",{class:"form-label font-weight-bold"},[o(" Client ID "),e("span",{class:"text-danger"},"*")],-1)),R(e("input",{"onUpdate:modelValue":t[10]||(t[10]=n=>x.value=n),type:"text",class:"form-control",placeholder:"123456789-abc123def456.apps.googleusercontent.com"},null,512),[[se,x.value]])]),e("div",pa,[t[72]||(t[72]=e("label",{class:"form-label font-weight-bold"},[o(" Client Secret "),e("span",{class:"text-danger"},"*")],-1)),e("div",ga,[R(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>$.value=n),type:z.value?"text":"password",class:"form-control",placeholder:"GOCSPX-xxxxxxxxxxxxx"},null,8,fa),[[je,$.value]]),e("button",{class:"btn btn-outline-secondary",onClick:t[12]||(t[12]=n=>z.value=!z.value)},[e("i",{class:A(z.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),e("button",{class:"btn btn-success w-100",onClick:M,disabled:!x.value||!$.value||q.value},[q.value?(l(),a("span",ha,[...t[73]||(t[73]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),o(" Saving & Syncing to n8n... ",-1)])])):(l(),a("span",ya,[...t[74]||(t[74]=[e("i",{class:"fas fa-save me-2"},null,-1),o(" Save & Sync to n8n ",-1)])]))],8,ba)])):f("",!0),k.value==="complete"?(l(),a("div",xa,[t[77]||(t[77]=B('<div class="icon-shape bg-gradient-success shadow-success mx-auto mb-4" style="width:100px;height:100px;" data-v-5aa547f7><i class="fas fa-check-double text-white" style="font-size:3rem;" data-v-5aa547f7></i></div><h4 class="font-weight-bold mb-3" data-v-5aa547f7>Setup Complete!</h4><p class="text-muted mb-4" data-v-5aa547f7> Your Google Cloud integration is ready to use. Credentials have been synced to n8n. </p><div class="alert alert-success" data-v-5aa547f7><i class="fas fa-info-circle me-2" data-v-5aa547f7></i> You can now use these credentials in your n8n workflows and Lodgeick integrations. </div>',4)),e("button",{class:"btn btn-primary btn-lg",onClick:p},[...t[76]||(t[76]=[e("i",{class:"fas fa-check me-2"},null,-1),o(" Done ",-1)])])])):f("",!0)])])])],6))}},wa=ne(ka,[["__scopeId","data-v-5aa547f7"]]),Ca={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},_a={class:"p-6"},$a={class:"flex items-center justify-between"},Aa={class:"flex items-center gap-4"},Sa={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-12"},qa={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},Pa={class:"flex items-start justify-between mb-4"},ja={class:"flex items-center gap-4"},Oa={class:"text-xl font-bold text-gray-900"},za={class:"text-sm text-gray-500"},Ga={key:0,class:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},Ia={key:1,class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ba={key:2,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ma={class:"space-y-3"},Ua={class:"flex items-center gap-3"},Ra={class:"flex-1"},La=["onClick"],Na={key:1,class:"text-xs text-green-600"},Da={class:"flex items-center gap-3"},Ea={class:"flex-1"},Ta=["onClick","disabled"],Fa={key:1,class:"text-xs text-green-600"},Va={key:2,class:"text-xs text-gray-500"},Wa={class:"flex items-center gap-3"},Ha={class:"flex-1"},Ya=["onClick","disabled"],Xa={key:1,class:"text-xs text-green-600"},Ja={key:2,class:"text-xs text-gray-500"},Ka={class:"flex justify-between items-center"},Qa={class:"flex gap-3"},Za={__name:"IntegrateView",setup(y){const b=Me(),u=Ne(),k=()=>{Re.logout.submit()},h=g(!1),c=g(!1),v=g(""),w=g(null),m=g(null),x=g({}),$=g({}),z=g({}),r=s=>u.availableApps.find(t=>t.id===s),S=s=>$.value[s]===!0,_=s=>z.value[s]===!0,q=s=>_(s)&&x.value[s]?"connected":S(s)?"credentials":"not-connected",P=Q(()=>u.connectedApps.every(s=>_(s)&&x.value[s])),G=s=>{const t=r(s);t&&(v.value=t.oauth_provider||s,h.value=!0)},D=s=>{h.value=!1;const t=u.connectedApps.find(n=>{const i=r(n);return i&&(i.oauth_provider===s.provider||i.id===s.provider)});t&&($.value[t]=!0)},T=()=>{h.value=!1,c.value=!0},F=s=>{c.value=!1;const t=u.connectedApps.find(n=>{const i=r(n);return i&&(i.oauth_provider==="google"||i.id==="google")});t&&($.value[t]=!0),alert("Google Cloud integration setup complete! You can now authorize access.")},V=s=>ee(this,null,function*(){const t=r(s);if(!t)return;w.value=s;const n=t.oauth_provider||s;try{const i=yield H.submit({provider:n});i.success&&i.authorization_url&&(window.location.href=i.authorization_url)}catch(i){console.error("Failed to initiate OAuth:",i),alert("Failed to start authorization. Please check your credentials.")}finally{w.value=null}}),W=s=>ee(this,null,function*(){const t=r(s);if(t){m.value=s,t.oauth_provider;try{yield new Promise(n=>setTimeout(n,1500)),x.value[s]=!0}catch(n){console.error("Connection test failed:",n),alert("Connection test failed. Please try authorizing again.")}finally{m.value=null}}}),H=Z({url:"lodgeick.api.oauth.initiate_oauth",makeParams(s){return{provider:s.provider,redirect_uri:window.location.origin+"/oauth/callback"}}}),M=()=>{u.nextStep(),b.push({name:"Configure"})},E=()=>{u.completeOnboarding(),b.push({name:"Dashboard"})},p=()=>{u.previousStep(),b.push({name:"ConnectApps"})};return ae(()=>{if(u.connectedApps.length===0){b.push({name:"ConnectApps"});return}const s=new URLSearchParams(window.location.search),t=s.get("oauth_success"),n=s.get("provider");if(t==="true"&&n){const i=u.connectedApps.find(L=>{const I=r(L);return I&&(I.oauth_provider===n||I.id===n)});i&&(z.value[i]=!0,$.value[i]=!0),window.history.replaceState({},document.title,window.location.pathname)}}),(s,t)=>{const n=Ue("router-link");return l(),a("div",Ca,[e("div",_a,[e("div",$a,[U(n,{to:"/",class:"inline-flex items-center gap-3 group no-underline"},{default:te(()=>[...t[2]||(t[2]=[e("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-xl"},"L")],-1),e("span",{class:"text-2xl font-bold text-gray-900"},"Lodgeick",-1)])]),_:1}),e("div",Aa,[U(n,{to:"/account/profile",class:"text-gray-700 hover:text-blue-600 font-medium transition-colors no-underline flex items-center gap-2"},{default:te(()=>[...t[3]||(t[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),o(" My Account ",-1)])]),_:1}),e("button",{onClick:k,class:"text-gray-700 hover:text-red-600 font-medium transition-colors flex items-center gap-2"},[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),o(" Log Out ",-1)])])])])]),e("div",Sa,[U(De,{"current-step":qe(u).currentStep,"total-steps":4},null,8,["current-step"]),t[13]||(t[13]=e("div",{class:"text-center mb-12"},[e("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Connect Your Apps "),e("p",{class:"text-xl text-gray-600 max-w-2xl mx-auto"}," Set up OAuth credentials and authorize each app to enable seamless integrations ")],-1)),e("div",qa,[(l(!0),a(j,null,O(qe(u).connectedApps,i=>{var L,I,Y,X;return l(),a("div",{key:i,class:"bg-white rounded-2xl shadow-lg p-6 transition-all duration-200 hover:shadow-xl"},[e("div",Pa,[e("div",ja,[e("div",{class:A(["w-16 h-16 rounded-lg flex items-center justify-center text-3xl",(L=r(i))==null?void 0:L.color])},d((I=r(i))==null?void 0:I.icon),3),e("div",null,[e("h3",Oa,d((Y=r(i))==null?void 0:Y.name),1),e("p",za,d((X=r(i))==null?void 0:X.description),1)])]),e("div",{class:A(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",q(i)==="connected"?"bg-green-100":q(i)==="credentials"?"bg-yellow-100":"bg-gray-100"])},[q(i)==="connected"?(l(),a("svg",Ga,[...t[5]||(t[5]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):q(i)==="credentials"?(l(),a("svg",Ia,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"},null,-1)])])):(l(),a("svg",Ba,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])]))],2)]),e("div",Ma,[e("div",Ua,[e("div",{class:A(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",S(i)?"bg-green-500 text-white":"bg-gray-300 text-gray-700"])},d(S(i)?"âœ“":"1"),3),e("div",Ra,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-900"}," OAuth Credentials ",-1)),S(i)?(l(),a("p",Na," Configured ")):(l(),a("button",{key:0,onClick:J=>G(i),class:"text-xs text-blue-600 hover:text-blue-700 font-medium"}," Set up credentials â†’ ",8,La))])]),e("div",Da,[e("div",{class:A(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",_(i)?"bg-green-500 text-white":S(i)?"bg-blue-500 text-white":"bg-gray-300 text-gray-700"])},d(_(i)?"âœ“":"2"),3),e("div",Ea,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-900"}," Authorize Access ",-1)),S(i)&&!_(i)?(l(),a("button",{key:0,onClick:J=>V(i),disabled:w.value===i,class:"text-xs text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50"},d(w.value===i?"Authorizing...":"Authorize now â†’"),9,Ta)):_(i)?(l(),a("p",Fa," Authorized ")):(l(),a("p",Va," Complete step 1 first "))])]),e("div",Wa,[e("div",{class:A(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",x.value[i]?"bg-green-500 text-white":_(i)?"bg-blue-500 text-white":"bg-gray-300 text-gray-700"])},d(x.value[i]?"âœ“":"3"),3),e("div",Ha,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-900"}," Test Connection ",-1)),_(i)&&!x.value[i]?(l(),a("button",{key:0,onClick:J=>W(i),disabled:m.value===i,class:"text-xs text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50"},d(m.value===i?"Testing...":"Test now â†’"),9,Ya)):x.value[i]?(l(),a("p",Xa," Connection verified ")):(l(),a("p",Ja," Complete step 2 first "))])])])])}),128))]),e("div",Ka,[U(Pe,{label:"Back",onClick:p},{icon:te(()=>[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),e("div",Qa,[U(Pe,{label:"Skip for Now",onClick:E}),U(Ee,{label:"Continue",disabled:!P.value,onClick:M},{iconRight:te(()=>[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["disabled"])])])]),U(ls,{show:h.value,provider:v.value,onClose:t[0]||(t[0]=i=>h.value=!1),onSuccess:D,onLaunchAIWizard:T},null,8,["show","provider"]),U(wa,{show:c.value,onClose:t[1]||(t[1]=i=>c.value=!1),onSuccess:F},null,8,["show"])])}}},ol=ne(Za,[["__scopeId","data-v-5ee591ec"]]);export{ol as default};
//# sourceMappingURL=IntegrateView-C4s73Tfi.js.map
