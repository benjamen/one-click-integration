var h=(a,d,r)=>new Promise((l,c)=>{var g=i=>{try{n(r.next(i))}catch(e){c(e)}},s=i=>{try{n(r.throw(i))}catch(e){c(e)}},n=i=>i.done?l(i.value):Promise.resolve(i.value).then(g,s);n((r=r.apply(a,d)).next())});import{y as v,c as m,d as u,e as t,ao as p,z as b,A as _,an as k,aG as $,r as x,a8 as w,a4 as C,F as D,aF as I,a3 as V}from"./vendor-_TR5XaLe.js";import{_ as A}from"./AccountCard-CjOeAlWN.js";import{_ as B}from"./ConfirmModal-RgrHIe_3.js";import"./vendor-libs-4IhO_gij.js";import"./frappe-ui-DfnPWH3r.js";const M={class:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-shadow"},N={class:"flex items-center space-x-4 flex-1 min-w-0"},T={class:"flex-shrink-0 w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg shadow-md"},j={class:"flex-1 min-w-0"},S={class:"text-sm font-semibold text-gray-900 truncate"},F={class:"text-xs text-gray-500 truncate"},z={class:"flex items-center mt-1 space-x-2"},E={key:0,class:"text-xs text-gray-400"},G={class:"flex items-center space-x-2 ml-4"},L={__name:"IntegrationItem",props:{integration:{type:Object,required:!0}},emits:["disconnect","configure"],setup(a){const d=a,r=v(()=>(d.integration.app_name||"A")[0].toUpperCase()),l=v(()=>{const s={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",error:"bg-red-100 text-red-800"};return s[d.integration.status]||s.inactive}),c=v(()=>({active:"Connected",inactive:"Inactive",error:"Error"})[d.integration.status]||"Unknown"),g=s=>{if(!s)return"";const n=new Date(s),e=Math.floor((new Date-n)/(1e3*60*60*24));return e===0?"today":e===1?"yesterday":e<7?`${e} days ago`:e<30?`${Math.floor(e/7)} weeks ago`:e<365?`${Math.floor(e/30)} months ago`:n.toLocaleDateString()};return(s,n)=>(u(),m("div",M,[t("div",N,[t("div",T,p(r.value),1),t("div",j,[t("h4",S,p(a.integration.app_name),1),t("p",F,p(a.integration.description||"No description"),1),t("div",z,[t("span",{class:_(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",l.value])},[n[2]||(n[2]=t("svg",{class:"w-2 h-2 mr-1",fill:"currentColor",viewBox:"0 0 8 8"},[t("circle",{cx:"4",cy:"4",r:"3"})],-1)),k(" "+p(c.value),1)],2),a.integration.connected_at?(u(),m("span",E," Connected "+p(g(a.integration.connected_at)),1)):b("",!0)])])]),t("div",G,[a.integration.status==="active"?(u(),m("button",{key:0,onClick:n[0]||(n[0]=i=>s.$emit("configure",a.integration)),class:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"}," Configure ")):b("",!0),t("button",{onClick:n[1]||(n[1]=i=>s.$emit("disconnect",a.integration)),class:"px-3 py-1.5 text-xs font-medium text-red-700 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"}," Disconnect ")])]))}},U={class:"space-y-6"},Y={class:"flex items-center justify-between"},q={key:0,class:"text-center py-12"},O={class:"mt-6"},P={key:1,class:"space-y-3"},W={__name:"IntegrationsView",setup(a){const d=$(),r=x([{id:1,app_name:"Google Sheets",description:"Spreadsheet and data management",status:"active",connected_at:"2025-01-15"},{id:2,app_name:"Slack",description:"Team communication platform",status:"active",connected_at:"2025-02-01"},{id:3,app_name:"Xero",description:"Accounting software",status:"active",connected_at:"2025-02-20"}]),l=x(!1),c=x(null),g=x(!1),s=e=>{c.value=e,l.value=!0},n=e=>{console.log("Configure integration:",e),d.push({name:"Integrate"})},i=()=>h(this,null,function*(){g.value=!0;try{yield new Promise(e=>setTimeout(e,1e3)),r.value=r.value.filter(e=>e.id!==c.value.id),l.value=!1,c.value=null}catch(e){console.error("Error disconnecting:",e),alert("Failed to disconnect integration")}finally{g.value=!1}});return(e,o)=>{var y;return u(),m("div",U,[t("div",Y,[o[3]||(o[3]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Integrations"),t("p",{class:"mt-1 text-sm text-gray-500"},"Manage your connected apps and services")],-1)),t("button",{onClick:o[0]||(o[0]=f=>e.$router.push("/")),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"}," Add Integration ")]),w(A,{title:"Connected Apps",description:`You have ${r.value.length} active integrations`},{default:C(()=>[r.value.length===0?(u(),m("div",q,[o[4]||(o[4]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),o[5]||(o[5]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No integrations",-1)),o[6]||(o[6]=t("p",{class:"mt-1 text-sm text-gray-500"},"Get started by connecting your first app.",-1)),t("div",O,[t("button",{onClick:o[1]||(o[1]=f=>e.$router.push("/")),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700"}," Browse Apps ")])])):(u(),m("div",P,[(u(!0),m(D,null,I(r.value,f=>(u(),V(L,{key:f.id,integration:f,onDisconnect:s,onConfigure:n},null,8,["integration"]))),128))]))]),_:1},8,["description"]),w(B,{modelValue:l.value,"onUpdate:modelValue":o[2]||(o[2]=f=>l.value=f),title:"Disconnect Integration",description:`Are you sure you want to disconnect ${(y=c.value)==null?void 0:y.app_name}?`,message:"This will stop all workflows using this integration. You can reconnect at any time.",variant:"danger",confirmText:"Disconnect",loading:g.value,onConfirm:i},null,8,["modelValue","description","loading"])])}}};export{W as default};
//# sourceMappingURL=IntegrationsView-BgRrO9ck.js.map
