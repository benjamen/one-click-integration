import{ar as h,aO as p,r as n,o as v,c,d as i,e,z as b,n as f,ao as y}from"./vendor-C-giSDFQ.js";import{g}from"./frappe-ui-BGcfCLpI.js";import"./vendor-libs-DnVO2VCf.js";const _={class:"oauth-callback-page flex items-center justify-center min-vh-100 bg-gradient-dark"},w={class:"container"},x={class:"flex justify-center"},k={class:"col-md-6"},C={class:"card shadow-lg"},O={class:"card-body p-5 text-center"},A={key:0},S={key:1},q={key:2},z={class:"text-gray-600 mb-4"},B={__name:"OAuthCallback",setup(N){const l=p(),a=n(!0),r=n(!1),o=n(null),u=g({url:"lodgeick.api.oauth.oauth_callback",makeParams(s){return{code:s.code,state:s.state,provider:s.provider}},onSuccess(s){a.value=!1,r.value=!0,setTimeout(()=>{window.close()},2e3)},onError(s){a.value=!1,o.value=s.message||"Failed to complete OAuth flow"}});v(()=>{const s=l.query.code,t=l.query.state,d=l.query.provider;if(!s||!t||!d){a.value=!1,o.value="Missing OAuth parameters";return}u.submit({code:s,state:t,provider:d})});function m(){window.close()}return(s,t)=>(i(),c("div",_,[e("div",w,[e("div",x,[e("div",k,[e("div",C,[e("div",O,[a.value?(i(),c("div",A,[...t[0]||(t[0]=[e("div",{class:"spinner-border text-primary mb-3",style:{width:"3rem",height:"3rem"},role:"status"},[e("span",{class:"visually-hidden"},"Processing...")],-1),e("h4",{class:"font-bold mb-2"},"Connecting your account",-1),e("p",{class:"text-gray-600"},"Please wait while we complete the authentication...",-1)])])):r.value?(i(),c("div",S,[...t[1]||(t[1]=[f('<div class="icon icon-shape bg-gradient-success shadow-success mx-auto mb-4" style="width:80px;height:80px;" data-v-6b27c81a><i class="fas fa-check text-white" style="font-size:2rem;" data-v-6b27c81a></i></div><h4 class="font-bold mb-2" data-v-6b27c81a>Successfully Connected!</h4><p class="text-gray-600 mb-4" data-v-6b27c81a>Your account has been linked successfully.</p><p class="text-sm text-gray-600" data-v-6b27c81a>This window will close automatically...</p>',4)])])):o.value?(i(),c("div",q,[t[2]||(t[2]=e("div",{class:"icon icon-shape bg-gradient-danger shadow-danger mx-auto mb-4",style:{width:"80px",height:"80px"}},[e("i",{class:"fas fa-times text-white",style:{"font-size":"2rem"}})],-1)),t[3]||(t[3]=e("h4",{class:"font-bold mb-2"},"Connection Failed",-1)),e("p",z,y(o.value),1),e("button",{onClick:m,class:"btn btn-primary"}," Close Window ")])):b("",!0)])])])])])]))}},E=h(B,[["__scopeId","data-v-6b27c81a"]]);export{E as default};
//# sourceMappingURL=OAuthCallback-BkEV8Jd-.js.map
