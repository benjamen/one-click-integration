import{_ as C}from"./BaseAlert-CyEeI-A0.js";import{aZ as B,f as l,g as V,U as E,a as k,o as d,b as e,aF as I,i as m,h as g,e as f,t as p,w as r,D as i}from"./vendor-D4UtxinR.js";import{_ as M,c as N}from"./frappe-ui-BJqOB8bf.js";const R={class:"auth-page"},S={class:"container"},j={class:"flex justify-center"},z={class:"col-lg-5 col-md-7"},D={class:"card shadow-lg border-0 mt-5"},H={class:"card-body p-4 text-center"},T={class:"mb-4"},F={class:"font-bold text-dark mb-3"},L={class:"d-grid gap-2"},U=["disabled"],$={key:0,class:"spinner-border spinner-border-sm mr-2"},q={__name:"EmailVerification",setup(A){const h=B(),_=l(h.query.email||"your email"),s=l(!1),c=l(!1),o=l(""),a=l(0);let n=null;const y=N({url:"frappe.core.doctype.user.user.sign_up",makeParams(){return{email:_.value,resend:1}},onSuccess(){s.value=!1,c.value=!0,o.value="",a.value=60,w(),setTimeout(()=>{c.value=!1},5e3)},onError(u){s.value=!1,o.value=u.messages?u.messages.join(", "):"Failed to resend email",setTimeout(()=>{o.value=""},5e3)}});function x(){a.value>0||(s.value=!0,c.value=!1,o.value="",y.submit())}function w(){n&&clearInterval(n),n=setInterval(()=>{a.value--,a.value<=0&&clearInterval(n)},1e3)}return V(()=>{n&&clearInterval(n)}),(u,t)=>{const v=C,b=E("router-link");return d(),k("div",R,[e("div",S,[e("div",j,[e("div",z,[e("div",D,[t[6]||(t[6]=I('<div class="card-header bg-gradient-primary p-4 text-center" data-v-856acdbc><div class="mb-3" data-v-856acdbc><svg class="verification-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-856acdbc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-856acdbc></path></svg></div><h3 class="text-white font-bold mb-0" data-v-856acdbc>Check Your Email</h3></div>',1)),e("div",H,[e("div",T,[t[0]||(t[0]=e("p",{class:"text-gray-600 mb-3"}," We've sent a verification link to: ",-1)),e("p",F,p(_.value),1),t[1]||(t[1]=e("p",{class:"text-gray-600 text-sm"}," Click the link in the email to verify your account and complete your registration. ",-1))]),m(v,{variant:"info","hide-icon":"",class:"mb-4"},{default:r(()=>[...t[2]||(t[2]=[e("svg",{class:"info-icon",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1),e("small",null,"Didn't receive the email? Check your spam folder or wait a few minutes.",-1)])]),_:1}),e("div",L,[e("button",{onClick:x,class:"btn btn-outline-primary",disabled:s.value||a.value>0},[s.value?(d(),k("span",$)):f("",!0),i(" "+p(s.value?"Sending...":a.value>0?`Resend in ${a.value}s`:"Resend Email"),1)],8,U),m(b,{to:"/account/login",class:"btn btn-primary no-underline"},{default:r(()=>[...t[3]||(t[3]=[i(" Continue to Login ",-1)])]),_:1}),m(b,{to:"/",class:"btn btn-link text-gray-600 no-underline"},{default:r(()=>[...t[4]||(t[4]=[e("svg",{class:"back-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),i(" Back to Home ",-1)])]),_:1})]),c.value?(d(),g(v,{key:0,variant:"success",class:"mt-3"},{default:r(()=>[...t[5]||(t[5]=[i(" âœ“ Verification email sent successfully! ",-1)])]),_:1})):f("",!0),o.value?(d(),g(v,{key:1,variant:"danger",class:"mt-3"},{default:r(()=>[i(p(o.value),1)]),_:1})):f("",!0)])])])])])])}}},Z=M(q,[["__scopeId","data-v-856acdbc"]]);export{Z as default};
//# sourceMappingURL=EmailVerification-YL5dZoGS.js.map
