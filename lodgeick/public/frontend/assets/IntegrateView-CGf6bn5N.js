var Z=(P,I,g)=>new Promise((x,c)=>{var f=p=>{try{k(g.next(p))}catch(h){c(h)}},y=p=>{try{k(g.throw(p))}catch(h){c(h)}},k=p=>p.done?x(p.value):Promise.resolve(p.value).then(f,y);k((g=g.apply(P,I)).next())});import{_ as oe,k as v,m as se,A as Se,l as K,B as Q,c as a,o as l,a as e,e as n,t as r,F as z,f as G,j as b,q as _,n as ae,v as le,b as U,x as D,y as te,C as Ae,D as Ce,u as qe,r as je,d as N,w as ee,p as _e,s as Pe}from"./index-DjjPnmvj.js";import{c as ze,u as Ge}from"./onboarding-BggVQuq9.js";import{_ as Ie,a as $e}from"./SecondaryButton-DSnt4GxP.js";import{_ as Oe}from"./PrimaryButton-f_OWv-yG.js";const Me={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},Ue={class:"modal-content"},Re={class:"modal-header bg-gradient-primary"},Ne={class:"modal-title text-white font-weight-bold"},De={class:"modal-body p-4"},Ee={class:"row mb-4"},Le={class:"col-12"},Te={class:"d-flex justify-content-between align-items-center"},Be={key:0,class:"fas fa-check"},We={key:1},Ve={class:"d-block text-muted"},Fe={class:"step-content"},Ye={key:0,class:"step"},He={class:"text-center text-muted mb-4"},Xe={class:"row g-4"},Je={key:0,class:"col-md-4"},Ke={class:"card-body text-center p-4"},Qe={class:"card-title font-weight-bold"},Ze={class:"card-text text-muted small"},et={class:"mt-3"},tt={class:"badge bg-success me-1"},st={class:"text-start"},at={class:"small text-muted mb-2",style:{"font-size":"0.85rem"}},lt={class:"small text-muted",style:{"font-size":"0.85rem"}},ot={key:1,class:"col-md-4"},nt={class:"card-body text-center p-4 position-relative"},it={key:0,class:"position-absolute top-0 end-0 p-2"},dt={class:"badge bg-warning"},rt={class:"card-title font-weight-bold"},ut={class:"card-text text-muted small"},ct={class:"mt-3"},vt={key:0,class:"badge bg-success me-1"},mt={class:"badge bg-primary"},bt={key:1,class:"alert alert-warning small mb-2"},pt={class:"text-start"},gt={class:"small text-muted mb-2",style:{"font-size":"0.85rem"}},ft={key:2,class:"mt-3"},ht={class:"card-body text-center p-4"},yt={class:"card-title font-weight-bold"},xt={class:"card-text text-muted small"},kt={class:"mt-3"},wt={class:"badge bg-info"},Ct={class:"text-start"},_t={class:"small text-muted mb-2",style:{"font-size":"0.85rem"}},$t={class:"text-center mt-4"},At=["disabled"],St={key:1,class:"step"},qt={key:2,class:"step"},jt={key:3,class:"step"},Pt={key:4,class:"step"},zt={class:"setup-steps"},Gt={class:"mb-3"},It={class:"input-group mt-2"},Ot=["value"],Mt={key:5,class:"step"},Ut={class:"mb-3"},Rt={class:"mb-3"},Nt={class:"input-group"},Dt=["type"],Et={key:0,class:"alert alert-success"},Lt={key:6,class:"step text-center"},Tt={class:"alert alert-info"},Bt={class:"modal-footer"},Wt=["disabled"],Vt={key:0},Ft={key:1},Yt={__name:"OAuthSetupWizard",props:{show:{type:Boolean,default:!1},provider:{type:String,required:!0}},emits:["close","success","launchAIWizard"],setup(P,{emit:I}){const g=P,x=I,c=v(0),f=v(null),y=v(""),k=v(""),p=v(!1),h=v(!1),S=v(!0),u=v(null),$=v(null);v(null),se(()=>Z(this,null,function*(){try{S.value=!0;const m=yield ze("lodgeick.api.oauth_tiers.get_tier_config",{provider:g.provider});u.value=m}catch(m){$.value=`Failed to load setup options: ${m.message}`}finally{S.value=!1}})),Se(()=>g.show,m=>{m&&!u.value&&se()});const C=K(()=>({google:"Google (Gmail, Sheets, Drive)",xero:"Xero",slack:"Slack",microsoft:"Microsoft 365",hubspot:"HubSpot",salesforce:"Salesforce",stripe:"Stripe"})[g.provider]||g.provider),A=K(()=>{var s,o;if(!f.value||!u.value)return"";const m=(o=(s=u.value)==null?void 0:s.tiers)==null?void 0:o[f.value];return(m==null?void 0:m.label)||f.value}),q=K(()=>window.location.origin+"/oauth/callback"),j=[{title:"Create Project"},{title:"Enable APIs"},{title:"Consent Screen"},{title:"Create Credentials"},{title:"Configure"},{title:"Complete"}],O=Q({url:"lodgeick.api.oauth.save_user_oauth_setup",makeParams(m){return m!=null&&m.use_default?{provider:g.provider,tier:"default",use_default:!0}:{provider:g.provider,tier:f.value||"manual",client_id:y.value,client_secret:k.value}},onSuccess(m){h.value=!1,m.ready_to_connect&&(c.value=5),x("success",{provider:g.provider,tier:f.value,ready_to_connect:m.ready_to_connect})},onError(m){h.value=!1,alert(`Failed to save credentials: ${m.message||m}`)}});function T(){f.value==="default"?(h.value=!0,O.submit({provider:g.provider,tier:"default",use_default:!0})):f.value==="ai"?(x("launchAIWizard"),R()):c.value=1}function B(){c.value<j.length-1&&c.value++}function W(){c.value>0&&c.value--}function V(){if(!y.value||!k.value){alert("Please enter both Client ID and Client Secret");return}h.value=!0,O.submit()}function F(m){navigator.clipboard.writeText(m).then(()=>{const o=event.target.closest("button").querySelector("i");o.className="fas fa-check",setTimeout(()=>{o.className="fas fa-copy"},2e3)})}function R(){c.value=0,f.value=null,y.value="",k.value="",p.value=!1,x("close")}function Y(){var o,t,i;const m=((i=(t=(o=u.value)==null?void 0:o.tiers)==null?void 0:t.ai)==null?void 0:i.upgrade_tier)||"Pro",s=`Upgrade to ${m} to unlock AI-powered OAuth setup.

With ${m}, you get:
â€¢ Unlimited API quota
â€¢ AI-powered setup (2 minutes)
â€¢ Access to all APIs
â€¢ Priority support

Contact support to upgrade your account.`;alert(s)}return(m,s)=>{var o,t,i,d,E,M,H,X,J,ne,ie,de,re,ue,ce,ve,me,be,pe,ge,fe,he,ye,xe,ke,we;return l(),a("div",{class:_(["modal fade",{show:P.show,"d-block":P.show}]),tabindex:"-1",style:ae({backgroundColor:P.show?"rgba(0,0,0,0.5)":""}),onClick:le(R,["self"])},[e("div",Me,[e("div",Ue,[e("div",Re,[e("h5",Ne,[s[7]||(s[7]=e("i",{class:"fas fa-magic me-2"},null,-1)),n(" OAuth Setup Wizard - "+r(C.value),1)]),e("button",{type:"button",class:"btn-close btn-close-white",onClick:R})]),e("div",De,[e("div",Ee,[e("div",Le,[e("div",Te,[(l(),a(z,null,G(j,(w,L)=>e("div",{key:L,class:"flex-fill text-center position-relative"},[e("div",{class:_(["step-circle mx-auto mb-2",{active:c.value===L,completed:c.value>L}])},[c.value>L?(l(),a("i",Be)):(l(),a("span",We,r(L+1),1))],2),e("small",Ve,r(w.title),1),L<j.length-1?(l(),a("div",{key:0,class:_(["step-line",{completed:c.value>L}])},null,2)):b("",!0)])),64))])])]),e("div",Fe,[c.value===0?(l(),a("div",Ye,[s[24]||(s[24]=e("h5",{class:"font-weight-bold mb-3 text-center"},[e("i",{class:"fas fa-route text-primary me-2"}),n(" Choose Your Setup Method ")],-1)),e("p",He," Select how you'd like to set up your "+r(C.value)+" integration ",1),e("div",Xe,[(i=(t=(o=u.value)==null?void 0:o.tiers)==null?void 0:t.default)!=null&&i.enabled?(l(),a("div",Je,[e("div",{class:_(["card h-100 setup-option",{"border-primary selected":f.value==="default"}]),onClick:s[0]||(s[0]=w=>f.value="default"),style:{cursor:"pointer"}},[e("div",Ke,[s[11]||(s[11]=e("div",{class:"mb-3"},[e("i",{class:"fas fa-bolt fa-3x text-warning"})],-1)),e("h5",Qe,r(u.value.tiers.default.icon)+" "+r(u.value.tiers.default.label),1),e("p",Ze,r(u.value.tiers.default.description),1),e("div",et,[e("span",tt,r(u.value.tiers.default.setup_time),1),s[8]||(s[8]=e("span",{class:"badge bg-info"},"No Setup",-1))]),s[12]||(s[12]=e("hr",{class:"my-3"},null,-1)),e("div",st,[s[9]||(s[9]=e("div",{class:"small text-success mb-2"},[e("i",{class:"fas fa-check-circle me-1"}),n(),e("strong",null,"Pros:")],-1)),e("ul",at,[(l(!0),a(z,null,G(u.value.tiers.default.advantages.slice(0,3),w=>(l(),a("li",{key:w},r(w),1))),128))]),s[10]||(s[10]=e("div",{class:"small text-warning mb-2"},[e("i",{class:"fas fa-exclamation-circle me-1"}),n(),e("strong",null,"Limits:")],-1)),e("ul",lt,[(l(!0),a(z,null,G(u.value.tiers.default.limitations.slice(0,2),w=>(l(),a("li",{key:w},r(w),1))),128))])])])],2)])):b("",!0),(E=(d=u.value)==null?void 0:d.tiers)!=null&&E.ai?(l(),a("div",ot,[e("div",{class:_(["card h-100 setup-option",{"border-primary selected":f.value==="ai","locked-tier":u.value.tiers.ai.upgrade_required}]),onClick:s[1]||(s[1]=w=>u.value.tiers.ai.enabled?f.value="ai":null),style:ae({cursor:u.value.tiers.ai.enabled?"pointer":"not-allowed",opacity:u.value.tiers.ai.enabled?1:.7})},[e("div",nt,[u.value.tiers.ai.upgrade_required?(l(),a("div",it,[e("span",dt,[s[13]||(s[13]=e("i",{class:"fas fa-lock me-1"},null,-1)),n(" "+r(u.value.tiers.ai.upgrade_tier)+" Only ",1)])])):b("",!0),s[17]||(s[17]=e("div",{class:"mb-3"},[e("i",{class:"fas fa-robot fa-3x text-primary"})],-1)),e("h5",rt,r(u.value.tiers.ai.icon)+" "+r(u.value.tiers.ai.label),1),e("p",ut,r(u.value.tiers.ai.description),1),e("div",ct,[u.value.tiers.ai.enabled?(l(),a("span",vt,"Recommended")):b("",!0),e("span",mt,r(u.value.tiers.ai.setup_time),1)]),s[18]||(s[18]=e("hr",{class:"my-3"},null,-1)),u.value.tiers.ai.upgrade_required?(l(),a("div",bt,[s[14]||(s[14]=e("i",{class:"fas fa-star me-1"},null,-1)),n(" "+r(u.value.tiers.ai.upgrade_message),1)])):b("",!0),e("div",pt,[s[15]||(s[15]=e("div",{class:"small text-success mb-2"},[e("i",{class:"fas fa-check-circle me-1"}),n(),e("strong",null,"Pros:")],-1)),e("ul",gt,[(l(!0),a(z,null,G(u.value.tiers.ai.advantages.slice(0,3),w=>(l(),a("li",{key:w},r(w),1))),128))])]),u.value.tiers.ai.upgrade_required?(l(),a("div",ft,[e("button",{class:"btn btn-warning btn-sm w-100",onClick:le(Y,["stop"])},[s[16]||(s[16]=e("i",{class:"fas fa-arrow-up me-1"},null,-1)),n(" Upgrade to "+r(u.value.tiers.ai.upgrade_tier),1)])])):b("",!0)])],6)])):b("",!0),(X=(H=(M=u.value)==null?void 0:M.tiers)==null?void 0:H.manual)!=null&&X.enabled?(l(),a("div",{key:2,class:_((ie=(ne=(J=u.value)==null?void 0:J.tiers)==null?void 0:ne.ai)!=null&&ie.enabled?"col-md-4":"col-md-6")},[e("div",{class:_(["card h-100 setup-option",{"border-primary selected":f.value==="manual"}]),onClick:s[2]||(s[2]=w=>f.value="manual"),style:{cursor:"pointer"}},[e("div",ht,[s[21]||(s[21]=e("div",{class:"mb-3"},[e("i",{class:"fas fa-tools fa-3x text-secondary"})],-1)),e("h5",yt,r(((ue=(re=(de=u.value)==null?void 0:de.tiers)==null?void 0:re.manual)==null?void 0:ue.icon)||"ðŸ”§")+" "+r(((me=(ve=(ce=u.value)==null?void 0:ce.tiers)==null?void 0:ve.manual)==null?void 0:me.label)||"Manual Setup"),1),e("p",xt,r(((ge=(pe=(be=u.value)==null?void 0:be.tiers)==null?void 0:pe.manual)==null?void 0:ge.description)||"Step-by-step setup"),1),e("div",kt,[s[19]||(s[19]=e("span",{class:"badge bg-secondary"},"Advanced",-1)),e("span",wt,r(((ye=(he=(fe=u.value)==null?void 0:fe.tiers)==null?void 0:he.manual)==null?void 0:ye.setup_time)||"~10 min"),1)]),s[22]||(s[22]=e("hr",{class:"my-3"},null,-1)),e("div",Ct,[s[20]||(s[20]=e("div",{class:"small text-success mb-2"},[e("i",{class:"fas fa-check-circle me-1"}),n(),e("strong",null,"Pros:")],-1)),e("ul",_t,[(l(!0),a(z,null,G((((we=(ke=(xe=u.value)==null?void 0:xe.tiers)==null?void 0:ke.manual)==null?void 0:we.advantages)||[]).slice(0,3),w=>(l(),a("li",{key:w},r(w),1))),128))])])])],2)],2)):b("",!0)]),e("div",$t,[e("button",{class:"btn btn-primary btn-lg",onClick:T,disabled:!f.value},[s[23]||(s[23]=e("i",{class:"fas fa-arrow-right me-2"},null,-1)),n(" Continue with "+r(A.value),1)],8,At)])])):b("",!0),c.value===0&&P.provider!=="google"?(l(),a("div",St,[...s[25]||(s[25]=[U('<h5 class="font-weight-bold mb-3" data-v-eed38db9><i class="fab fa-google text-primary me-2" data-v-eed38db9></i> Create Google Cloud Project </h5><div class="alert alert-info" data-v-eed38db9><i class="fas fa-info-circle me-2" data-v-eed38db9></i> You&#39;ll need a Google account to create a Cloud project. </div><ol class="setup-steps" data-v-eed38db9><li class="mb-3" data-v-eed38db9> Go to <a href="https://console.cloud.google.com" target="_blank" class="text-primary" data-v-eed38db9><strong data-v-eed38db9>Google Cloud Console</strong><i class="fas fa-external-link-alt ms-1 small" data-v-eed38db9></i></a></li><li class="mb-3" data-v-eed38db9> Click the project dropdown at the top <br data-v-eed38db9><small class="text-muted" data-v-eed38db9>It usually says &quot;Select a project&quot; or shows your current project</small></li><li class="mb-3" data-v-eed38db9> Click <strong data-v-eed38db9>&quot;New Project&quot;</strong> in the top right </li><li class="mb-3" data-v-eed38db9> Name your project (e.g., &quot;Lodgeick Integration&quot;) </li><li class="mb-3" data-v-eed38db9> Click <strong data-v-eed38db9>&quot;Create&quot;</strong> and wait for the project to be created </li></ol><div class="text-center mt-4" data-v-eed38db9><img src="https://cloud.google.com/static/images/social-icon-google-cloud-1200-630.png" alt="Google Cloud" class="img-fluid rounded shadow" style="max-height:200px;" data-v-eed38db9></div>',4)])])):b("",!0),c.value===1?(l(),a("div",qt,[...s[26]||(s[26]=[U('<h5 class="font-weight-bold mb-3" data-v-eed38db9><i class="fas fa-toggle-on text-success me-2" data-v-eed38db9></i> Enable Required APIs </h5><div class="alert alert-warning" data-v-eed38db9><i class="fas fa-exclamation-triangle me-2" data-v-eed38db9></i> Make sure your new project is selected in the project dropdown! </div><ol class="setup-steps" data-v-eed38db9><li class="mb-3" data-v-eed38db9> Go to <a href="https://console.cloud.google.com/apis/library" target="_blank" class="text-primary" data-v-eed38db9><strong data-v-eed38db9>APIs &amp; Services &gt; Library</strong><i class="fas fa-external-link-alt ms-1 small" data-v-eed38db9></i></a></li><li class="mb-3" data-v-eed38db9> Search for and enable these APIs: <div class="mt-2" data-v-eed38db9><span class="badge bg-gradient-primary me-2 mb-2" data-v-eed38db9>Gmail API</span><span class="badge bg-gradient-info me-2 mb-2" data-v-eed38db9>Google Sheets API</span><span class="badge bg-gradient-success me-2 mb-2" data-v-eed38db9>Google Drive API</span></div></li><li class="mb-3" data-v-eed38db9> For each API: <ul class="mt-2" data-v-eed38db9><li data-v-eed38db9>Click on the API name</li><li data-v-eed38db9>Click the blue <strong data-v-eed38db9>&quot;Enable&quot;</strong> button</li><li data-v-eed38db9>Wait for it to activate (takes a few seconds)</li></ul></li></ol>',3)])])):b("",!0),c.value===2?(l(),a("div",jt,[...s[27]||(s[27]=[U('<h5 class="font-weight-bold mb-3" data-v-eed38db9><i class="fas fa-shield-alt text-warning me-2" data-v-eed38db9></i> Configure OAuth Consent Screen </h5><ol class="setup-steps" data-v-eed38db9><li class="mb-3" data-v-eed38db9> Go to <a href="https://console.cloud.google.com/apis/credentials/consent" target="_blank" class="text-primary" data-v-eed38db9><strong data-v-eed38db9>APIs &amp; Services &gt; OAuth consent screen</strong><i class="fas fa-external-link-alt ms-1 small" data-v-eed38db9></i></a></li><li class="mb-3" data-v-eed38db9> Select <strong data-v-eed38db9>&quot;External&quot;</strong> user type <br data-v-eed38db9><small class="text-muted" data-v-eed38db9>This allows you to use any Google account for testing</small></li><li class="mb-3" data-v-eed38db9> Click <strong data-v-eed38db9>&quot;Create&quot;</strong></li><li class="mb-3" data-v-eed38db9> Fill in the required fields: <div class="card mt-2 bg-light" data-v-eed38db9><div class="card-body" data-v-eed38db9><div class="mb-2" data-v-eed38db9><strong data-v-eed38db9>App name:</strong> Lodgeick</div><div class="mb-2" data-v-eed38db9><strong data-v-eed38db9>User support email:</strong> Your email</div><div class="mb-2" data-v-eed38db9><strong data-v-eed38db9>Developer contact:</strong> Your email</div></div></div></li><li class="mb-3" data-v-eed38db9> Click <strong data-v-eed38db9>&quot;Save and Continue&quot;</strong></li><li class="mb-3" data-v-eed38db9> On the &quot;Scopes&quot; page, click <strong data-v-eed38db9>&quot;Add or Remove Scopes&quot;</strong></li><li class="mb-3" data-v-eed38db9> Search for and select these scopes: <div class="card mt-2 bg-light" data-v-eed38db9><div class="card-body small" data-v-eed38db9><div class="mb-1" data-v-eed38db9><code data-v-eed38db9>https://www.googleapis.com/auth/gmail.readonly</code></div><div class="mb-1" data-v-eed38db9><code data-v-eed38db9>https://www.googleapis.com/auth/gmail.send</code></div><div class="mb-1" data-v-eed38db9><code data-v-eed38db9>https://www.googleapis.com/auth/spreadsheets</code></div><div class="mb-1" data-v-eed38db9><code data-v-eed38db9>https://www.googleapis.com/auth/drive.file</code></div></div></div></li><li class="mb-3" data-v-eed38db9> Click <strong data-v-eed38db9>&quot;Update&quot;</strong> then <strong data-v-eed38db9>&quot;Save and Continue&quot;</strong></li><li class="mb-3" data-v-eed38db9> On the &quot;Test users&quot; page, click <strong data-v-eed38db9>&quot;Add Users&quot;</strong></li><li class="mb-3" data-v-eed38db9> Add your Gmail address (the one you&#39;ll test with) </li><li class="mb-3" data-v-eed38db9> Click <strong data-v-eed38db9>&quot;Save and Continue&quot;</strong> through the remaining steps </li></ol>',2)])])):b("",!0),c.value===3?(l(),a("div",Pt,[s[34]||(s[34]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-key text-danger me-2"}),n(" Create OAuth 2.0 Credentials ")],-1)),e("ol",zt,[s[31]||(s[31]=U('<li class="mb-3" data-v-eed38db9> Go to <a href="https://console.cloud.google.com/apis/credentials" target="_blank" class="text-primary" data-v-eed38db9><strong data-v-eed38db9>APIs &amp; Services &gt; Credentials</strong><i class="fas fa-external-link-alt ms-1 small" data-v-eed38db9></i></a></li><li class="mb-3" data-v-eed38db9> Click <strong data-v-eed38db9>&quot;Create Credentials&quot;</strong> at the top </li><li class="mb-3" data-v-eed38db9> Select <strong data-v-eed38db9>&quot;OAuth 2.0 Client ID&quot;</strong></li><li class="mb-3" data-v-eed38db9> Application type: <strong data-v-eed38db9>&quot;Web application&quot;</strong></li><li class="mb-3" data-v-eed38db9> Name: <strong data-v-eed38db9>&quot;Lodgeick Local&quot;</strong> (or any name you prefer) </li><li class="mb-3" data-v-eed38db9> Under <strong data-v-eed38db9>&quot;Authorized redirect URIs&quot;</strong>, click <strong data-v-eed38db9>&quot;Add URI&quot;</strong></li>',6)),e("li",Gt,[s[29]||(s[29]=n(" Add this exact URI: ",-1)),e("div",It,[e("input",{type:"text",class:"form-control",value:q.value,readonly:""},null,8,Ot),e("button",{class:"btn btn-outline-secondary",onClick:s[3]||(s[3]=w=>F(q.value))},[...s[28]||(s[28]=[e("i",{class:"fas fa-copy"},null,-1)])])]),s[30]||(s[30]=e("small",{class:"text-muted"},"Click the copy button to copy the URI",-1))]),s[32]||(s[32]=e("li",{class:"mb-3"},[n(" Click "),e("strong",null,'"Create"')],-1)),s[33]||(s[33]=e("li",{class:"mb-3"},[n(" A dialog will appear showing your credentials "),e("div",{class:"alert alert-warning mt-2"},[e("i",{class:"fas fa-exclamation-triangle me-2"}),e("strong",null,"Important:"),n(" Copy both the Client ID and Client Secret - you'll need them in the next step! ")])],-1))])])):b("",!0),c.value===4?(l(),a("div",Mt,[s[40]||(s[40]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-cog text-info me-2"}),n(" Configure Lodgeick ")],-1)),s[41]||(s[41]=e("p",null,"Enter your OAuth credentials from Google Cloud Console:",-1)),e("div",Ut,[s[35]||(s[35]=e("label",{class:"form-label font-weight-bold"},[n(" Client ID "),e("span",{class:"text-danger"},"*")],-1)),D(e("input",{"onUpdate:modelValue":s[4]||(s[4]=w=>y.value=w),type:"text",class:"form-control",placeholder:"1234567890-abc123def456.apps.googleusercontent.com"},null,512),[[te,y.value]]),s[36]||(s[36]=e("small",{class:"text-muted"}," Ends with .apps.googleusercontent.com ",-1))]),e("div",Rt,[s[37]||(s[37]=e("label",{class:"form-label font-weight-bold"},[n(" Client Secret "),e("span",{class:"text-danger"},"*")],-1)),e("div",Nt,[D(e("input",{"onUpdate:modelValue":s[5]||(s[5]=w=>k.value=w),type:p.value?"text":"password",class:"form-control",placeholder:"GOCSPX-xxxxxxxxxxxxx"},null,8,Dt),[[Ae,k.value]]),e("button",{class:"btn btn-outline-secondary",onClick:s[6]||(s[6]=w=>p.value=!p.value)},[e("i",{class:_(p.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),s[38]||(s[38]=e("small",{class:"text-muted"}," Usually starts with GOCSPX- ",-1))]),y.value&&k.value?(l(),a("div",Et,[...s[39]||(s[39]=[e("i",{class:"fas fa-check-circle me-2"},null,-1),n(' Credentials look good! Click "Save & Test Connection" to finish. ',-1)])])):b("",!0)])):b("",!0),c.value===5?(l(),a("div",Lt,[s[43]||(s[43]=e("div",{class:"icon icon-shape bg-gradient-success shadow-success mx-auto mb-4",style:{width:"80px",height:"80px"}},[e("i",{class:"fas fa-check text-white",style:{"font-size":"2.5rem"}})],-1)),s[44]||(s[44]=e("h4",{class:"font-weight-bold mb-3"},"Setup Complete!",-1)),s[45]||(s[45]=e("p",{class:"text-muted mb-4"}," Your OAuth credentials have been configured successfully. ",-1)),e("div",Tt,[s[42]||(s[42]=e("i",{class:"fas fa-lightbulb me-2"},null,-1)),n(' You can now close this wizard and click "Connect App" to authenticate with '+r(C.value)+". ",1)])])):b("",!0)])]),e("div",Bt,[c.value>0&&c.value<5?(l(),a("button",{key:0,type:"button",class:"btn btn-secondary",onClick:W},[...s[46]||(s[46]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),n(" Previous ",-1)])])):b("",!0),c.value<4?(l(),a("button",{key:1,type:"button",class:"btn btn-primary",onClick:B},[...s[47]||(s[47]=[n(" Next ",-1),e("i",{class:"fas fa-arrow-right ms-2"},null,-1)])])):b("",!0),c.value===4?(l(),a("button",{key:2,type:"button",class:"btn btn-success",onClick:V,disabled:!y.value||!k.value||h.value},[h.value?(l(),a("span",Vt,[...s[48]||(s[48]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),n(" Saving... ",-1)])])):(l(),a("span",Ft,[...s[49]||(s[49]=[e("i",{class:"fas fa-save me-2"},null,-1),n(" Save & Test Connection ",-1)])]))],8,Wt)):b("",!0),c.value===5?(l(),a("button",{key:3,type:"button",class:"btn btn-primary",onClick:R},[...s[50]||(s[50]=[e("i",{class:"fas fa-check me-2"},null,-1),n(" Done ",-1)])])):b("",!0)])])])],6)}}},Ht=oe(Yt,[["__scopeId","data-v-eed38db9"]]),Xt={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},Jt={class:"modal-content"},Kt={class:"modal-body p-4"},Qt={key:0,class:"step"},Zt={class:"mb-3"},es=["disabled"],ts={key:0,class:"alert alert-danger"},ss=["disabled"],as={key:0},ls={key:1},os={key:1,class:"step"},ns={class:"alert alert-info"},is={class:"list-group mb-4"},ds={class:"d-flex justify-content-between align-items-start"},rs={class:"mb-1"},us={class:"mb-1 text-muted small"},cs={class:"mt-2"},vs={class:"small"},ms={key:0,class:"badge bg-warning text-dark"},bs={key:0,class:"alert alert-warning"},ps={class:"mb-0 mt-2"},gs={class:"card mt-4"},fs={class:"card-body"},hs={class:"row g-3"},ys={class:"col-md-6"},xs={class:"form-check"},ks={class:"col-md-6"},ws={class:"form-check"},Cs={class:"d-flex gap-2 mt-4"},_s=["disabled"],$s={key:1,class:"mt-3 p-3 border rounded bg-light"},As=["disabled"],Ss={key:0},qs={key:1},js={key:2,class:"step"},Ps={class:"card mb-3"},zs={class:"card-body"},Gs={class:"mt-2"},Is={class:"badge bg-primary me-2"},Os={class:"small text-muted"},Ms={class:"card mb-3"},Us={class:"card-body"},Rs={class:"mt-2 p-2 bg-light rounded"},Ns={class:"card mb-3"},Ds={class:"card-body"},Es={class:"input-group mt-2"},Ls=["value"],Ts={class:"d-flex gap-2 mt-4"},Bs={key:3,class:"step"},Ws={class:"text-center mb-4"},Vs={class:"text-muted"},Fs={class:"alert alert-success"},Ys={key:0,class:"alert alert-warning"},Hs={class:"mb-0 mt-2"},Xs={class:"card bg-light mt-4"},Js={class:"card-body"},Ks={class:"small"},Qs={class:"mb-2"},Zs=["href"],ea={class:"mb-2"},ta={class:"bg-white px-2 py-1 rounded"},sa={key:4,class:"step"},aa={class:"mb-3"},la={class:"mb-3"},oa={class:"input-group"},na=["type"],ia=["disabled"],da={key:0},ra={key:1},ua={key:5,class:"step text-center"},ca={__name:"GoogleAISetupWizard",props:{show:{type:Boolean,default:!1}},emits:["close","success"],setup(P,{emit:I}){const g=I,x=v("intent"),c=v("auto"),f=v(""),y=v(null),k=v(""),p=v(null),h=v(""),S=v(""),u=v(!1),$=v(!1),C=v(!1),A=v(!1),q=v(!1),j=v(null),O=K(()=>window.location.origin+"/api/method/lodgeick.api.oauth.oauth_callback"),T=Q({url:"lodgeick.api.google_ai_setup.parse_intent",makeParams(){return{intent:f.value}},onSuccess(o){C.value=!1,o.success?(y.value=o,x.value="preview",j.value=null):j.value=o.error||"Failed to parse intent"},onError(o){C.value=!1,j.value=o.message||o}}),B=Q({url:"lodgeick.api.google_ai_setup.create_project",makeParams(){return{project_name:k.value,intent_data:JSON.stringify(y.value)}},onSuccess(o){A.value=!1,o.success?(p.value=o,x.value="project_created"):alert("Failed to create project: "+(o.error||"Unknown error"))},onError(o){A.value=!1,alert("Error creating project: "+(o.message||o))}}),W=Q({url:"lodgeick.api.google_ai_setup.setup_oauth_credentials",makeParams(){return{project_id:p.value.project_id,client_id:h.value,client_secret:S.value}},onSuccess(o){q.value=!1,o.success?(x.value="complete",g("success",{project:p.value,credentials:{client_id:h.value,n8n_credential_id:o.n8n_credential_id}})):alert("Failed to save credentials: "+(o.error||"Unknown error"))},onError(o){q.value=!1,alert("Error saving credentials: "+(o.message||o))}});function V(){C.value=!0,j.value=null,T.submit()}function F(){c.value==="auto"?$.value=!0:x.value="manual_instructions"}function R(){A.value=!0,B.submit()}function Y(){q.value=!0,W.submit()}function m(o){navigator.clipboard.writeText(o).then(()=>{const i=event.target.closest("button").querySelector("i"),d=i.className;i.className="fas fa-check",setTimeout(()=>{i.className=d},2e3)})}function s(){x.value="intent",c.value="auto",f.value="",y.value=null,k.value="",p.value=null,h.value="",S.value="",u.value=!1,$.value=!1,j.value=null,g("close")}return(o,t)=>(l(),a("div",{class:_(["modal fade",{show:P.show,"d-block":P.show}]),tabindex:"-1",style:ae({backgroundColor:P.show?"rgba(0,0,0,0.5)":""}),onClick:le(s,["self"])},[e("div",Xt,[e("div",Jt,[e("div",{class:"modal-header bg-gradient-ai"},[t[13]||(t[13]=e("h5",{class:"modal-title text-white font-weight-bold"},[e("i",{class:"fas fa-robot me-2"}),n(" AI-Powered Google Integration Setup ")],-1)),e("button",{type:"button",class:"btn-close btn-close-white",onClick:s})]),e("div",Kt,[x.value==="intent"?(l(),a("div",Qt,[t[19]||(t[19]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-comment-dots text-primary me-2"}),n(" What do you want to integrate? ")],-1)),t[20]||(t[20]=e("p",{class:"text-muted"}," Describe in plain English what Google services you want to connect. Our AI will figure out which APIs and permissions you need. ",-1)),e("div",Zt,[t[14]||(t[14]=e("label",{class:"form-label font-weight-bold"},"Your Integration Request",-1)),D(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=i=>f.value=i),class:"form-control",rows:"4",placeholder:"Example: I want to read and send emails from Gmail, and create spreadsheets in Google Sheets",disabled:C.value},null,8,es),[[te,f.value]]),t[15]||(t[15]=e("small",{class:"text-muted"},' Try: "Connect to Google Drive and Gmail" or "Access Google Calendar and Sheets" ',-1))]),j.value?(l(),a("div",ts,[t[16]||(t[16]=e("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),n(" "+r(j.value),1)])):b("",!0),e("button",{class:"btn btn-primary btn-lg w-100",onClick:V,disabled:!f.value||C.value},[C.value?(l(),a("span",as,[...t[17]||(t[17]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),n(" AI is analyzing your request... ",-1)])])):(l(),a("span",ls,[...t[18]||(t[18]=[e("i",{class:"fas fa-magic me-2"},null,-1),n(" Analyze with AI ",-1)])]))],8,ss)])):b("",!0),x.value==="preview"?(l(),a("div",os,[t[42]||(t[42]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-list-check text-success me-2"}),n(" AI Analysis Results ")],-1)),e("div",ns,[t[21]||(t[21]=e("i",{class:"fas fa-robot me-2"},null,-1)),t[22]||(t[22]=e("strong",null,"AI Reasoning:",-1)),n(" "+r(y.value.reasoning),1)]),t[43]||(t[43]=e("h6",{class:"font-weight-bold mt-4 mb-3"},"Required Google APIs:",-1)),e("div",is,[(l(!0),a(z,null,G(y.value.apis,i=>(l(),a("div",{key:i.name,class:"list-group-item"},[e("div",ds,[e("div",null,[e("h6",rs,[t[23]||(t[23]=e("i",{class:"fab fa-google text-primary me-2"},null,-1)),n(" "+r(i.display_name),1)]),e("p",us,r(i.description),1),e("div",cs,[(l(!0),a(z,null,G(i.scopes,d=>(l(),a("span",{key:d,class:"badge bg-light text-dark me-1 mb-1"},[e("code",vs,r(d),1)]))),128))])]),y.value.billing_apis&&y.value.billing_apis.includes(i.name)?(l(),a("span",ms,[...t[24]||(t[24]=[e("i",{class:"fas fa-credit-card me-1"},null,-1),n(" Billing Required ",-1)])])):b("",!0)])]))),128))]),y.value.billing_required?(l(),a("div",bs,[t[26]||(t[26]=e("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[27]||(t[27]=e("strong",null,"Billing Account Required",-1)),e("p",ps,[t[25]||(t[25]=n(" The following APIs require a billing account to be linked to your Google Cloud project: ",-1)),e("strong",null,r(y.value.billing_apis.join(", ")),1)]),t[28]||(t[28]=e("p",{class:"mb-0 mt-2 small"}," Make sure your Google Cloud project has billing enabled before proceeding. ",-1))])):b("",!0),e("div",gs,[e("div",fs,[t[35]||(t[35]=e("h6",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-route text-primary me-2"}),n(" Choose Your Setup Method ")],-1)),e("div",hs,[e("div",ys,[e("div",{class:_(["border rounded p-3 h-100",{"border-primary bg-light":c.value==="auto"}])},[e("div",xs,[D(e("input",{class:"form-check-input",type:"radio",name:"setupMethod",id:"autoSetup",value:"auto","onUpdate:modelValue":t[1]||(t[1]=i=>c.value=i)},null,512),[[Ce,c.value]]),t[29]||(t[29]=e("label",{class:"form-check-label font-weight-bold",for:"autoSetup"},[e("i",{class:"fas fa-magic text-primary me-2"}),n(" Automated Setup (New Project) ")],-1))]),t[30]||(t[30]=e("p",{class:"small text-muted mt-2 mb-0"}," Let Lodgeick create a new Google Cloud project and enable APIs for you automatically. ",-1)),t[31]||(t[31]=e("div",{class:"mt-2"},[e("span",{class:"badge bg-success me-1"},"Recommended"),e("span",{class:"badge bg-info"},"Fastest")],-1))],2)]),e("div",ks,[e("div",{class:_(["border rounded p-3 h-100",{"border-primary bg-light":c.value==="manual"}])},[e("div",ws,[D(e("input",{class:"form-check-input",type:"radio",name:"setupMethod",id:"manualSetup",value:"manual","onUpdate:modelValue":t[2]||(t[2]=i=>c.value=i)},null,512),[[Ce,c.value]]),t[32]||(t[32]=e("label",{class:"form-check-label font-weight-bold",for:"manualSetup"},[e("i",{class:"fas fa-hand-pointer text-warning me-2"}),n(" Manual Setup (Existing Project) ")],-1))]),t[33]||(t[33]=e("p",{class:"small text-muted mt-2 mb-0"}," I already have a Google Cloud project and want to use my existing setup. ",-1)),t[34]||(t[34]=e("div",{class:"mt-2"},[e("span",{class:"badge bg-secondary"},"Advanced")],-1))],2)])])])]),e("div",Cs,[e("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=i=>x.value="intent")},[...t[36]||(t[36]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),n(" Back ",-1)])]),e("button",{class:"btn btn-primary flex-fill",onClick:F,disabled:!c.value},[t[37]||(t[37]=e("i",{class:"fas fa-arrow-right me-2"},null,-1)),n(" Continue with "+r(c.value==="auto"?"Automated":"Manual")+" Setup ",1)],8,_s)]),$.value&&c.value==="auto"?(l(),a("div",$s,[t[40]||(t[40]=e("h6",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-folder-plus me-2"}),n(" Name Your New Project ")],-1)),D(e("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>k.value=i),type:"text",class:"form-control mb-3",placeholder:"e.g., My Lodgeick Integration"},null,512),[[te,k.value]]),t[41]||(t[41]=e("small",{class:"text-muted d-block mb-3"}," A unique project ID will be generated automatically ",-1)),e("button",{class:"btn btn-success w-100",onClick:R,disabled:!k.value||A.value},[A.value?(l(),a("span",Ss,[...t[38]||(t[38]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),n(" Creating project and enabling APIs... ",-1)])])):(l(),a("span",qs,[...t[39]||(t[39]=[e("i",{class:"fas fa-rocket me-2"},null,-1),n(" Create Google Cloud Project ",-1)])]))],8,As)])):b("",!0)])):b("",!0),x.value==="manual_instructions"?(l(),a("div",js,[t[53]||(t[53]=U('<h5 class="font-weight-bold mb-3" data-v-5aa547f7><i class="fas fa-list-ol text-primary me-2" data-v-5aa547f7></i> Manual Setup Instructions </h5><div class="alert alert-info" data-v-5aa547f7><i class="fas fa-info-circle me-2" data-v-5aa547f7></i> Follow these steps in your Google Cloud Console to set up the required APIs and OAuth credentials. </div><div class="card mb-3" data-v-5aa547f7><div class="card-header bg-light" data-v-5aa547f7><h6 class="mb-0 font-weight-bold" data-v-5aa547f7><i class="fas fa-project-diagram me-2" data-v-5aa547f7></i> Step 1: Use Existing or Create New Project </h6></div><div class="card-body" data-v-5aa547f7><ol class="mb-0" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com" target="_blank" class="text-primary" data-v-5aa547f7> Google Cloud Console <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Select an existing project or create a new one</li><li data-v-5aa547f7>Copy your project ID (you&#39;ll need it later)</li></ol></div></div>',3)),e("div",Ps,[t[45]||(t[45]=e("div",{class:"card-header bg-light"},[e("h6",{class:"mb-0 font-weight-bold"},[e("i",{class:"fas fa-toggle-on me-2"}),n(" Step 2: Enable Required APIs ")])],-1)),e("div",zs,[t[44]||(t[44]=U('<ol class="mb-2" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com/apis/library" target="_blank" class="text-primary" data-v-5aa547f7> APIs &amp; Services &gt; Library <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Enable these APIs in your project:</li></ol>',1)),e("div",Gs,[(l(!0),a(z,null,G(y.value.apis,i=>(l(),a("div",{key:i.name,class:"mb-2"},[e("span",Is,r(i.display_name),1),e("code",Os,r(i.name),1)]))),128))])])]),e("div",Ms,[t[47]||(t[47]=e("div",{class:"card-header bg-light"},[e("h6",{class:"mb-0 font-weight-bold"},[e("i",{class:"fas fa-shield-alt me-2"}),n(" Step 3: Configure OAuth Consent Screen ")])],-1)),e("div",Us,[t[46]||(t[46]=U('<ol class="mb-0" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com/apis/credentials/consent" target="_blank" class="text-primary" data-v-5aa547f7> OAuth consent screen <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Choose &quot;External&quot; user type</li><li class="mb-2" data-v-5aa547f7>Fill in app name: <strong data-v-5aa547f7>Lodgeick</strong></li><li class="mb-2" data-v-5aa547f7>Add required scopes:</li></ol>',1)),e("div",Rs,[(l(!0),a(z,null,G(y.value.apis,i=>(l(),a("div",{key:i.name},[(l(!0),a(z,null,G(i.scopes,d=>(l(),a("code",{class:"small d-block",key:d},r(d),1))),128))]))),128))])])]),e("div",Ns,[t[50]||(t[50]=e("div",{class:"card-header bg-light"},[e("h6",{class:"mb-0 font-weight-bold"},[e("i",{class:"fas fa-key me-2"}),n(" Step 4: Create OAuth Credentials ")])],-1)),e("div",Ds,[t[49]||(t[49]=U('<ol class="mb-2" data-v-5aa547f7><li class="mb-2" data-v-5aa547f7> Go to <a href="https://console.cloud.google.com/apis/credentials" target="_blank" class="text-primary" data-v-5aa547f7> Credentials <i class="fas fa-external-link-alt ms-1 small" data-v-5aa547f7></i></a></li><li class="mb-2" data-v-5aa547f7>Click &quot;Create Credentials&quot; â†’ &quot;OAuth 2.0 Client ID&quot;</li><li class="mb-2" data-v-5aa547f7>Application type: <strong data-v-5aa547f7>Web application</strong></li><li class="mb-2" data-v-5aa547f7>Add authorized redirect URI:</li></ol>',1)),e("div",Es,[e("input",{type:"text",class:"form-control font-monospace",value:O.value,readonly:""},null,8,Ls),e("button",{class:"btn btn-outline-secondary",onClick:t[5]||(t[5]=i=>m(O.value))},[...t[48]||(t[48]=[e("i",{class:"fas fa-copy"},null,-1)])])])])]),e("div",Ts,[e("button",{class:"btn btn-secondary",onClick:t[6]||(t[6]=i=>x.value="preview")},[...t[51]||(t[51]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),n(" Back ",-1)])]),e("button",{class:"btn btn-primary flex-fill",onClick:t[7]||(t[7]=i=>x.value="oauth_input")},[...t[52]||(t[52]=[e("i",{class:"fas fa-arrow-right me-2"},null,-1),n(" I've Completed the Setup ",-1)])])])])):b("",!0),x.value==="project_created"?(l(),a("div",Bs,[e("div",Ws,[t[56]||(t[56]=e("div",{class:"icon-shape bg-gradient-success shadow-success mx-auto mb-3",style:{width:"80px",height:"80px"}},[e("i",{class:"fas fa-check text-white",style:{"font-size":"2.5rem"}})],-1)),t[57]||(t[57]=e("h4",{class:"font-weight-bold"},"Project Created Successfully!",-1)),e("p",Vs,[t[54]||(t[54]=n(" Google Cloud project ",-1)),e("strong",null,r(p.value.project_id),1),t[55]||(t[55]=n(" is ready ",-1))])]),e("div",Fs,[t[58]||(t[58]=e("i",{class:"fas fa-check-circle me-2"},null,-1)),e("strong",null,r(p.value.apis_enabled.length)+" APIs Enabled:",1),n(" "+r(p.value.apis_enabled.join(", ")),1)]),p.value.apis_failed&&p.value.apis_failed.length>0?(l(),a("div",Ys,[t[59]||(t[59]=e("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),t[60]||(t[60]=e("strong",null,"Some APIs failed to enable:",-1)),e("ul",Hs,[(l(!0),a(z,null,G(p.value.apis_failed,i=>(l(),a("li",{key:i.api},r(i.api)+": "+r(i.error),1))),128))])])):b("",!0),e("div",Xs,[e("div",Js,[t[68]||(t[68]=e("h6",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-key text-warning me-2"}),n(" Next: Create OAuth Credentials ")],-1)),t[69]||(t[69]=e("p",{class:"small text-muted mb-3"}," You need to manually create OAuth credentials in Google Cloud Console. Follow these steps: ",-1)),e("ol",Ks,[e("li",Qs,[t[62]||(t[62]=n(" Go to ",-1)),e("a",{href:`https://console.cloud.google.com/apis/credentials?project=${p.value.project_id}`,target:"_blank",class:"text-primary"},[...t[61]||(t[61]=[n(" Google Cloud Console - Credentials ",-1),e("i",{class:"fas fa-external-link-alt ms-1"},null,-1)])],8,Zs)]),t[65]||(t[65]=e("li",{class:"mb-2"},"Configure OAuth consent screen (if not done already)",-1)),t[66]||(t[66]=e("li",{class:"mb-2"},"Create OAuth 2.0 Client ID (Web application)",-1)),e("li",ea,[t[64]||(t[64]=n(" Add redirect URI: ",-1)),e("code",ta,r(O.value),1),e("button",{class:"btn btn-sm btn-outline-secondary ms-2",onClick:t[8]||(t[8]=i=>m(O.value))},[...t[63]||(t[63]=[e("i",{class:"fas fa-copy"},null,-1)])])]),t[67]||(t[67]=e("li",null,"Copy the Client ID and Client Secret",-1))])])]),e("button",{class:"btn btn-primary w-100 mt-3",onClick:t[9]||(t[9]=i=>x.value="oauth_input")},[...t[70]||(t[70]=[e("i",{class:"fas fa-arrow-right me-2"},null,-1),n(" I've Created OAuth Credentials ",-1)])])])):b("",!0),x.value==="oauth_input"?(l(),a("div",sa,[t[75]||(t[75]=e("h5",{class:"font-weight-bold mb-3"},[e("i",{class:"fas fa-key text-primary me-2"}),n(" Enter OAuth Credentials ")],-1)),e("div",aa,[t[71]||(t[71]=e("label",{class:"form-label font-weight-bold"},[n(" Client ID "),e("span",{class:"text-danger"},"*")],-1)),D(e("input",{"onUpdate:modelValue":t[10]||(t[10]=i=>h.value=i),type:"text",class:"form-control",placeholder:"123456789-abc123def456.apps.googleusercontent.com"},null,512),[[te,h.value]])]),e("div",la,[t[72]||(t[72]=e("label",{class:"form-label font-weight-bold"},[n(" Client Secret "),e("span",{class:"text-danger"},"*")],-1)),e("div",oa,[D(e("input",{"onUpdate:modelValue":t[11]||(t[11]=i=>S.value=i),type:u.value?"text":"password",class:"form-control",placeholder:"GOCSPX-xxxxxxxxxxxxx"},null,8,na),[[Ae,S.value]]),e("button",{class:"btn btn-outline-secondary",onClick:t[12]||(t[12]=i=>u.value=!u.value)},[e("i",{class:_(u.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),e("button",{class:"btn btn-success w-100",onClick:Y,disabled:!h.value||!S.value||q.value},[q.value?(l(),a("span",da,[...t[73]||(t[73]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),n(" Saving & Syncing to n8n... ",-1)])])):(l(),a("span",ra,[...t[74]||(t[74]=[e("i",{class:"fas fa-save me-2"},null,-1),n(" Save & Sync to n8n ",-1)])]))],8,ia)])):b("",!0),x.value==="complete"?(l(),a("div",ua,[t[77]||(t[77]=U('<div class="icon-shape bg-gradient-success shadow-success mx-auto mb-4" style="width:100px;height:100px;" data-v-5aa547f7><i class="fas fa-check-double text-white" style="font-size:3rem;" data-v-5aa547f7></i></div><h4 class="font-weight-bold mb-3" data-v-5aa547f7>Setup Complete!</h4><p class="text-muted mb-4" data-v-5aa547f7> Your Google Cloud integration is ready to use. Credentials have been synced to n8n. </p><div class="alert alert-success" data-v-5aa547f7><i class="fas fa-info-circle me-2" data-v-5aa547f7></i> You can now use these credentials in your n8n workflows and Lodgeick integrations. </div>',4)),e("button",{class:"btn btn-primary btn-lg",onClick:s},[...t[76]||(t[76]=[e("i",{class:"fas fa-check me-2"},null,-1),n(" Done ",-1)])])])):b("",!0)])])])],6))}},va=oe(ca,[["__scopeId","data-v-5aa547f7"]]),ma={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100"},ba={class:"p-6"},pa={class:"flex items-center justify-between"},ga={class:"flex items-center gap-4"},fa={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-12"},ha={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},ya={class:"flex items-start justify-between mb-4"},xa={class:"flex items-center gap-4"},ka={class:"text-xl font-bold text-gray-900"},wa={class:"text-sm text-gray-500"},Ca={key:0,class:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},_a={key:1,class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$a={key:2,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Aa={class:"space-y-3"},Sa={class:"flex items-center gap-3"},qa={class:"flex-1"},ja=["onClick"],Pa={key:1,class:"text-xs text-green-600"},za={class:"flex items-center gap-3"},Ga={class:"flex-1"},Ia=["onClick","disabled"],Oa={key:1,class:"text-xs text-green-600"},Ma={key:2,class:"text-xs text-gray-500"},Ua={class:"flex items-center gap-3"},Ra={class:"flex-1"},Na=["onClick","disabled"],Da={key:1,class:"text-xs text-green-600"},Ea={key:2,class:"text-xs text-gray-500"},La={class:"flex justify-between items-center"},Ta={class:"flex gap-3"},Ba={__name:"IntegrateView",setup(P){const I=qe(),g=Ge(),x=()=>{Pe.logout.submit()},c=v(!1),f=v(!1),y=v(""),k=v(null),p=v(null),h=v({}),S=v({}),u=v({}),$=o=>g.availableApps.find(t=>t.id===o),C=o=>S.value[o]===!0,A=o=>u.value[o]===!0,q=o=>A(o)&&h.value[o]?"connected":C(o)?"credentials":"not-connected",j=K(()=>g.connectedApps.every(o=>A(o)&&h.value[o])),O=o=>{const t=$(o);t&&(y.value=t.oauth_provider||o,c.value=!0)},T=o=>{c.value=!1;const t=g.connectedApps.find(i=>{const d=$(i);return d&&(d.oauth_provider===o.provider||d.id===o.provider)});t&&(S.value[t]=!0)},B=()=>{c.value=!1,f.value=!0},W=o=>{f.value=!1;const t=g.connectedApps.find(i=>{const d=$(i);return d&&(d.oauth_provider==="google"||d.id==="google")});t&&(S.value[t]=!0),alert("Google Cloud integration setup complete! You can now authorize access.")},V=o=>Z(this,null,function*(){const t=$(o);if(!t)return;k.value=o;const i=t.oauth_provider||o;try{const d=yield R.submit({provider:i});d.success&&d.authorization_url&&(window.location.href=d.authorization_url)}catch(d){console.error("Failed to initiate OAuth:",d),alert("Failed to start authorization. Please check your credentials.")}finally{k.value=null}}),F=o=>Z(this,null,function*(){const t=$(o);if(t){p.value=o,t.oauth_provider;try{yield new Promise(i=>setTimeout(i,1500)),h.value[o]=!0}catch(i){console.error("Connection test failed:",i),alert("Connection test failed. Please try authorizing again.")}finally{p.value=null}}}),R=Q({url:"lodgeick.api.oauth.initiate_oauth",makeParams(o){return{provider:o.provider,redirect_uri:window.location.origin+"/oauth/callback"}}}),Y=()=>{g.nextStep(),I.push({name:"Configure"})},m=()=>{g.completeOnboarding(),I.push({name:"Dashboard"})},s=()=>{g.previousStep(),I.push({name:"ConnectApps"})};return se(()=>{if(g.connectedApps.length===0){I.push({name:"ConnectApps"});return}const o=new URLSearchParams(window.location.search),t=o.get("oauth_success"),i=o.get("provider");if(t==="true"&&i){const d=g.connectedApps.find(E=>{const M=$(E);return M&&(M.oauth_provider===i||M.id===i)});d&&(u.value[d]=!0,S.value[d]=!0),window.history.replaceState({},document.title,window.location.pathname)}}),(o,t)=>{const i=je("router-link");return l(),a("div",ma,[e("div",ba,[e("div",pa,[N(i,{to:"/",class:"inline-flex items-center gap-3 group no-underline"},{default:ee(()=>[...t[2]||(t[2]=[e("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"},[e("span",{class:"text-white font-bold text-xl"},"L")],-1),e("span",{class:"text-2xl font-bold text-gray-900"},"Lodgeick",-1)])]),_:1}),e("div",ga,[N(i,{to:"/account/profile",class:"text-gray-700 hover:text-blue-600 font-medium transition-colors no-underline flex items-center gap-2"},{default:ee(()=>[...t[3]||(t[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),n(" My Account ",-1)])]),_:1}),e("button",{onClick:x,class:"text-gray-700 hover:text-red-600 font-medium transition-colors flex items-center gap-2"},[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),n(" Log Out ",-1)])])])])]),e("div",fa,[N(Ie,{"current-step":_e(g).currentStep,"total-steps":4},null,8,["current-step"]),t[13]||(t[13]=e("div",{class:"text-center mb-12"},[e("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Connect Your Apps "),e("p",{class:"text-xl text-gray-600 max-w-2xl mx-auto"}," Set up OAuth credentials and authorize each app to enable seamless integrations ")],-1)),e("div",ha,[(l(!0),a(z,null,G(_e(g).connectedApps,d=>{var E,M,H,X;return l(),a("div",{key:d,class:"bg-white rounded-2xl shadow-lg p-6 transition-all duration-200 hover:shadow-xl"},[e("div",ya,[e("div",xa,[e("div",{class:_(["w-16 h-16 rounded-lg flex items-center justify-center text-3xl",(E=$(d))==null?void 0:E.color])},r((M=$(d))==null?void 0:M.icon),3),e("div",null,[e("h3",ka,r((H=$(d))==null?void 0:H.name),1),e("p",wa,r((X=$(d))==null?void 0:X.description),1)])]),e("div",{class:_(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",q(d)==="connected"?"bg-green-100":q(d)==="credentials"?"bg-yellow-100":"bg-gray-100"])},[q(d)==="connected"?(l(),a("svg",Ca,[...t[5]||(t[5]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):q(d)==="credentials"?(l(),a("svg",_a,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"},null,-1)])])):(l(),a("svg",$a,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])]))],2)]),e("div",Aa,[e("div",Sa,[e("div",{class:_(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",C(d)?"bg-green-500 text-white":"bg-gray-300 text-gray-700"])},r(C(d)?"âœ“":"1"),3),e("div",qa,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-900"}," OAuth Credentials ",-1)),C(d)?(l(),a("p",Pa," Configured ")):(l(),a("button",{key:0,onClick:J=>O(d),class:"text-xs text-blue-600 hover:text-blue-700 font-medium"}," Set up credentials â†’ ",8,ja))])]),e("div",za,[e("div",{class:_(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",A(d)?"bg-green-500 text-white":C(d)?"bg-blue-500 text-white":"bg-gray-300 text-gray-700"])},r(A(d)?"âœ“":"2"),3),e("div",Ga,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-900"}," Authorize Access ",-1)),C(d)&&!A(d)?(l(),a("button",{key:0,onClick:J=>V(d),disabled:k.value===d,class:"text-xs text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50"},r(k.value===d?"Authorizing...":"Authorize now â†’"),9,Ia)):A(d)?(l(),a("p",Oa," Authorized ")):(l(),a("p",Ma," Complete step 1 first "))])]),e("div",Ua,[e("div",{class:_(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",h.value[d]?"bg-green-500 text-white":A(d)?"bg-blue-500 text-white":"bg-gray-300 text-gray-700"])},r(h.value[d]?"âœ“":"3"),3),e("div",Ra,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-900"}," Test Connection ",-1)),A(d)&&!h.value[d]?(l(),a("button",{key:0,onClick:J=>F(d),disabled:p.value===d,class:"text-xs text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50"},r(p.value===d?"Testing...":"Test now â†’"),9,Na)):h.value[d]?(l(),a("p",Da," Connection verified ")):(l(),a("p",Ea," Complete step 2 first "))])])])])}),128))]),e("div",La,[N($e,{label:"Back",onClick:s},{icon:ee(()=>[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),e("div",Ta,[N($e,{label:"Skip for Now",onClick:m}),N(Oe,{label:"Continue",disabled:!j.value,onClick:Y},{iconRight:ee(()=>[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["disabled"])])])]),N(Ht,{show:c.value,provider:y.value,onClose:t[0]||(t[0]=d=>c.value=!1),onSuccess:T,onLaunchAIWizard:B},null,8,["show","provider"]),N(va,{show:f.value,onClose:t[1]||(t[1]=d=>f.value=!1),onSuccess:W},null,8,["show"])])}}},Xa=oe(Ba,[["__scopeId","data-v-5ee591ec"]]);export{Xa as default};
//# sourceMappingURL=IntegrateView-CGf6bn5N.js.map
